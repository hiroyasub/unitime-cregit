begin_unit|revision:1.0.0;language:Java;cregit-version:0.0.1
begin_comment
comment|/*  * Licensed to The Apereo Foundation under one or more contributor license  * agreements. See the NOTICE file distributed with this work for  * additional information regarding copyright ownership.  *  * The Apereo Foundation licenses this file to you under the Apache License,  * Version 2.0 (the "License"); you may not use this file except in  * compliance with the License. You may obtain a copy of the License at:  *  * http://www.apache.org/licenses/LICENSE-2.0  *  * Unless required by applicable law or agreed to in writing, software  * distributed under the License is distributed on an "AS IS" BASIS,  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  *  * See the License for the specific language governing permissions and  * limitations under the License.  *  */
end_comment

begin_package
package|package
name|org
operator|.
name|unitime
operator|.
name|timetable
operator|.
name|gwt
operator|.
name|client
operator|.
name|sectioning
package|;
end_package

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|ArrayList
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|Comparator
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|Date
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|HashSet
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|Iterator
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|List
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|Map
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|Set
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|TreeSet
import|;
end_import

begin_import
import|import
name|org
operator|.
name|unitime
operator|.
name|timetable
operator|.
name|gwt
operator|.
name|client
operator|.
name|ToolBox
import|;
end_import

begin_import
import|import
name|org
operator|.
name|unitime
operator|.
name|timetable
operator|.
name|gwt
operator|.
name|client
operator|.
name|page
operator|.
name|UniTimeNotifications
import|;
end_import

begin_import
import|import
name|org
operator|.
name|unitime
operator|.
name|timetable
operator|.
name|gwt
operator|.
name|client
operator|.
name|rooms
operator|.
name|RoomHint
import|;
end_import

begin_import
import|import
name|org
operator|.
name|unitime
operator|.
name|timetable
operator|.
name|gwt
operator|.
name|client
operator|.
name|sectioning
operator|.
name|EnrollmentTable
operator|.
name|TopCell
import|;
end_import

begin_import
import|import
name|org
operator|.
name|unitime
operator|.
name|timetable
operator|.
name|gwt
operator|.
name|client
operator|.
name|sectioning
operator|.
name|SectioningStatusFilterBox
operator|.
name|SectioningStatusFilterRpcRequest
import|;
end_import

begin_import
import|import
name|org
operator|.
name|unitime
operator|.
name|timetable
operator|.
name|gwt
operator|.
name|client
operator|.
name|widgets
operator|.
name|LoadingWidget
import|;
end_import

begin_import
import|import
name|org
operator|.
name|unitime
operator|.
name|timetable
operator|.
name|gwt
operator|.
name|client
operator|.
name|widgets
operator|.
name|P
import|;
end_import

begin_import
import|import
name|org
operator|.
name|unitime
operator|.
name|timetable
operator|.
name|gwt
operator|.
name|client
operator|.
name|widgets
operator|.
name|SimpleForm
import|;
end_import

begin_import
import|import
name|org
operator|.
name|unitime
operator|.
name|timetable
operator|.
name|gwt
operator|.
name|client
operator|.
name|widgets
operator|.
name|UniTimeDialogBox
import|;
end_import

begin_import
import|import
name|org
operator|.
name|unitime
operator|.
name|timetable
operator|.
name|gwt
operator|.
name|client
operator|.
name|widgets
operator|.
name|UniTimeHeaderPanel
import|;
end_import

begin_import
import|import
name|org
operator|.
name|unitime
operator|.
name|timetable
operator|.
name|gwt
operator|.
name|client
operator|.
name|widgets
operator|.
name|UniTimeTabPanel
import|;
end_import

begin_import
import|import
name|org
operator|.
name|unitime
operator|.
name|timetable
operator|.
name|gwt
operator|.
name|client
operator|.
name|widgets
operator|.
name|UniTimeTable
import|;
end_import

begin_import
import|import
name|org
operator|.
name|unitime
operator|.
name|timetable
operator|.
name|gwt
operator|.
name|client
operator|.
name|widgets
operator|.
name|UniTimeWidget
import|;
end_import

begin_import
import|import
name|org
operator|.
name|unitime
operator|.
name|timetable
operator|.
name|gwt
operator|.
name|client
operator|.
name|widgets
operator|.
name|UniTimeTable
operator|.
name|HasColSpan
import|;
end_import

begin_import
import|import
name|org
operator|.
name|unitime
operator|.
name|timetable
operator|.
name|gwt
operator|.
name|client
operator|.
name|widgets
operator|.
name|UniTimeTable
operator|.
name|MouseClickListener
import|;
end_import

begin_import
import|import
name|org
operator|.
name|unitime
operator|.
name|timetable
operator|.
name|gwt
operator|.
name|client
operator|.
name|widgets
operator|.
name|UniTimeTable
operator|.
name|TableEvent
import|;
end_import

begin_import
import|import
name|org
operator|.
name|unitime
operator|.
name|timetable
operator|.
name|gwt
operator|.
name|client
operator|.
name|widgets
operator|.
name|UniTimeTableHeader
import|;
end_import

begin_import
import|import
name|org
operator|.
name|unitime
operator|.
name|timetable
operator|.
name|gwt
operator|.
name|client
operator|.
name|widgets
operator|.
name|UniTimeTableHeader
operator|.
name|Operation
import|;
end_import

begin_import
import|import
name|org
operator|.
name|unitime
operator|.
name|timetable
operator|.
name|gwt
operator|.
name|command
operator|.
name|client
operator|.
name|GwtRpcService
import|;
end_import

begin_import
import|import
name|org
operator|.
name|unitime
operator|.
name|timetable
operator|.
name|gwt
operator|.
name|command
operator|.
name|client
operator|.
name|GwtRpcServiceAsync
import|;
end_import

begin_import
import|import
name|org
operator|.
name|unitime
operator|.
name|timetable
operator|.
name|gwt
operator|.
name|client
operator|.
name|widgets
operator|.
name|UniTimeTextBox
import|;
end_import

begin_import
import|import
name|org
operator|.
name|unitime
operator|.
name|timetable
operator|.
name|gwt
operator|.
name|client
operator|.
name|widgets
operator|.
name|UniTimeTable
operator|.
name|HasCellAlignment
import|;
end_import

begin_import
import|import
name|org
operator|.
name|unitime
operator|.
name|timetable
operator|.
name|gwt
operator|.
name|resources
operator|.
name|GwtConstants
import|;
end_import

begin_import
import|import
name|org
operator|.
name|unitime
operator|.
name|timetable
operator|.
name|gwt
operator|.
name|resources
operator|.
name|StudentSectioningConstants
import|;
end_import

begin_import
import|import
name|org
operator|.
name|unitime
operator|.
name|timetable
operator|.
name|gwt
operator|.
name|resources
operator|.
name|StudentSectioningMessages
import|;
end_import

begin_import
import|import
name|org
operator|.
name|unitime
operator|.
name|timetable
operator|.
name|gwt
operator|.
name|resources
operator|.
name|StudentSectioningResources
import|;
end_import

begin_import
import|import
name|org
operator|.
name|unitime
operator|.
name|timetable
operator|.
name|gwt
operator|.
name|services
operator|.
name|SectioningService
import|;
end_import

begin_import
import|import
name|org
operator|.
name|unitime
operator|.
name|timetable
operator|.
name|gwt
operator|.
name|services
operator|.
name|SectioningServiceAsync
import|;
end_import

begin_import
import|import
name|org
operator|.
name|unitime
operator|.
name|timetable
operator|.
name|gwt
operator|.
name|shared
operator|.
name|ClassAssignmentInterface
import|;
end_import

begin_import
import|import
name|org
operator|.
name|unitime
operator|.
name|timetable
operator|.
name|gwt
operator|.
name|shared
operator|.
name|ClassAssignmentInterface
operator|.
name|Enrollment
import|;
end_import

begin_import
import|import
name|org
operator|.
name|unitime
operator|.
name|timetable
operator|.
name|gwt
operator|.
name|shared
operator|.
name|ClassAssignmentInterface
operator|.
name|EnrollmentInfo
import|;
end_import

begin_import
import|import
name|org
operator|.
name|unitime
operator|.
name|timetable
operator|.
name|gwt
operator|.
name|shared
operator|.
name|ClassAssignmentInterface
operator|.
name|IdValue
import|;
end_import

begin_import
import|import
name|org
operator|.
name|unitime
operator|.
name|timetable
operator|.
name|gwt
operator|.
name|shared
operator|.
name|ClassAssignmentInterface
operator|.
name|SectioningAction
import|;
end_import

begin_import
import|import
name|org
operator|.
name|unitime
operator|.
name|timetable
operator|.
name|gwt
operator|.
name|shared
operator|.
name|ClassAssignmentInterface
operator|.
name|StudentInfo
import|;
end_import

begin_import
import|import
name|org
operator|.
name|unitime
operator|.
name|timetable
operator|.
name|gwt
operator|.
name|shared
operator|.
name|EventInterface
operator|.
name|EncodeQueryRpcRequest
import|;
end_import

begin_import
import|import
name|org
operator|.
name|unitime
operator|.
name|timetable
operator|.
name|gwt
operator|.
name|shared
operator|.
name|EventInterface
operator|.
name|EncodeQueryRpcResponse
import|;
end_import

begin_import
import|import
name|org
operator|.
name|unitime
operator|.
name|timetable
operator|.
name|gwt
operator|.
name|shared
operator|.
name|EventInterface
operator|.
name|FilterRpcRequest
import|;
end_import

begin_import
import|import
name|org
operator|.
name|unitime
operator|.
name|timetable
operator|.
name|gwt
operator|.
name|shared
operator|.
name|OnlineSectioningInterface
operator|.
name|SectioningProperties
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|core
operator|.
name|client
operator|.
name|GWT
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|dom
operator|.
name|client
operator|.
name|Style
operator|.
name|FontStyle
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|dom
operator|.
name|client
operator|.
name|Style
operator|.
name|Overflow
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|event
operator|.
name|dom
operator|.
name|client
operator|.
name|ClickEvent
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|event
operator|.
name|dom
operator|.
name|client
operator|.
name|ClickHandler
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|event
operator|.
name|dom
operator|.
name|client
operator|.
name|KeyCodes
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|event
operator|.
name|dom
operator|.
name|client
operator|.
name|KeyUpEvent
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|event
operator|.
name|dom
operator|.
name|client
operator|.
name|KeyUpHandler
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|event
operator|.
name|dom
operator|.
name|client
operator|.
name|MouseOutEvent
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|event
operator|.
name|dom
operator|.
name|client
operator|.
name|MouseOutHandler
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|event
operator|.
name|dom
operator|.
name|client
operator|.
name|MouseOverEvent
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|event
operator|.
name|dom
operator|.
name|client
operator|.
name|MouseOverHandler
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|event
operator|.
name|logical
operator|.
name|shared
operator|.
name|CloseEvent
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|event
operator|.
name|logical
operator|.
name|shared
operator|.
name|CloseHandler
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|event
operator|.
name|logical
operator|.
name|shared
operator|.
name|OpenEvent
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|event
operator|.
name|logical
operator|.
name|shared
operator|.
name|OpenHandler
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|event
operator|.
name|logical
operator|.
name|shared
operator|.
name|SelectionEvent
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|event
operator|.
name|logical
operator|.
name|shared
operator|.
name|SelectionHandler
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|event
operator|.
name|logical
operator|.
name|shared
operator|.
name|ValueChangeEvent
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|event
operator|.
name|logical
operator|.
name|shared
operator|.
name|ValueChangeHandler
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|http
operator|.
name|client
operator|.
name|URL
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|i18n
operator|.
name|client
operator|.
name|DateTimeFormat
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|i18n
operator|.
name|client
operator|.
name|NumberFormat
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|user
operator|.
name|client
operator|.
name|DOM
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|user
operator|.
name|client
operator|.
name|History
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|user
operator|.
name|client
operator|.
name|Window
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|user
operator|.
name|client
operator|.
name|rpc
operator|.
name|AsyncCallback
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|user
operator|.
name|client
operator|.
name|ui
operator|.
name|Button
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|user
operator|.
name|client
operator|.
name|ui
operator|.
name|CheckBox
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|user
operator|.
name|client
operator|.
name|ui
operator|.
name|Composite
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|user
operator|.
name|client
operator|.
name|ui
operator|.
name|FocusPanel
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|user
operator|.
name|client
operator|.
name|ui
operator|.
name|HTML
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|user
operator|.
name|client
operator|.
name|ui
operator|.
name|HasHorizontalAlignment
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|user
operator|.
name|client
operator|.
name|ui
operator|.
name|HasVerticalAlignment
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|user
operator|.
name|client
operator|.
name|ui
operator|.
name|HorizontalPanel
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|user
operator|.
name|client
operator|.
name|ui
operator|.
name|Image
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|user
operator|.
name|client
operator|.
name|ui
operator|.
name|Label
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|user
operator|.
name|client
operator|.
name|ui
operator|.
name|ListBox
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|user
operator|.
name|client
operator|.
name|ui
operator|.
name|PopupPanel
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|user
operator|.
name|client
operator|.
name|ui
operator|.
name|RootPanel
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|user
operator|.
name|client
operator|.
name|ui
operator|.
name|ScrollPanel
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|user
operator|.
name|client
operator|.
name|ui
operator|.
name|TextArea
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|user
operator|.
name|client
operator|.
name|ui
operator|.
name|VerticalPanel
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|user
operator|.
name|client
operator|.
name|ui
operator|.
name|SuggestOracle
operator|.
name|Callback
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|user
operator|.
name|client
operator|.
name|ui
operator|.
name|SuggestOracle
operator|.
name|Request
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|user
operator|.
name|client
operator|.
name|ui
operator|.
name|SuggestOracle
operator|.
name|Response
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|user
operator|.
name|client
operator|.
name|ui
operator|.
name|SuggestOracle
operator|.
name|Suggestion
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gwt
operator|.
name|user
operator|.
name|client
operator|.
name|ui
operator|.
name|Widget
import|;
end_import

begin_comment
comment|/**  * @author Tomas Muller  */
end_comment

begin_class
specifier|public
class|class
name|SectioningStatusPage
extends|extends
name|Composite
block|{
specifier|public
specifier|static
specifier|final
name|StudentSectioningMessages
name|MESSAGES
init|=
name|GWT
operator|.
name|create
argument_list|(
name|StudentSectioningMessages
operator|.
name|class
argument_list|)
decl_stmt|;
specifier|public
specifier|static
specifier|final
name|StudentSectioningResources
name|RESOURCES
init|=
name|GWT
operator|.
name|create
argument_list|(
name|StudentSectioningResources
operator|.
name|class
argument_list|)
decl_stmt|;
specifier|public
specifier|static
specifier|final
name|StudentSectioningConstants
name|CONSTANTS
init|=
name|GWT
operator|.
name|create
argument_list|(
name|StudentSectioningConstants
operator|.
name|class
argument_list|)
decl_stmt|;
specifier|public
specifier|static
specifier|final
name|GwtConstants
name|GWT_CONSTANTS
init|=
name|GWT
operator|.
name|create
argument_list|(
name|GwtConstants
operator|.
name|class
argument_list|)
decl_stmt|;
specifier|private
specifier|static
name|DateTimeFormat
name|sDF
init|=
name|DateTimeFormat
operator|.
name|getFormat
argument_list|(
name|CONSTANTS
operator|.
name|requestDateFormat
argument_list|()
argument_list|)
decl_stmt|;
specifier|private
specifier|static
name|DateTimeFormat
name|sTSF
init|=
name|DateTimeFormat
operator|.
name|getFormat
argument_list|(
name|CONSTANTS
operator|.
name|timeStampFormat
argument_list|()
argument_list|)
decl_stmt|;
specifier|private
specifier|static
name|NumberFormat
name|sNF
init|=
name|NumberFormat
operator|.
name|getFormat
argument_list|(
name|CONSTANTS
operator|.
name|executionTimeFormat
argument_list|()
argument_list|)
decl_stmt|;
specifier|private
specifier|static
specifier|final
name|GwtRpcServiceAsync
name|RPC
init|=
name|GWT
operator|.
name|create
argument_list|(
name|GwtRpcService
operator|.
name|class
argument_list|)
decl_stmt|;
specifier|private
specifier|final
name|SectioningServiceAsync
name|iSectioningService
init|=
name|GWT
operator|.
name|create
argument_list|(
name|SectioningService
operator|.
name|class
argument_list|)
decl_stmt|;
specifier|private
name|SectioningStatusFilterBox
name|iFilter
decl_stmt|;
specifier|private
name|Button
name|iSearch
init|=
literal|null
decl_stmt|;
specifier|private
name|Button
name|iExport
init|=
literal|null
decl_stmt|;
specifier|private
name|Image
name|iLoadingImage
init|=
literal|null
decl_stmt|;
specifier|private
name|VerticalPanel
name|iSectioningPanel
init|=
literal|null
decl_stmt|;
specifier|private
name|VerticalPanel
name|iPanel
init|=
literal|null
decl_stmt|;
specifier|private
name|HorizontalPanel
name|iFilterPanel
init|=
literal|null
decl_stmt|;
specifier|private
name|UniTimeTable
argument_list|<
name|EnrollmentInfo
argument_list|>
name|iCourseTable
init|=
literal|null
decl_stmt|;
specifier|private
name|UniTimeTable
argument_list|<
name|StudentInfo
argument_list|>
name|iStudentTable
init|=
literal|null
decl_stmt|;
specifier|private
name|UniTimeTable
argument_list|<
name|SectioningAction
argument_list|>
name|iLogTable
init|=
literal|null
decl_stmt|;
specifier|private
name|UniTimeDialogBox
name|iEnrollmentDialog
init|=
literal|null
decl_stmt|;
specifier|private
name|EnrollmentTable
name|iEnrollmentTable
init|=
literal|null
decl_stmt|;
specifier|private
name|ScrollPanel
name|iEnrollmentScroll
init|=
literal|null
decl_stmt|;
specifier|private
name|UniTimeTabPanel
name|iTabPanel
init|=
literal|null
decl_stmt|;
specifier|private
name|int
name|iTabIndex
init|=
literal|0
decl_stmt|;
specifier|private
name|FocusPanel
name|iTabPanelWithFocus
init|=
literal|null
decl_stmt|;
specifier|private
name|SectioningProperties
name|iProperties
init|=
literal|null
decl_stmt|;
specifier|private
name|HTML
name|iError
init|=
literal|null
decl_stmt|,
name|iCourseTableHint
decl_stmt|,
name|iStudentTableHint
decl_stmt|;
specifier|private
name|String
name|iLastFilterOnEnter
init|=
literal|null
decl_stmt|,
name|iCourseFilter
init|=
literal|null
decl_stmt|;
specifier|private
name|SectioningStatusFilterRpcRequest
name|iCourseFilterRequest
init|=
literal|null
decl_stmt|;
specifier|private
name|Map
argument_list|<
name|String
argument_list|,
name|String
argument_list|>
name|iStates
init|=
literal|null
decl_stmt|;
specifier|private
name|int
name|iStatusColumn
init|=
literal|0
decl_stmt|,
name|iNoteColumn
init|=
literal|0
decl_stmt|;
specifier|private
name|UniTimeTextBox
name|iSubject
decl_stmt|,
name|iCC
decl_stmt|;
specifier|private
name|UniTimeWidget
argument_list|<
name|ListBox
argument_list|>
name|iStatus
decl_stmt|;
specifier|private
name|TextArea
name|iMessage
decl_stmt|,
name|iNote
decl_stmt|;
specifier|private
name|Set
argument_list|<
name|Long
argument_list|>
name|iSelectedStudentIds
init|=
operator|new
name|HashSet
argument_list|<
name|Long
argument_list|>
argument_list|()
decl_stmt|;
specifier|private
name|Set
argument_list|<
name|Long
argument_list|>
name|iSelectedCourseIds
init|=
operator|new
name|HashSet
argument_list|<
name|Long
argument_list|>
argument_list|()
decl_stmt|;
specifier|private
name|boolean
name|iOnline
decl_stmt|;
specifier|public
name|SectioningStatusPage
parameter_list|(
name|boolean
name|online
parameter_list|)
block|{
name|iOnline
operator|=
name|online
expr_stmt|;
name|iPanel
operator|=
operator|new
name|VerticalPanel
argument_list|()
expr_stmt|;
name|iSectioningPanel
operator|=
operator|new
name|VerticalPanel
argument_list|()
expr_stmt|;
name|iFilterPanel
operator|=
operator|new
name|HorizontalPanel
argument_list|()
expr_stmt|;
name|iFilterPanel
operator|.
name|setSpacing
argument_list|(
literal|3
argument_list|)
expr_stmt|;
name|Label
name|filterLabel
init|=
operator|new
name|Label
argument_list|(
name|MESSAGES
operator|.
name|filter
argument_list|()
argument_list|)
decl_stmt|;
name|iFilterPanel
operator|.
name|add
argument_list|(
name|filterLabel
argument_list|)
expr_stmt|;
name|iFilterPanel
operator|.
name|setCellVerticalAlignment
argument_list|(
name|filterLabel
argument_list|,
name|HasVerticalAlignment
operator|.
name|ALIGN_MIDDLE
argument_list|)
expr_stmt|;
name|iFilter
operator|=
operator|new
name|SectioningStatusFilterBox
argument_list|(
name|online
argument_list|)
expr_stmt|;
name|iFilterPanel
operator|.
name|add
argument_list|(
name|iFilter
argument_list|)
expr_stmt|;
name|iSearch
operator|=
operator|new
name|Button
argument_list|(
name|MESSAGES
operator|.
name|buttonSearch
argument_list|()
argument_list|)
expr_stmt|;
name|Character
name|searchAccessKey
init|=
name|UniTimeHeaderPanel
operator|.
name|guessAccessKey
argument_list|(
name|MESSAGES
operator|.
name|buttonSearch
argument_list|()
argument_list|)
decl_stmt|;
if|if
condition|(
name|searchAccessKey
operator|!=
literal|null
condition|)
name|iSearch
operator|.
name|setAccessKey
argument_list|(
name|searchAccessKey
argument_list|)
expr_stmt|;
name|iSearch
operator|.
name|addStyleName
argument_list|(
literal|"unitime-NoPrint"
argument_list|)
expr_stmt|;
name|iFilterPanel
operator|.
name|add
argument_list|(
name|iSearch
argument_list|)
expr_stmt|;
name|iFilterPanel
operator|.
name|setCellVerticalAlignment
argument_list|(
name|iSearch
argument_list|,
name|HasVerticalAlignment
operator|.
name|ALIGN_TOP
argument_list|)
expr_stmt|;
name|iExport
operator|=
operator|new
name|Button
argument_list|(
name|MESSAGES
operator|.
name|buttonExport
argument_list|()
argument_list|)
expr_stmt|;
name|Character
name|exportAccessKey
init|=
name|UniTimeHeaderPanel
operator|.
name|guessAccessKey
argument_list|(
name|MESSAGES
operator|.
name|buttonExport
argument_list|()
argument_list|)
decl_stmt|;
if|if
condition|(
name|exportAccessKey
operator|!=
literal|null
condition|)
name|iExport
operator|.
name|setAccessKey
argument_list|(
name|exportAccessKey
argument_list|)
expr_stmt|;
name|iExport
operator|.
name|addStyleName
argument_list|(
literal|"unitime-NoPrint"
argument_list|)
expr_stmt|;
name|iFilterPanel
operator|.
name|add
argument_list|(
name|iExport
argument_list|)
expr_stmt|;
name|iFilterPanel
operator|.
name|setCellVerticalAlignment
argument_list|(
name|iExport
argument_list|,
name|HasVerticalAlignment
operator|.
name|ALIGN_TOP
argument_list|)
expr_stmt|;
name|iLoadingImage
operator|=
operator|new
name|Image
argument_list|(
name|RESOURCES
operator|.
name|loading_small
argument_list|()
argument_list|)
expr_stmt|;
name|iLoadingImage
operator|.
name|setVisible
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|iFilterPanel
operator|.
name|add
argument_list|(
name|iLoadingImage
argument_list|)
expr_stmt|;
name|iFilterPanel
operator|.
name|setCellVerticalAlignment
argument_list|(
name|iLoadingImage
argument_list|,
name|HasVerticalAlignment
operator|.
name|ALIGN_MIDDLE
argument_list|)
expr_stmt|;
name|iSectioningPanel
operator|.
name|add
argument_list|(
name|iFilterPanel
argument_list|)
expr_stmt|;
name|iSectioningPanel
operator|.
name|setCellHorizontalAlignment
argument_list|(
name|iFilterPanel
argument_list|,
name|HasHorizontalAlignment
operator|.
name|ALIGN_CENTER
argument_list|)
expr_stmt|;
name|iCourseTable
operator|=
operator|new
name|UniTimeTable
argument_list|<
name|EnrollmentInfo
argument_list|>
argument_list|()
expr_stmt|;
name|iStudentTable
operator|=
operator|new
name|UniTimeTable
argument_list|<
name|StudentInfo
argument_list|>
argument_list|()
expr_stmt|;
name|iStudentTable
operator|.
name|addStyleName
argument_list|(
literal|"unitime-StudentsTable"
argument_list|)
expr_stmt|;
name|iLogTable
operator|=
operator|new
name|UniTimeTable
argument_list|<
name|SectioningAction
argument_list|>
argument_list|()
expr_stmt|;
name|VerticalPanel
name|courseTableWithHint
init|=
operator|new
name|VerticalPanel
argument_list|()
decl_stmt|;
name|courseTableWithHint
operator|.
name|add
argument_list|(
name|iCourseTable
argument_list|)
expr_stmt|;
name|iCourseTableHint
operator|=
operator|new
name|HTML
argument_list|(
name|MESSAGES
operator|.
name|sectioningStatusReservationHint
argument_list|()
argument_list|)
expr_stmt|;
name|iCourseTableHint
operator|.
name|setStyleName
argument_list|(
literal|"unitime-Hint"
argument_list|)
expr_stmt|;
name|courseTableWithHint
operator|.
name|add
argument_list|(
name|iCourseTableHint
argument_list|)
expr_stmt|;
name|courseTableWithHint
operator|.
name|setCellHorizontalAlignment
argument_list|(
name|iCourseTableHint
argument_list|,
name|HasHorizontalAlignment
operator|.
name|ALIGN_RIGHT
argument_list|)
expr_stmt|;
name|VerticalPanel
name|studentTableWithHint
init|=
operator|new
name|VerticalPanel
argument_list|()
decl_stmt|;
name|studentTableWithHint
operator|.
name|add
argument_list|(
name|iStudentTable
argument_list|)
expr_stmt|;
name|iStudentTableHint
operator|=
operator|new
name|HTML
argument_list|(
name|MESSAGES
operator|.
name|sectioningStatusPriorityHint
argument_list|()
argument_list|)
expr_stmt|;
name|iStudentTableHint
operator|.
name|setStyleName
argument_list|(
literal|"unitime-Hint"
argument_list|)
expr_stmt|;
name|studentTableWithHint
operator|.
name|add
argument_list|(
name|iStudentTableHint
argument_list|)
expr_stmt|;
name|studentTableWithHint
operator|.
name|setCellHorizontalAlignment
argument_list|(
name|iStudentTableHint
argument_list|,
name|HasHorizontalAlignment
operator|.
name|ALIGN_RIGHT
argument_list|)
expr_stmt|;
name|iTabPanel
operator|=
operator|new
name|UniTimeTabPanel
argument_list|()
expr_stmt|;
name|iTabPanel
operator|.
name|add
argument_list|(
name|courseTableWithHint
argument_list|,
name|MESSAGES
operator|.
name|tabEnrollments
argument_list|()
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|iTabPanel
operator|.
name|selectTab
argument_list|(
literal|0
argument_list|)
expr_stmt|;
name|iTabPanel
operator|.
name|add
argument_list|(
name|studentTableWithHint
argument_list|,
name|MESSAGES
operator|.
name|tabStudents
argument_list|()
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|iTabPanel
operator|.
name|setVisible
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|iTabPanel
operator|.
name|addSelectionHandler
argument_list|(
operator|new
name|SelectionHandler
argument_list|<
name|Integer
argument_list|>
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|void
name|onSelection
parameter_list|(
name|SelectionEvent
argument_list|<
name|Integer
argument_list|>
name|event
parameter_list|)
block|{
name|iTabIndex
operator|=
name|event
operator|.
name|getSelectedItem
argument_list|()
expr_stmt|;
name|loadDataIfNeeded
argument_list|()
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
name|iTabPanelWithFocus
operator|=
operator|new
name|FocusPanel
argument_list|(
name|iTabPanel
argument_list|)
expr_stmt|;
name|iTabPanelWithFocus
operator|.
name|setStyleName
argument_list|(
literal|"unitime-FocusPanel"
argument_list|)
expr_stmt|;
name|iSectioningPanel
operator|.
name|add
argument_list|(
name|iTabPanelWithFocus
argument_list|)
expr_stmt|;
name|iTabPanelWithFocus
operator|.
name|addKeyUpHandler
argument_list|(
operator|new
name|KeyUpHandler
argument_list|()
block|{
specifier|public
name|void
name|onKeyUp
parameter_list|(
name|KeyUpEvent
name|event
parameter_list|)
block|{
if|if
condition|(
name|event
operator|.
name|getNativeEvent
argument_list|()
operator|.
name|getCtrlKey
argument_list|()
operator|&&
operator|(
name|event
operator|.
name|getNativeKeyCode
argument_list|()
operator|==
literal|'e'
operator|||
name|event
operator|.
name|getNativeKeyCode
argument_list|()
operator|==
literal|'E'
operator|)
condition|)
block|{
name|iTabPanel
operator|.
name|selectTab
argument_list|(
literal|0
argument_list|)
expr_stmt|;
name|event
operator|.
name|preventDefault
argument_list|()
expr_stmt|;
block|}
if|if
condition|(
name|event
operator|.
name|getNativeEvent
argument_list|()
operator|.
name|getCtrlKey
argument_list|()
operator|&&
operator|(
name|event
operator|.
name|getNativeKeyCode
argument_list|()
operator|==
literal|'s'
operator|||
name|event
operator|.
name|getNativeKeyCode
argument_list|()
operator|==
literal|'S'
operator|)
condition|)
block|{
name|iTabPanel
operator|.
name|selectTab
argument_list|(
literal|1
argument_list|)
expr_stmt|;
name|event
operator|.
name|preventDefault
argument_list|()
expr_stmt|;
block|}
if|if
condition|(
name|event
operator|.
name|getNativeEvent
argument_list|()
operator|.
name|getCtrlKey
argument_list|()
operator|&&
operator|(
name|event
operator|.
name|getNativeKeyCode
argument_list|()
operator|==
literal|'l'
operator|||
name|event
operator|.
name|getNativeKeyCode
argument_list|()
operator|==
literal|'L'
operator|)
condition|)
block|{
if|if
condition|(
name|iTabPanel
operator|.
name|getTabCount
argument_list|()
operator|>=
literal|3
condition|)
block|{
name|iTabPanel
operator|.
name|selectTab
argument_list|(
literal|2
argument_list|)
expr_stmt|;
name|event
operator|.
name|preventDefault
argument_list|()
expr_stmt|;
block|}
block|}
block|}
block|}
argument_list|)
expr_stmt|;
name|iSectioningPanel
operator|.
name|setWidth
argument_list|(
literal|"100%"
argument_list|)
expr_stmt|;
name|iPanel
operator|.
name|add
argument_list|(
name|iSectioningPanel
argument_list|)
expr_stmt|;
name|iError
operator|=
operator|new
name|HTML
argument_list|()
expr_stmt|;
name|iError
operator|.
name|setStyleName
argument_list|(
literal|"unitime-ErrorMessage"
argument_list|)
expr_stmt|;
name|iError
operator|.
name|setVisible
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|iPanel
operator|.
name|add
argument_list|(
name|iError
argument_list|)
expr_stmt|;
name|iPanel
operator|.
name|setCellHorizontalAlignment
argument_list|(
name|iError
argument_list|,
name|HasHorizontalAlignment
operator|.
name|ALIGN_CENTER
argument_list|)
expr_stmt|;
name|initWidget
argument_list|(
name|iPanel
argument_list|)
expr_stmt|;
name|iSearch
operator|.
name|addClickHandler
argument_list|(
operator|new
name|ClickHandler
argument_list|()
block|{
specifier|public
name|void
name|onClick
parameter_list|(
name|ClickEvent
name|event
parameter_list|)
block|{
name|loadData
argument_list|()
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
name|iExport
operator|.
name|addClickHandler
argument_list|(
operator|new
name|ClickHandler
argument_list|()
block|{
specifier|public
name|void
name|onClick
parameter_list|(
name|ClickEvent
name|event
parameter_list|)
block|{
name|exportData
argument_list|()
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
name|iFilter
operator|.
name|addKeyUpHandler
argument_list|(
operator|new
name|KeyUpHandler
argument_list|()
block|{
specifier|public
name|void
name|onKeyUp
parameter_list|(
name|KeyUpEvent
name|event
parameter_list|)
block|{
if|if
condition|(
name|event
operator|.
name|getNativeKeyCode
argument_list|()
operator|==
name|KeyCodes
operator|.
name|KEY_ENTER
condition|)
block|{
if|if
condition|(
name|iFilter
operator|.
name|getValue
argument_list|()
operator|.
name|equals
argument_list|(
name|iLastFilterOnEnter
argument_list|)
operator|&&
operator|!
name|iFilter
operator|.
name|getValue
argument_list|()
operator|.
name|equals
argument_list|(
name|iCourseFilter
argument_list|)
condition|)
name|loadData
argument_list|()
expr_stmt|;
else|else
name|iLastFilterOnEnter
operator|=
name|iFilter
operator|.
name|getValue
argument_list|()
expr_stmt|;
block|}
block|}
block|}
argument_list|)
expr_stmt|;
name|iCourseTable
operator|.
name|addMouseClickListener
argument_list|(
operator|new
name|MouseClickListener
argument_list|<
name|ClassAssignmentInterface
operator|.
name|EnrollmentInfo
argument_list|>
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|void
name|onMouseClick
parameter_list|(
specifier|final
name|TableEvent
argument_list|<
name|EnrollmentInfo
argument_list|>
name|event
parameter_list|)
block|{
if|if
condition|(
name|event
operator|.
name|getData
argument_list|()
operator|==
literal|null
operator|||
name|event
operator|.
name|getData
argument_list|()
operator|.
name|getCourseId
argument_list|()
operator|==
literal|null
condition|)
return|return;
comment|// header or footer
name|iCourseTable
operator|.
name|clearHover
argument_list|()
expr_stmt|;
name|setLoading
argument_list|(
literal|true
argument_list|)
expr_stmt|;
specifier|final
name|Long
name|id
init|=
operator|(
name|event
operator|.
name|getData
argument_list|()
operator|.
name|getConfigId
argument_list|()
operator|==
literal|null
condition|?
name|event
operator|.
name|getData
argument_list|()
operator|.
name|getOfferingId
argument_list|()
else|:
operator|-
name|event
operator|.
name|getData
argument_list|()
operator|.
name|getClazzId
argument_list|()
operator|)
decl_stmt|;
name|iError
operator|.
name|setVisible
argument_list|(
literal|false
argument_list|)
expr_stmt|;
if|if
condition|(
name|event
operator|.
name|getData
argument_list|()
operator|.
name|getConfigId
argument_list|()
operator|==
literal|null
condition|)
name|LoadingWidget
operator|.
name|getInstance
argument_list|()
operator|.
name|show
argument_list|(
name|MESSAGES
operator|.
name|loadingEnrollments
argument_list|(
name|MESSAGES
operator|.
name|course
argument_list|(
name|event
operator|.
name|getData
argument_list|()
operator|.
name|getSubject
argument_list|()
argument_list|,
name|event
operator|.
name|getData
argument_list|()
operator|.
name|getCourseNbr
argument_list|()
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
else|else
name|LoadingWidget
operator|.
name|getInstance
argument_list|()
operator|.
name|show
argument_list|(
name|MESSAGES
operator|.
name|loadingEnrollments
argument_list|(
name|MESSAGES
operator|.
name|clazz
argument_list|(
name|event
operator|.
name|getData
argument_list|()
operator|.
name|getSubject
argument_list|()
argument_list|,
name|event
operator|.
name|getData
argument_list|()
operator|.
name|getCourseNbr
argument_list|()
argument_list|,
name|event
operator|.
name|getData
argument_list|()
operator|.
name|getSubpart
argument_list|()
argument_list|,
name|event
operator|.
name|getData
argument_list|()
operator|.
name|getClazz
argument_list|()
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|iOnline
condition|)
block|{
name|iSectioningService
operator|.
name|canApprove
argument_list|(
name|id
argument_list|,
operator|new
name|AsyncCallback
argument_list|<
name|List
argument_list|<
name|Long
argument_list|>
argument_list|>
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|void
name|onSuccess
parameter_list|(
specifier|final
name|List
argument_list|<
name|Long
argument_list|>
name|courseIdsCanApprove
parameter_list|)
block|{
name|iSectioningService
operator|.
name|findEnrollments
argument_list|(
name|iOnline
argument_list|,
name|iCourseFilter
argument_list|,
name|iCourseFilterRequest
argument_list|,
name|event
operator|.
name|getData
argument_list|()
operator|.
name|getCourseId
argument_list|()
argument_list|,
name|event
operator|.
name|getData
argument_list|()
operator|.
name|getClazzId
argument_list|()
argument_list|,
operator|new
name|AsyncCallback
argument_list|<
name|List
argument_list|<
name|Enrollment
argument_list|>
argument_list|>
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|void
name|onFailure
parameter_list|(
name|Throwable
name|caught
parameter_list|)
block|{
name|LoadingWidget
operator|.
name|getInstance
argument_list|()
operator|.
name|hide
argument_list|()
expr_stmt|;
name|UniTimeNotifications
operator|.
name|error
argument_list|(
name|caught
argument_list|)
expr_stmt|;
name|setLoading
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|iError
operator|.
name|setHTML
argument_list|(
name|caught
operator|.
name|getMessage
argument_list|()
argument_list|)
expr_stmt|;
name|iError
operator|.
name|setVisible
argument_list|(
literal|true
argument_list|)
expr_stmt|;
name|ToolBox
operator|.
name|checkAccess
argument_list|(
name|caught
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Override
specifier|public
name|void
name|onSuccess
parameter_list|(
name|List
argument_list|<
name|Enrollment
argument_list|>
name|result
parameter_list|)
block|{
name|LoadingWidget
operator|.
name|getInstance
argument_list|()
operator|.
name|hide
argument_list|()
expr_stmt|;
name|setLoading
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|iEnrollmentTable
operator|.
name|clear
argument_list|()
expr_stmt|;
name|iEnrollmentTable
operator|.
name|setId
argument_list|(
name|id
argument_list|)
expr_stmt|;
name|iEnrollmentTable
operator|.
name|populate
argument_list|(
name|result
argument_list|,
name|courseIdsCanApprove
argument_list|)
expr_stmt|;
if|if
condition|(
name|event
operator|.
name|getData
argument_list|()
operator|.
name|getConfigId
argument_list|()
operator|==
literal|null
condition|)
name|iEnrollmentDialog
operator|.
name|setText
argument_list|(
name|MESSAGES
operator|.
name|titleEnrollments
argument_list|(
name|MESSAGES
operator|.
name|course
argument_list|(
name|event
operator|.
name|getData
argument_list|()
operator|.
name|getSubject
argument_list|()
argument_list|,
name|event
operator|.
name|getData
argument_list|()
operator|.
name|getCourseNbr
argument_list|()
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
else|else
name|iEnrollmentDialog
operator|.
name|setText
argument_list|(
name|MESSAGES
operator|.
name|titleEnrollments
argument_list|(
name|MESSAGES
operator|.
name|clazz
argument_list|(
name|event
operator|.
name|getData
argument_list|()
operator|.
name|getSubject
argument_list|()
argument_list|,
name|event
operator|.
name|getData
argument_list|()
operator|.
name|getCourseNbr
argument_list|()
argument_list|,
name|event
operator|.
name|getData
argument_list|()
operator|.
name|getSubpart
argument_list|()
argument_list|,
name|event
operator|.
name|getData
argument_list|()
operator|.
name|getClazz
argument_list|()
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|iEnrollmentDialog
operator|.
name|center
argument_list|()
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Override
specifier|public
name|void
name|onFailure
parameter_list|(
name|Throwable
name|caught
parameter_list|)
block|{
name|LoadingWidget
operator|.
name|getInstance
argument_list|()
operator|.
name|hide
argument_list|()
expr_stmt|;
name|UniTimeNotifications
operator|.
name|error
argument_list|(
name|caught
argument_list|)
expr_stmt|;
name|setLoading
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|iError
operator|.
name|setHTML
argument_list|(
name|caught
operator|.
name|getMessage
argument_list|()
argument_list|)
expr_stmt|;
name|iError
operator|.
name|setVisible
argument_list|(
literal|true
argument_list|)
expr_stmt|;
name|ToolBox
operator|.
name|checkAccess
argument_list|(
name|caught
argument_list|)
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|iSectioningService
operator|.
name|findEnrollments
argument_list|(
name|iOnline
argument_list|,
name|iCourseFilter
argument_list|,
name|iCourseFilterRequest
argument_list|,
name|event
operator|.
name|getData
argument_list|()
operator|.
name|getCourseId
argument_list|()
argument_list|,
name|event
operator|.
name|getData
argument_list|()
operator|.
name|getClazzId
argument_list|()
argument_list|,
operator|new
name|AsyncCallback
argument_list|<
name|List
argument_list|<
name|Enrollment
argument_list|>
argument_list|>
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|void
name|onFailure
parameter_list|(
name|Throwable
name|caught
parameter_list|)
block|{
name|LoadingWidget
operator|.
name|getInstance
argument_list|()
operator|.
name|hide
argument_list|()
expr_stmt|;
name|UniTimeNotifications
operator|.
name|error
argument_list|(
name|caught
argument_list|)
expr_stmt|;
name|setLoading
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|iError
operator|.
name|setHTML
argument_list|(
name|caught
operator|.
name|getMessage
argument_list|()
argument_list|)
expr_stmt|;
name|iError
operator|.
name|setVisible
argument_list|(
literal|true
argument_list|)
expr_stmt|;
name|ToolBox
operator|.
name|checkAccess
argument_list|(
name|caught
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Override
specifier|public
name|void
name|onSuccess
parameter_list|(
name|List
argument_list|<
name|Enrollment
argument_list|>
name|result
parameter_list|)
block|{
name|LoadingWidget
operator|.
name|getInstance
argument_list|()
operator|.
name|hide
argument_list|()
expr_stmt|;
name|setLoading
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|iEnrollmentTable
operator|.
name|clear
argument_list|()
expr_stmt|;
name|iEnrollmentTable
operator|.
name|setId
argument_list|(
name|id
argument_list|)
expr_stmt|;
name|iEnrollmentTable
operator|.
name|populate
argument_list|(
name|result
argument_list|,
literal|null
argument_list|)
expr_stmt|;
if|if
condition|(
name|event
operator|.
name|getData
argument_list|()
operator|.
name|getConfigId
argument_list|()
operator|==
literal|null
condition|)
name|iEnrollmentDialog
operator|.
name|setText
argument_list|(
name|MESSAGES
operator|.
name|titleEnrollments
argument_list|(
name|MESSAGES
operator|.
name|course
argument_list|(
name|event
operator|.
name|getData
argument_list|()
operator|.
name|getSubject
argument_list|()
argument_list|,
name|event
operator|.
name|getData
argument_list|()
operator|.
name|getCourseNbr
argument_list|()
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
else|else
name|iEnrollmentDialog
operator|.
name|setText
argument_list|(
name|MESSAGES
operator|.
name|titleEnrollments
argument_list|(
name|MESSAGES
operator|.
name|clazz
argument_list|(
name|event
operator|.
name|getData
argument_list|()
operator|.
name|getSubject
argument_list|()
argument_list|,
name|event
operator|.
name|getData
argument_list|()
operator|.
name|getCourseNbr
argument_list|()
argument_list|,
name|event
operator|.
name|getData
argument_list|()
operator|.
name|getSubpart
argument_list|()
argument_list|,
name|event
operator|.
name|getData
argument_list|()
operator|.
name|getClazz
argument_list|()
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|iEnrollmentDialog
operator|.
name|center
argument_list|()
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
block|}
block|}
block|}
argument_list|)
expr_stmt|;
name|iStudentTable
operator|.
name|addMouseClickListener
argument_list|(
operator|new
name|MouseClickListener
argument_list|<
name|StudentInfo
argument_list|>
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|void
name|onMouseClick
parameter_list|(
specifier|final
name|TableEvent
argument_list|<
name|StudentInfo
argument_list|>
name|event
parameter_list|)
block|{
if|if
condition|(
name|event
operator|.
name|getData
argument_list|()
operator|==
literal|null
operator|||
name|event
operator|.
name|getData
argument_list|()
operator|.
name|getStudent
argument_list|()
operator|==
literal|null
condition|)
return|return;
comment|// header or footer
name|iStudentTable
operator|.
name|clearHover
argument_list|()
expr_stmt|;
name|LoadingWidget
operator|.
name|getInstance
argument_list|()
operator|.
name|show
argument_list|(
name|MESSAGES
operator|.
name|loadingEnrollment
argument_list|(
name|event
operator|.
name|getData
argument_list|()
operator|.
name|getStudent
argument_list|()
operator|.
name|getName
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
name|iError
operator|.
name|setVisible
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|iEnrollmentTable
operator|.
name|showStudentSchedule
argument_list|(
name|event
operator|.
name|getData
argument_list|()
operator|.
name|getStudent
argument_list|()
argument_list|,
operator|new
name|AsyncCallback
argument_list|<
name|Boolean
argument_list|>
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|void
name|onFailure
parameter_list|(
name|Throwable
name|caught
parameter_list|)
block|{
name|LoadingWidget
operator|.
name|getInstance
argument_list|()
operator|.
name|hide
argument_list|()
expr_stmt|;
name|iError
operator|.
name|setHTML
argument_list|(
name|caught
operator|.
name|getMessage
argument_list|()
argument_list|)
expr_stmt|;
name|iError
operator|.
name|setVisible
argument_list|(
literal|true
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Override
specifier|public
name|void
name|onSuccess
parameter_list|(
name|Boolean
name|result
parameter_list|)
block|{
name|LoadingWidget
operator|.
name|getInstance
argument_list|()
operator|.
name|hide
argument_list|()
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
name|iLogTable
operator|.
name|addMouseClickListener
argument_list|(
operator|new
name|MouseClickListener
argument_list|<
name|ClassAssignmentInterface
operator|.
name|SectioningAction
argument_list|>
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|void
name|onMouseClick
parameter_list|(
name|TableEvent
argument_list|<
name|SectioningAction
argument_list|>
name|event
parameter_list|)
block|{
if|if
condition|(
name|event
operator|.
name|getData
argument_list|()
operator|!=
literal|null
operator|&&
name|event
operator|.
name|getData
argument_list|()
operator|.
name|getProto
argument_list|()
operator|!=
literal|null
condition|)
block|{
specifier|final
name|HTML
name|widget
init|=
operator|new
name|HTML
argument_list|(
name|event
operator|.
name|getData
argument_list|()
operator|.
name|getProto
argument_list|()
argument_list|)
decl_stmt|;
specifier|final
name|ScrollPanel
name|scroll
init|=
operator|new
name|ScrollPanel
argument_list|(
name|widget
argument_list|)
decl_stmt|;
name|scroll
operator|.
name|setHeight
argument_list|(
operator|(
operator|(
name|int
operator|)
operator|(
literal|0.8
operator|*
name|Window
operator|.
name|getClientHeight
argument_list|()
operator|)
operator|)
operator|+
literal|"px"
argument_list|)
expr_stmt|;
name|scroll
operator|.
name|setStyleName
argument_list|(
literal|"unitime-ScrollPanel"
argument_list|)
expr_stmt|;
specifier|final
name|UniTimeDialogBox
name|dialog
init|=
operator|new
name|UniTimeDialogBox
argument_list|(
literal|true
argument_list|,
literal|false
argument_list|)
decl_stmt|;
name|dialog
operator|.
name|setWidget
argument_list|(
name|scroll
argument_list|)
expr_stmt|;
name|dialog
operator|.
name|setText
argument_list|(
name|MESSAGES
operator|.
name|dialogChangeMessage
argument_list|(
name|event
operator|.
name|getData
argument_list|()
operator|.
name|getStudent
argument_list|()
operator|.
name|getName
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
name|dialog
operator|.
name|setEscapeToHide
argument_list|(
literal|true
argument_list|)
expr_stmt|;
name|dialog
operator|.
name|addOpenHandler
argument_list|(
operator|new
name|OpenHandler
argument_list|<
name|UniTimeDialogBox
argument_list|>
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|void
name|onOpen
parameter_list|(
name|OpenEvent
argument_list|<
name|UniTimeDialogBox
argument_list|>
name|event
parameter_list|)
block|{
name|RootPanel
operator|.
name|getBodyElement
argument_list|()
operator|.
name|getStyle
argument_list|()
operator|.
name|setOverflow
argument_list|(
name|Overflow
operator|.
name|HIDDEN
argument_list|)
expr_stmt|;
name|scroll
operator|.
name|setHeight
argument_list|(
name|Math
operator|.
name|min
argument_list|(
name|widget
operator|.
name|getElement
argument_list|()
operator|.
name|getScrollHeight
argument_list|()
argument_list|,
name|Window
operator|.
name|getClientHeight
argument_list|()
operator|*
literal|80
operator|/
literal|100
argument_list|)
operator|+
literal|"px"
argument_list|)
expr_stmt|;
name|dialog
operator|.
name|setPopupPosition
argument_list|(
name|Math
operator|.
name|max
argument_list|(
name|Window
operator|.
name|getScrollLeft
argument_list|()
operator|+
operator|(
name|Window
operator|.
name|getClientWidth
argument_list|()
operator|-
name|dialog
operator|.
name|getOffsetWidth
argument_list|()
operator|)
operator|/
literal|2
argument_list|,
literal|0
argument_list|)
argument_list|,
name|Math
operator|.
name|max
argument_list|(
name|Window
operator|.
name|getScrollTop
argument_list|()
operator|+
operator|(
name|Window
operator|.
name|getClientHeight
argument_list|()
operator|-
name|dialog
operator|.
name|getOffsetHeight
argument_list|()
operator|)
operator|/
literal|2
argument_list|,
literal|0
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
name|dialog
operator|.
name|addCloseHandler
argument_list|(
operator|new
name|CloseHandler
argument_list|<
name|PopupPanel
argument_list|>
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|void
name|onClose
parameter_list|(
name|CloseEvent
argument_list|<
name|PopupPanel
argument_list|>
name|event
parameter_list|)
block|{
name|iLogTable
operator|.
name|clearHover
argument_list|()
expr_stmt|;
name|RootPanel
operator|.
name|getBodyElement
argument_list|()
operator|.
name|getStyle
argument_list|()
operator|.
name|setOverflow
argument_list|(
name|Overflow
operator|.
name|AUTO
argument_list|)
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
name|dialog
operator|.
name|center
argument_list|()
expr_stmt|;
block|}
block|}
block|}
argument_list|)
expr_stmt|;
name|History
operator|.
name|addValueChangeHandler
argument_list|(
operator|new
name|ValueChangeHandler
argument_list|<
name|String
argument_list|>
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|void
name|onValueChange
parameter_list|(
name|ValueChangeEvent
argument_list|<
name|String
argument_list|>
name|event
parameter_list|)
block|{
name|iCourseTable
operator|.
name|clearTable
argument_list|()
expr_stmt|;
name|iStudentTable
operator|.
name|clearTable
argument_list|()
expr_stmt|;
name|iLogTable
operator|.
name|clearTable
argument_list|()
expr_stmt|;
if|if
condition|(
name|event
operator|.
name|getValue
argument_list|()
operator|.
name|endsWith
argument_list|(
literal|"@"
argument_list|)
condition|)
block|{
name|iFilter
operator|.
name|setValue
argument_list|(
name|event
operator|.
name|getValue
argument_list|()
operator|.
name|substring
argument_list|(
literal|0
argument_list|,
name|event
operator|.
name|getValue
argument_list|()
operator|.
name|length
argument_list|()
operator|-
literal|1
argument_list|)
argument_list|)
expr_stmt|;
name|iTabPanel
operator|.
name|selectTab
argument_list|(
literal|1
argument_list|)
expr_stmt|;
block|}
if|else if
condition|(
name|event
operator|.
name|getValue
argument_list|()
operator|.
name|endsWith
argument_list|(
literal|"$"
argument_list|)
condition|)
block|{
name|iFilter
operator|.
name|setValue
argument_list|(
name|event
operator|.
name|getValue
argument_list|()
operator|.
name|substring
argument_list|(
literal|0
argument_list|,
name|event
operator|.
name|getValue
argument_list|()
operator|.
name|length
argument_list|()
operator|-
literal|1
argument_list|)
argument_list|)
expr_stmt|;
name|iTabPanel
operator|.
name|selectTab
argument_list|(
literal|2
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|iFilter
operator|.
name|setValue
argument_list|(
name|event
operator|.
name|getValue
argument_list|()
argument_list|)
expr_stmt|;
if|if
condition|(
name|iTabIndex
operator|!=
literal|0
condition|)
name|iTabPanel
operator|.
name|selectTab
argument_list|(
literal|0
argument_list|)
expr_stmt|;
else|else
name|loadData
argument_list|()
expr_stmt|;
block|}
block|}
block|}
argument_list|)
expr_stmt|;
name|iEnrollmentTable
operator|=
operator|new
name|EnrollmentTable
argument_list|(
literal|false
argument_list|,
name|iOnline
argument_list|)
expr_stmt|;
name|iEnrollmentScroll
operator|=
operator|new
name|ScrollPanel
argument_list|(
name|iEnrollmentTable
argument_list|)
expr_stmt|;
name|iEnrollmentScroll
operator|.
name|setHeight
argument_list|(
operator|(
operator|(
name|int
operator|)
operator|(
literal|0.8
operator|*
name|Window
operator|.
name|getClientHeight
argument_list|()
operator|)
operator|)
operator|+
literal|"px"
argument_list|)
expr_stmt|;
name|iEnrollmentScroll
operator|.
name|setStyleName
argument_list|(
literal|"unitime-ScrollPanel"
argument_list|)
expr_stmt|;
name|iEnrollmentDialog
operator|=
operator|new
name|UniTimeDialogBox
argument_list|(
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|iEnrollmentDialog
operator|.
name|setEscapeToHide
argument_list|(
literal|true
argument_list|)
expr_stmt|;
name|iEnrollmentDialog
operator|.
name|setWidget
argument_list|(
name|iEnrollmentScroll
argument_list|)
expr_stmt|;
name|iEnrollmentDialog
operator|.
name|addOpenHandler
argument_list|(
operator|new
name|OpenHandler
argument_list|<
name|UniTimeDialogBox
argument_list|>
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|void
name|onOpen
parameter_list|(
name|OpenEvent
argument_list|<
name|UniTimeDialogBox
argument_list|>
name|event
parameter_list|)
block|{
name|RootPanel
operator|.
name|getBodyElement
argument_list|()
operator|.
name|getStyle
argument_list|()
operator|.
name|setOverflow
argument_list|(
name|Overflow
operator|.
name|HIDDEN
argument_list|)
expr_stmt|;
name|iEnrollmentScroll
operator|.
name|setHeight
argument_list|(
name|Math
operator|.
name|min
argument_list|(
name|iEnrollmentTable
operator|.
name|getElement
argument_list|()
operator|.
name|getScrollHeight
argument_list|()
argument_list|,
name|Window
operator|.
name|getClientHeight
argument_list|()
operator|*
literal|80
operator|/
literal|100
argument_list|)
operator|+
literal|"px"
argument_list|)
expr_stmt|;
name|iEnrollmentDialog
operator|.
name|setPopupPosition
argument_list|(
name|Math
operator|.
name|max
argument_list|(
name|Window
operator|.
name|getScrollLeft
argument_list|()
operator|+
operator|(
name|Window
operator|.
name|getClientWidth
argument_list|()
operator|-
name|iEnrollmentDialog
operator|.
name|getOffsetWidth
argument_list|()
operator|)
operator|/
literal|2
argument_list|,
literal|0
argument_list|)
argument_list|,
name|Math
operator|.
name|max
argument_list|(
name|Window
operator|.
name|getScrollTop
argument_list|()
operator|+
operator|(
name|Window
operator|.
name|getClientHeight
argument_list|()
operator|-
name|iEnrollmentDialog
operator|.
name|getOffsetHeight
argument_list|()
operator|)
operator|/
literal|2
argument_list|,
literal|0
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
name|iEnrollmentTable
operator|.
name|getHeader
argument_list|()
operator|.
name|addButton
argument_list|(
literal|"close"
argument_list|,
name|MESSAGES
operator|.
name|buttonClose
argument_list|()
argument_list|,
operator|new
name|ClickHandler
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|void
name|onClick
parameter_list|(
name|ClickEvent
name|event
parameter_list|)
block|{
name|iEnrollmentDialog
operator|.
name|hide
argument_list|()
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
name|iEnrollmentDialog
operator|.
name|addCloseHandler
argument_list|(
operator|new
name|CloseHandler
argument_list|<
name|PopupPanel
argument_list|>
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|void
name|onClose
parameter_list|(
name|CloseEvent
argument_list|<
name|PopupPanel
argument_list|>
name|event
parameter_list|)
block|{
name|RootPanel
operator|.
name|getBodyElement
argument_list|()
operator|.
name|getStyle
argument_list|()
operator|.
name|setOverflow
argument_list|(
name|Overflow
operator|.
name|AUTO
argument_list|)
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
name|iSectioningService
operator|.
name|getProperties
argument_list|(
literal|null
argument_list|,
operator|new
name|AsyncCallback
argument_list|<
name|SectioningProperties
argument_list|>
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|void
name|onSuccess
parameter_list|(
name|SectioningProperties
name|result
parameter_list|)
block|{
name|iProperties
operator|=
name|result
expr_stmt|;
if|if
condition|(
name|iProperties
operator|.
name|isChangeLog
argument_list|()
condition|)
name|iTabPanel
operator|.
name|add
argument_list|(
name|iLogTable
argument_list|,
name|MESSAGES
operator|.
name|tabChangeLog
argument_list|()
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|checkLastQuery
argument_list|()
expr_stmt|;
block|}
annotation|@
name|Override
specifier|public
name|void
name|onFailure
parameter_list|(
name|Throwable
name|caught
parameter_list|)
block|{
name|iError
operator|.
name|setHTML
argument_list|(
name|caught
operator|.
name|getMessage
argument_list|()
argument_list|)
expr_stmt|;
name|iError
operator|.
name|setVisible
argument_list|(
literal|true
argument_list|)
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
name|iStatus
operator|=
operator|new
name|UniTimeWidget
argument_list|<
name|ListBox
argument_list|>
argument_list|(
operator|new
name|ListBox
argument_list|()
argument_list|)
expr_stmt|;
name|iStatus
operator|.
name|getWidget
argument_list|()
operator|.
name|addItem
argument_list|(
literal|""
argument_list|,
literal|"-"
argument_list|)
expr_stmt|;
name|iStatus
operator|.
name|getWidget
argument_list|()
operator|.
name|setSelectedIndex
argument_list|(
literal|0
argument_list|)
expr_stmt|;
name|iSectioningService
operator|.
name|lookupStudentSectioningStates
argument_list|(
operator|new
name|AsyncCallback
argument_list|<
name|Map
argument_list|<
name|String
argument_list|,
name|String
argument_list|>
argument_list|>
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|void
name|onFailure
parameter_list|(
name|Throwable
name|caught
parameter_list|)
block|{
block|}
annotation|@
name|Override
specifier|public
name|void
name|onSuccess
parameter_list|(
name|Map
argument_list|<
name|String
argument_list|,
name|String
argument_list|>
name|result
parameter_list|)
block|{
name|iStates
operator|=
name|result
expr_stmt|;
for|for
control|(
specifier|final
name|String
name|ref
range|:
operator|new
name|TreeSet
argument_list|<
name|String
argument_list|>
argument_list|(
name|iStates
operator|.
name|keySet
argument_list|()
argument_list|)
control|)
block|{
name|iStatus
operator|.
name|getWidget
argument_list|()
operator|.
name|addItem
argument_list|(
name|iStates
operator|.
name|get
argument_list|(
name|ref
argument_list|)
argument_list|,
name|ref
argument_list|)
expr_stmt|;
block|}
for|for
control|(
name|int
name|i
init|=
literal|0
init|;
name|i
operator|<
name|iStatus
operator|.
name|getWidget
argument_list|()
operator|.
name|getItemCount
argument_list|()
condition|;
name|i
operator|++
control|)
block|{
if|if
condition|(
literal|"Cancelled"
operator|.
name|equalsIgnoreCase
argument_list|(
name|iStatus
operator|.
name|getWidget
argument_list|()
operator|.
name|getValue
argument_list|(
name|i
argument_list|)
argument_list|)
condition|)
block|{
name|iStatus
operator|.
name|getWidget
argument_list|()
operator|.
name|setSelectedIndex
argument_list|(
name|i
argument_list|)
expr_stmt|;
break|break;
block|}
block|}
block|}
block|}
argument_list|)
expr_stmt|;
name|iSubject
operator|=
operator|new
name|UniTimeTextBox
argument_list|(
literal|512
argument_list|,
literal|473
argument_list|)
expr_stmt|;
name|iSubject
operator|.
name|setText
argument_list|(
name|MESSAGES
operator|.
name|defaulSubject
argument_list|()
argument_list|)
expr_stmt|;
name|iCC
operator|=
operator|new
name|UniTimeTextBox
argument_list|(
literal|512
argument_list|,
literal|473
argument_list|)
expr_stmt|;
name|iMessage
operator|=
operator|new
name|TextArea
argument_list|()
expr_stmt|;
name|iMessage
operator|.
name|setStyleName
argument_list|(
literal|"unitime-TextArea"
argument_list|)
expr_stmt|;
name|iMessage
operator|.
name|setVisibleLines
argument_list|(
literal|10
argument_list|)
expr_stmt|;
name|iMessage
operator|.
name|setCharacterWidth
argument_list|(
literal|80
argument_list|)
expr_stmt|;
name|iNote
operator|=
operator|new
name|TextArea
argument_list|()
expr_stmt|;
name|iNote
operator|.
name|setStyleName
argument_list|(
literal|"unitime-TextArea"
argument_list|)
expr_stmt|;
name|iNote
operator|.
name|setVisibleLines
argument_list|(
literal|10
argument_list|)
expr_stmt|;
name|iNote
operator|.
name|setCharacterWidth
argument_list|(
literal|80
argument_list|)
expr_stmt|;
block|}
specifier|private
name|void
name|checkLastQuery
parameter_list|()
block|{
if|if
condition|(
name|Window
operator|.
name|Location
operator|.
name|getParameter
argument_list|(
literal|"q"
argument_list|)
operator|!=
literal|null
condition|)
block|{
name|iFilter
operator|.
name|setValue
argument_list|(
name|Window
operator|.
name|Location
operator|.
name|getParameter
argument_list|(
literal|"q"
argument_list|)
argument_list|,
literal|true
argument_list|)
expr_stmt|;
if|if
condition|(
name|Window
operator|.
name|Location
operator|.
name|getParameter
argument_list|(
literal|"t"
argument_list|)
operator|!=
literal|null
condition|)
block|{
if|if
condition|(
literal|"2"
operator|.
name|equals
argument_list|(
name|Window
operator|.
name|Location
operator|.
name|getParameter
argument_list|(
literal|"t"
argument_list|)
argument_list|)
condition|)
block|{
name|iTabPanel
operator|.
name|selectTab
argument_list|(
literal|1
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|iTabPanel
operator|.
name|selectTab
argument_list|(
literal|0
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
name|loadData
argument_list|()
expr_stmt|;
block|}
block|}
if|else if
condition|(
name|Window
operator|.
name|Location
operator|.
name|getHash
argument_list|()
operator|!=
literal|null
operator|&&
operator|!
name|Window
operator|.
name|Location
operator|.
name|getHash
argument_list|()
operator|.
name|isEmpty
argument_list|()
condition|)
block|{
name|String
name|hash
init|=
name|URL
operator|.
name|decode
argument_list|(
name|Window
operator|.
name|Location
operator|.
name|getHash
argument_list|()
operator|.
name|substring
argument_list|(
literal|1
argument_list|)
argument_list|)
decl_stmt|;
if|if
condition|(
operator|!
name|hash
operator|.
name|matches
argument_list|(
literal|"^[0-9]+\\:?[0-9]*@?$"
argument_list|)
condition|)
block|{
if|if
condition|(
name|hash
operator|.
name|endsWith
argument_list|(
literal|"@"
argument_list|)
condition|)
block|{
name|iFilter
operator|.
name|setValue
argument_list|(
name|hash
operator|.
name|substring
argument_list|(
literal|0
argument_list|,
name|hash
operator|.
name|length
argument_list|()
operator|-
literal|1
argument_list|)
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|iTabPanel
operator|.
name|selectTab
argument_list|(
literal|1
argument_list|)
expr_stmt|;
block|}
if|else if
condition|(
name|hash
operator|.
name|endsWith
argument_list|(
literal|"$"
argument_list|)
condition|)
block|{
name|iFilter
operator|.
name|setValue
argument_list|(
name|hash
operator|.
name|substring
argument_list|(
literal|0
argument_list|,
name|hash
operator|.
name|length
argument_list|()
operator|-
literal|1
argument_list|)
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|iTabPanel
operator|.
name|selectTab
argument_list|(
literal|2
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|iFilter
operator|.
name|setValue
argument_list|(
name|hash
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|loadData
argument_list|()
expr_stmt|;
block|}
block|}
block|}
else|else
block|{
name|String
name|q
init|=
name|SectioningStatusCookie
operator|.
name|getInstance
argument_list|()
operator|.
name|getQuery
argument_list|(
name|iOnline
argument_list|)
decl_stmt|;
if|if
condition|(
name|q
operator|!=
literal|null
condition|)
name|iFilter
operator|.
name|setValue
argument_list|(
name|q
argument_list|)
expr_stmt|;
name|int
name|t
init|=
name|SectioningStatusCookie
operator|.
name|getInstance
argument_list|()
operator|.
name|getTab
argument_list|(
name|iOnline
argument_list|)
decl_stmt|;
if|if
condition|(
name|t
operator|>=
literal|0
operator|&&
name|t
operator|<
name|iTabPanel
operator|.
name|getTabCount
argument_list|()
condition|)
block|{
name|iTabPanel
operator|.
name|selectTab
argument_list|(
name|t
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|iTabIndex
operator|=
operator|-
literal|1
expr_stmt|;
block|}
if|if
condition|(
name|GWT_CONSTANTS
operator|.
name|searchWhenPageIsLoaded
argument_list|()
operator|&&
name|q
operator|!=
literal|null
operator|&&
operator|!
name|q
operator|.
name|isEmpty
argument_list|()
condition|)
name|loadData
argument_list|()
expr_stmt|;
block|}
block|}
specifier|private
name|void
name|setLoading
parameter_list|(
name|boolean
name|loading
parameter_list|)
block|{
name|iLoadingImage
operator|.
name|setVisible
argument_list|(
name|loading
argument_list|)
expr_stmt|;
name|iSearch
operator|.
name|setVisible
argument_list|(
operator|!
name|loading
argument_list|)
expr_stmt|;
name|iExport
operator|.
name|setVisible
argument_list|(
operator|!
name|loading
argument_list|)
expr_stmt|;
block|}
specifier|private
name|void
name|loadData
parameter_list|()
block|{
name|iCourseTable
operator|.
name|clearTable
argument_list|()
expr_stmt|;
name|iStudentTable
operator|.
name|clearTable
argument_list|()
expr_stmt|;
name|iLogTable
operator|.
name|clearTable
argument_list|()
expr_stmt|;
name|loadDataIfNeeded
argument_list|()
expr_stmt|;
block|}
specifier|private
name|void
name|loadDataIfNeeded
parameter_list|()
block|{
if|if
condition|(
name|iTabIndex
operator|<
literal|0
condition|)
block|{
name|iTabPanel
operator|.
name|selectTab
argument_list|(
name|SectioningStatusCookie
operator|.
name|getInstance
argument_list|()
operator|.
name|getTab
argument_list|(
name|iOnline
argument_list|)
argument_list|)
expr_stmt|;
return|return;
block|}
name|iCourseFilter
operator|=
name|iFilter
operator|.
name|getValue
argument_list|()
expr_stmt|;
name|iCourseFilterRequest
operator|=
name|iFilter
operator|.
name|getElementsRequest
argument_list|()
expr_stmt|;
name|History
operator|.
name|newItem
argument_list|(
name|iCourseFilter
operator|+
operator|(
name|iTabIndex
operator|==
literal|1
condition|?
literal|"@"
else|:
name|iTabIndex
operator|==
literal|2
condition|?
literal|"$"
else|:
literal|""
operator|)
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|SectioningStatusCookie
operator|.
name|getInstance
argument_list|()
operator|.
name|setQueryTab
argument_list|(
name|iOnline
argument_list|,
name|iFilter
operator|.
name|getValue
argument_list|()
argument_list|,
name|iTabIndex
argument_list|)
expr_stmt|;
if|if
condition|(
name|iFilter
operator|.
name|isFilterPopupShowing
argument_list|()
condition|)
name|iFilter
operator|.
name|hideFilterPopup
argument_list|()
expr_stmt|;
if|if
condition|(
name|iTabIndex
operator|==
literal|0
operator|&&
name|iCourseTable
operator|.
name|getRowCount
argument_list|()
operator|>
literal|0
condition|)
return|return;
if|if
condition|(
name|iTabIndex
operator|==
literal|1
operator|&&
name|iStudentTable
operator|.
name|getRowCount
argument_list|()
operator|>
literal|0
condition|)
return|return;
if|if
condition|(
name|iTabIndex
operator|==
literal|2
operator|&&
name|iLogTable
operator|.
name|getRowCount
argument_list|()
operator|>
literal|0
condition|)
return|return;
name|LoadingWidget
operator|.
name|getInstance
argument_list|()
operator|.
name|show
argument_list|(
name|MESSAGES
operator|.
name|loadingData
argument_list|()
argument_list|)
expr_stmt|;
name|setLoading
argument_list|(
literal|true
argument_list|)
expr_stmt|;
name|iError
operator|.
name|setVisible
argument_list|(
literal|false
argument_list|)
expr_stmt|;
if|if
condition|(
name|iTabIndex
operator|==
literal|0
condition|)
block|{
name|iSectioningService
operator|.
name|findEnrollmentInfos
argument_list|(
name|iOnline
argument_list|,
name|iCourseFilter
argument_list|,
name|iCourseFilterRequest
argument_list|,
literal|null
argument_list|,
operator|new
name|AsyncCallback
argument_list|<
name|List
argument_list|<
name|EnrollmentInfo
argument_list|>
argument_list|>
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|void
name|onFailure
parameter_list|(
name|Throwable
name|caught
parameter_list|)
block|{
name|LoadingWidget
operator|.
name|getInstance
argument_list|()
operator|.
name|hide
argument_list|()
expr_stmt|;
name|setLoading
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|iError
operator|.
name|setHTML
argument_list|(
name|caught
operator|.
name|getMessage
argument_list|()
argument_list|)
expr_stmt|;
name|iError
operator|.
name|setVisible
argument_list|(
literal|true
argument_list|)
expr_stmt|;
name|iTabPanel
operator|.
name|setVisible
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|ToolBox
operator|.
name|checkAccess
argument_list|(
name|caught
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Override
specifier|public
name|void
name|onSuccess
parameter_list|(
name|List
argument_list|<
name|EnrollmentInfo
argument_list|>
name|result
parameter_list|)
block|{
if|if
condition|(
name|result
operator|.
name|isEmpty
argument_list|()
condition|)
block|{
name|iError
operator|.
name|setHTML
argument_list|(
name|MESSAGES
operator|.
name|exceptionNoMatchingResultsFound
argument_list|(
name|iCourseFilter
argument_list|)
argument_list|)
expr_stmt|;
name|iError
operator|.
name|setVisible
argument_list|(
literal|true
argument_list|)
expr_stmt|;
name|iTabPanel
operator|.
name|setVisible
argument_list|(
literal|false
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|populateCourseTable
argument_list|(
name|result
argument_list|)
expr_stmt|;
name|iTabPanel
operator|.
name|setVisible
argument_list|(
literal|true
argument_list|)
expr_stmt|;
block|}
name|setLoading
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|LoadingWidget
operator|.
name|getInstance
argument_list|()
operator|.
name|hide
argument_list|()
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
block|}
if|else if
condition|(
name|iTabIndex
operator|==
literal|1
condition|)
block|{
if|if
condition|(
name|iOnline
condition|)
block|{
name|iSectioningService
operator|.
name|findStudentInfos
argument_list|(
name|iOnline
argument_list|,
name|iCourseFilter
argument_list|,
name|iCourseFilterRequest
argument_list|,
operator|new
name|AsyncCallback
argument_list|<
name|List
argument_list|<
name|StudentInfo
argument_list|>
argument_list|>
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|void
name|onFailure
parameter_list|(
name|Throwable
name|caught
parameter_list|)
block|{
name|LoadingWidget
operator|.
name|getInstance
argument_list|()
operator|.
name|hide
argument_list|()
expr_stmt|;
name|setLoading
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|iError
operator|.
name|setHTML
argument_list|(
name|caught
operator|.
name|getMessage
argument_list|()
argument_list|)
expr_stmt|;
name|iError
operator|.
name|setVisible
argument_list|(
literal|true
argument_list|)
expr_stmt|;
name|iTabPanel
operator|.
name|setVisible
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|ToolBox
operator|.
name|checkAccess
argument_list|(
name|caught
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Override
specifier|public
name|void
name|onSuccess
parameter_list|(
name|List
argument_list|<
name|StudentInfo
argument_list|>
name|result
parameter_list|)
block|{
if|if
condition|(
name|result
operator|.
name|isEmpty
argument_list|()
condition|)
block|{
name|iError
operator|.
name|setHTML
argument_list|(
name|MESSAGES
operator|.
name|exceptionNoMatchingResultsFound
argument_list|(
name|iCourseFilter
argument_list|)
argument_list|)
expr_stmt|;
name|iError
operator|.
name|setVisible
argument_list|(
literal|true
argument_list|)
expr_stmt|;
name|iTabPanel
operator|.
name|setVisible
argument_list|(
literal|false
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|populateStudentTable
argument_list|(
name|result
argument_list|)
expr_stmt|;
name|iTabPanel
operator|.
name|setVisible
argument_list|(
literal|true
argument_list|)
expr_stmt|;
block|}
name|setLoading
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|LoadingWidget
operator|.
name|getInstance
argument_list|()
operator|.
name|hide
argument_list|()
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|iSectioningService
operator|.
name|findStudentInfos
argument_list|(
name|iOnline
argument_list|,
name|iCourseFilter
argument_list|,
name|iCourseFilterRequest
argument_list|,
operator|new
name|AsyncCallback
argument_list|<
name|List
argument_list|<
name|StudentInfo
argument_list|>
argument_list|>
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|void
name|onFailure
parameter_list|(
name|Throwable
name|caught
parameter_list|)
block|{
name|LoadingWidget
operator|.
name|getInstance
argument_list|()
operator|.
name|hide
argument_list|()
expr_stmt|;
name|setLoading
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|iError
operator|.
name|setHTML
argument_list|(
name|caught
operator|.
name|getMessage
argument_list|()
argument_list|)
expr_stmt|;
name|iError
operator|.
name|setVisible
argument_list|(
literal|true
argument_list|)
expr_stmt|;
name|iTabPanel
operator|.
name|setVisible
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|ToolBox
operator|.
name|checkAccess
argument_list|(
name|caught
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Override
specifier|public
name|void
name|onSuccess
parameter_list|(
name|List
argument_list|<
name|StudentInfo
argument_list|>
name|result
parameter_list|)
block|{
if|if
condition|(
name|result
operator|.
name|isEmpty
argument_list|()
condition|)
block|{
name|iError
operator|.
name|setHTML
argument_list|(
name|MESSAGES
operator|.
name|exceptionNoMatchingResultsFound
argument_list|(
name|iCourseFilter
argument_list|)
argument_list|)
expr_stmt|;
name|iError
operator|.
name|setVisible
argument_list|(
literal|true
argument_list|)
expr_stmt|;
name|iTabPanel
operator|.
name|setVisible
argument_list|(
literal|false
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|populateStudentTable
argument_list|(
name|result
argument_list|)
expr_stmt|;
name|iTabPanel
operator|.
name|setVisible
argument_list|(
literal|true
argument_list|)
expr_stmt|;
block|}
name|setLoading
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|LoadingWidget
operator|.
name|getInstance
argument_list|()
operator|.
name|hide
argument_list|()
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
block|}
block|}
if|else if
condition|(
name|iOnline
condition|)
block|{
name|iSectioningService
operator|.
name|changeLog
argument_list|(
name|iCourseFilter
argument_list|,
operator|new
name|AsyncCallback
argument_list|<
name|List
argument_list|<
name|SectioningAction
argument_list|>
argument_list|>
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|void
name|onFailure
parameter_list|(
name|Throwable
name|caught
parameter_list|)
block|{
name|LoadingWidget
operator|.
name|getInstance
argument_list|()
operator|.
name|hide
argument_list|()
expr_stmt|;
name|setLoading
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|iError
operator|.
name|setHTML
argument_list|(
name|caught
operator|.
name|getMessage
argument_list|()
argument_list|)
expr_stmt|;
name|iError
operator|.
name|setVisible
argument_list|(
literal|true
argument_list|)
expr_stmt|;
name|iTabPanel
operator|.
name|setVisible
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|ToolBox
operator|.
name|checkAccess
argument_list|(
name|caught
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Override
specifier|public
name|void
name|onSuccess
parameter_list|(
specifier|final
name|List
argument_list|<
name|SectioningAction
argument_list|>
name|result
parameter_list|)
block|{
name|populateChangeLog
argument_list|(
name|result
argument_list|)
expr_stmt|;
name|iTabPanel
operator|.
name|setVisible
argument_list|(
literal|true
argument_list|)
expr_stmt|;
name|setLoading
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|LoadingWidget
operator|.
name|getInstance
argument_list|()
operator|.
name|hide
argument_list|()
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
block|}
block|}
specifier|private
name|void
name|exportData
parameter_list|()
block|{
name|int
name|tab
init|=
name|iTabIndex
decl_stmt|;
if|if
condition|(
name|tab
operator|<
literal|0
condition|)
name|tab
operator|=
name|SectioningStatusCookie
operator|.
name|getInstance
argument_list|()
operator|.
name|getTab
argument_list|(
name|iOnline
argument_list|)
expr_stmt|;
name|String
name|query
init|=
literal|"output=student-dashboard.csv&online="
operator|+
operator|(
name|iOnline
condition|?
literal|1
else|:
literal|0
operator|)
operator|+
literal|"&tab="
operator|+
name|tab
operator|+
literal|"&sort="
operator|+
name|SectioningStatusCookie
operator|.
name|getInstance
argument_list|()
operator|.
name|getSortBy
argument_list|(
name|iOnline
argument_list|,
name|tab
argument_list|)
decl_stmt|;
if|if
condition|(
name|tab
operator|==
literal|0
condition|)
for|for
control|(
name|Long
name|courseId
range|:
name|iSelectedCourseIds
control|)
name|query
operator|+=
literal|"&c="
operator|+
name|courseId
expr_stmt|;
name|query
operator|+=
literal|"&query="
operator|+
name|URL
operator|.
name|encodeQueryString
argument_list|(
name|iFilter
operator|.
name|getValue
argument_list|()
argument_list|)
expr_stmt|;
name|FilterRpcRequest
name|req
init|=
name|iFilter
operator|.
name|getElementsRequest
argument_list|()
decl_stmt|;
if|if
condition|(
name|req
operator|.
name|hasOptions
argument_list|()
condition|)
block|{
for|for
control|(
name|Map
operator|.
name|Entry
argument_list|<
name|String
argument_list|,
name|Set
argument_list|<
name|String
argument_list|>
argument_list|>
name|option
range|:
name|req
operator|.
name|getOptions
argument_list|()
operator|.
name|entrySet
argument_list|()
control|)
block|{
for|for
control|(
name|String
name|value
range|:
name|option
operator|.
name|getValue
argument_list|()
control|)
block|{
name|query
operator|+=
literal|"&f:"
operator|+
name|option
operator|.
name|getKey
argument_list|()
operator|+
literal|"="
operator|+
name|URL
operator|.
name|encodeQueryString
argument_list|(
name|value
argument_list|)
expr_stmt|;
block|}
block|}
block|}
if|if
condition|(
name|req
operator|.
name|getText
argument_list|()
operator|!=
literal|null
operator|&&
operator|!
name|req
operator|.
name|getText
argument_list|()
operator|.
name|isEmpty
argument_list|()
condition|)
block|{
name|query
operator|+=
literal|"&f:text="
operator|+
name|URL
operator|.
name|encodeQueryString
argument_list|(
name|req
operator|.
name|getText
argument_list|()
argument_list|)
expr_stmt|;
block|}
name|RPC
operator|.
name|execute
argument_list|(
name|EncodeQueryRpcRequest
operator|.
name|encode
argument_list|(
name|query
argument_list|)
argument_list|,
operator|new
name|AsyncCallback
argument_list|<
name|EncodeQueryRpcResponse
argument_list|>
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|void
name|onFailure
parameter_list|(
name|Throwable
name|caught
parameter_list|)
block|{
block|}
annotation|@
name|Override
specifier|public
name|void
name|onSuccess
parameter_list|(
name|EncodeQueryRpcResponse
name|result
parameter_list|)
block|{
name|ToolBox
operator|.
name|open
argument_list|(
name|GWT
operator|.
name|getHostPageBaseURL
argument_list|()
operator|+
literal|"export?q="
operator|+
name|result
operator|.
name|getQuery
argument_list|()
argument_list|)
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
block|}
specifier|private
name|List
argument_list|<
name|Widget
argument_list|>
name|line
parameter_list|(
specifier|final
name|EnrollmentInfo
name|e
parameter_list|)
block|{
name|List
argument_list|<
name|Widget
argument_list|>
name|line
init|=
operator|new
name|ArrayList
argument_list|<
name|Widget
argument_list|>
argument_list|()
decl_stmt|;
if|if
condition|(
name|e
operator|.
name|getConfigId
argument_list|()
operator|==
literal|null
condition|)
block|{
if|if
condition|(
name|e
operator|.
name|getCourseId
argument_list|()
operator|!=
literal|null
condition|)
block|{
specifier|final
name|Image
name|showDetails
init|=
operator|new
name|Image
argument_list|(
name|RESOURCES
operator|.
name|treeClosed
argument_list|()
argument_list|)
decl_stmt|;
name|showDetails
operator|.
name|addClickHandler
argument_list|(
operator|new
name|ClickHandler
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|void
name|onClick
parameter_list|(
name|ClickEvent
name|event
parameter_list|)
block|{
specifier|final
name|int
name|row
init|=
name|iCourseTable
operator|.
name|getCellForEvent
argument_list|(
name|event
argument_list|)
operator|.
name|getRowIndex
argument_list|()
decl_stmt|;
if|if
condition|(
name|row
operator|+
literal|1
operator|==
name|iCourseTable
operator|.
name|getRowCount
argument_list|()
operator|||
name|iCourseTable
operator|.
name|getData
argument_list|(
name|row
operator|+
literal|1
argument_list|)
operator|.
name|getConfigId
argument_list|()
operator|==
literal|null
condition|)
block|{
comment|// open
name|setLoading
argument_list|(
literal|true
argument_list|)
expr_stmt|;
name|iError
operator|.
name|setVisible
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|showDetails
operator|.
name|setResource
argument_list|(
name|RESOURCES
operator|.
name|treeOpen
argument_list|()
argument_list|)
expr_stmt|;
name|iSectioningService
operator|.
name|findEnrollmentInfos
argument_list|(
name|iOnline
argument_list|,
name|iCourseFilter
argument_list|,
name|iCourseFilterRequest
argument_list|,
name|e
operator|.
name|getCourseId
argument_list|()
argument_list|,
operator|new
name|AsyncCallback
argument_list|<
name|List
argument_list|<
name|EnrollmentInfo
argument_list|>
argument_list|>
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|void
name|onFailure
parameter_list|(
name|Throwable
name|caught
parameter_list|)
block|{
name|setLoading
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|iError
operator|.
name|setHTML
argument_list|(
name|caught
operator|.
name|getMessage
argument_list|()
argument_list|)
expr_stmt|;
name|iError
operator|.
name|setVisible
argument_list|(
literal|true
argument_list|)
expr_stmt|;
name|ToolBox
operator|.
name|checkAccess
argument_list|(
name|caught
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Override
specifier|public
name|void
name|onSuccess
parameter_list|(
name|List
argument_list|<
name|EnrollmentInfo
argument_list|>
name|result
parameter_list|)
block|{
name|iSelectedCourseIds
operator|.
name|add
argument_list|(
name|e
operator|.
name|getCourseId
argument_list|()
argument_list|)
expr_stmt|;
name|setLoading
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|int
name|r
init|=
name|row
operator|+
literal|1
decl_stmt|;
for|for
control|(
name|EnrollmentInfo
name|e
range|:
name|result
control|)
block|{
name|iCourseTable
operator|.
name|insertRow
argument_list|(
name|r
argument_list|)
expr_stmt|;
name|iCourseTable
operator|.
name|setRow
argument_list|(
name|r
argument_list|,
name|e
argument_list|,
name|line
argument_list|(
name|e
argument_list|)
argument_list|)
expr_stmt|;
name|r
operator|++
expr_stmt|;
block|}
block|}
block|}
argument_list|)
expr_stmt|;
block|}
else|else
block|{
for|for
control|(
name|int
name|r
init|=
name|row
operator|+
literal|1
init|;
name|r
operator|<
name|iCourseTable
operator|.
name|getRowCount
argument_list|()
condition|;
name|r
operator|++
control|)
block|{
if|if
condition|(
name|iCourseTable
operator|.
name|getData
argument_list|(
name|r
argument_list|)
operator|.
name|getConfigId
argument_list|()
operator|==
literal|null
condition|)
break|break;
name|iCourseTable
operator|.
name|getRowFormatter
argument_list|()
operator|.
name|setVisible
argument_list|(
name|r
argument_list|,
operator|!
name|iCourseTable
operator|.
name|getRowFormatter
argument_list|()
operator|.
name|isVisible
argument_list|(
name|r
argument_list|)
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|iSelectedCourseIds
operator|.
name|remove
argument_list|(
name|e
operator|.
name|getCourseId
argument_list|()
argument_list|)
condition|)
block|{
name|showDetails
operator|.
name|setResource
argument_list|(
name|RESOURCES
operator|.
name|treeClosed
argument_list|()
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|iSelectedCourseIds
operator|.
name|add
argument_list|(
name|e
operator|.
name|getCourseId
argument_list|()
argument_list|)
expr_stmt|;
name|showDetails
operator|.
name|setResource
argument_list|(
name|RESOURCES
operator|.
name|treeOpen
argument_list|()
argument_list|)
expr_stmt|;
block|}
block|}
name|event
operator|.
name|getNativeEvent
argument_list|()
operator|.
name|stopPropagation
argument_list|()
expr_stmt|;
name|event
operator|.
name|getNativeEvent
argument_list|()
operator|.
name|preventDefault
argument_list|()
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
name|line
operator|.
name|add
argument_list|(
name|showDetails
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|line
operator|.
name|add
argument_list|(
operator|new
name|Label
argument_list|()
argument_list|)
expr_stmt|;
block|}
name|line
operator|.
name|add
argument_list|(
operator|new
name|Label
argument_list|(
name|e
operator|.
name|getSubject
argument_list|()
argument_list|,
literal|false
argument_list|)
argument_list|)
expr_stmt|;
name|line
operator|.
name|add
argument_list|(
operator|new
name|Label
argument_list|(
name|e
operator|.
name|getCourseNbr
argument_list|()
argument_list|,
literal|false
argument_list|)
argument_list|)
expr_stmt|;
name|line
operator|.
name|add
argument_list|(
operator|new
name|TitleCell
argument_list|(
name|e
operator|.
name|getTitle
argument_list|()
operator|==
literal|null
condition|?
literal|""
else|:
name|e
operator|.
name|getTitle
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
name|line
operator|.
name|add
argument_list|(
operator|new
name|Label
argument_list|(
name|e
operator|.
name|getConsent
argument_list|()
operator|==
literal|null
condition|?
literal|""
else|:
name|e
operator|.
name|getConsent
argument_list|()
argument_list|,
literal|false
argument_list|)
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|line
operator|.
name|add
argument_list|(
operator|new
name|Label
argument_list|()
argument_list|)
expr_stmt|;
name|line
operator|.
name|add
argument_list|(
operator|new
name|HTML
argument_list|(
literal|"&nbsp;&nbsp;"
operator|+
operator|(
name|e
operator|.
name|getSubpart
argument_list|()
operator|==
literal|null
condition|?
literal|""
else|:
name|e
operator|.
name|getIndent
argument_list|()
operator|+
name|e
operator|.
name|getSubpart
argument_list|()
operator|)
argument_list|,
literal|false
argument_list|)
argument_list|)
expr_stmt|;
name|line
operator|.
name|add
argument_list|(
operator|new
name|HTML
argument_list|(
name|e
operator|.
name|getClazz
argument_list|()
operator|==
literal|null
condition|?
literal|""
else|:
name|e
operator|.
name|getIndent
argument_list|()
operator|+
name|e
operator|.
name|getClazz
argument_list|()
argument_list|,
literal|false
argument_list|)
argument_list|)
expr_stmt|;
name|line
operator|.
name|add
argument_list|(
operator|new
name|Label
argument_list|(
name|e
operator|.
name|getAssignment
argument_list|()
operator|.
name|getDays
argument_list|()
operator|.
name|isEmpty
argument_list|()
condition|?
literal|""
else|:
name|e
operator|.
name|getAssignment
argument_list|()
operator|.
name|getDaysString
argument_list|(
name|CONSTANTS
operator|.
name|shortDays
argument_list|()
argument_list|)
operator|+
literal|" "
operator|+
name|e
operator|.
name|getAssignment
argument_list|()
operator|.
name|getStartString
argument_list|(
name|CONSTANTS
operator|.
name|useAmPm
argument_list|()
argument_list|)
operator|+
literal|" - "
operator|+
name|e
operator|.
name|getAssignment
argument_list|()
operator|.
name|getEndString
argument_list|(
name|CONSTANTS
operator|.
name|useAmPm
argument_list|()
argument_list|)
argument_list|,
literal|false
argument_list|)
argument_list|)
expr_stmt|;
name|line
operator|.
name|add
argument_list|(
operator|new
name|Label
argument_list|(
operator|!
name|e
operator|.
name|getAssignment
argument_list|()
operator|.
name|hasDatePattern
argument_list|()
condition|?
literal|""
else|:
name|e
operator|.
name|getAssignment
argument_list|()
operator|.
name|getDatePattern
argument_list|()
argument_list|,
literal|false
argument_list|)
argument_list|)
expr_stmt|;
name|line
operator|.
name|add
argument_list|(
operator|new
name|RoomsCell
argument_list|(
name|e
operator|.
name|getAssignment
argument_list|()
operator|.
name|getRooms
argument_list|()
argument_list|,
literal|","
argument_list|)
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|e
operator|.
name|getCourseId
argument_list|()
operator|==
literal|null
condition|)
name|line
operator|.
name|add
argument_list|(
operator|new
name|NumberCell
argument_list|(
name|e
operator|.
name|getAvailable
argument_list|()
argument_list|,
name|e
operator|.
name|getLimit
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
else|else
name|line
operator|.
name|add
argument_list|(
operator|new
name|AvailableCell
argument_list|(
name|e
argument_list|)
argument_list|)
expr_stmt|;
name|line
operator|.
name|add
argument_list|(
operator|new
name|NumberCell
argument_list|(
literal|null
argument_list|,
name|e
operator|.
name|getProjection
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
name|line
operator|.
name|add
argument_list|(
operator|new
name|NumberCell
argument_list|(
name|e
operator|.
name|getEnrollment
argument_list|()
argument_list|,
name|e
operator|.
name|getTotalEnrollment
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
name|line
operator|.
name|add
argument_list|(
operator|new
name|WaitListCell
argument_list|(
name|e
argument_list|)
argument_list|)
expr_stmt|;
name|line
operator|.
name|add
argument_list|(
operator|new
name|NumberCell
argument_list|(
name|e
operator|.
name|getUnassignedAlternative
argument_list|()
argument_list|,
name|e
operator|.
name|getTotalUnassignedAlternative
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
name|line
operator|.
name|add
argument_list|(
operator|new
name|NumberCell
argument_list|(
name|e
operator|.
name|getReservation
argument_list|()
argument_list|,
name|e
operator|.
name|getTotalReservation
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
name|line
operator|.
name|add
argument_list|(
operator|new
name|NumberCell
argument_list|(
name|e
operator|.
name|getConsentNeeded
argument_list|()
argument_list|,
name|e
operator|.
name|getTotalConsentNeeded
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
return|return
name|line
return|;
block|}
specifier|public
name|void
name|populateCourseTable
parameter_list|(
name|List
argument_list|<
name|EnrollmentInfo
argument_list|>
name|result
parameter_list|)
block|{
name|iSelectedCourseIds
operator|.
name|clear
argument_list|()
expr_stmt|;
name|List
argument_list|<
name|Widget
argument_list|>
name|header
init|=
operator|new
name|ArrayList
argument_list|<
name|Widget
argument_list|>
argument_list|()
decl_stmt|;
name|UniTimeTableHeader
name|hOperations
init|=
operator|new
name|UniTimeTableHeader
argument_list|(
literal|""
argument_list|)
decl_stmt|;
name|header
operator|.
name|add
argument_list|(
name|hOperations
argument_list|)
expr_stmt|;
name|UniTimeTableHeader
name|hSubject
init|=
operator|new
name|UniTimeTableHeader
argument_list|(
name|MESSAGES
operator|.
name|colSubject
argument_list|()
operator|+
literal|"<br>&nbsp;&nbsp;"
operator|+
name|MESSAGES
operator|.
name|colSubpart
argument_list|()
argument_list|)
decl_stmt|;
name|header
operator|.
name|add
argument_list|(
name|hSubject
argument_list|)
expr_stmt|;
name|addSortOperation
argument_list|(
name|hSubject
argument_list|,
name|EnrollmentComparator
operator|.
name|SortBy
operator|.
name|SUBJECT
argument_list|,
name|MESSAGES
operator|.
name|colSubject
argument_list|()
argument_list|)
expr_stmt|;
name|UniTimeTableHeader
name|hCourse
init|=
operator|new
name|UniTimeTableHeader
argument_list|(
name|MESSAGES
operator|.
name|colCourse
argument_list|()
operator|+
literal|"<br>"
operator|+
name|MESSAGES
operator|.
name|colClass
argument_list|()
argument_list|)
decl_stmt|;
name|header
operator|.
name|add
argument_list|(
name|hCourse
argument_list|)
expr_stmt|;
name|addSortOperation
argument_list|(
name|hCourse
argument_list|,
name|EnrollmentComparator
operator|.
name|SortBy
operator|.
name|COURSE
argument_list|,
name|MESSAGES
operator|.
name|colCourse
argument_list|()
argument_list|)
expr_stmt|;
name|UniTimeTableHeader
name|hTitleSubpart
init|=
operator|new
name|UniTimeTableHeader
argument_list|(
name|MESSAGES
operator|.
name|colTitle
argument_list|()
operator|+
literal|"<br>"
operator|+
name|MESSAGES
operator|.
name|colTime
argument_list|()
argument_list|)
decl_stmt|;
name|header
operator|.
name|add
argument_list|(
name|hTitleSubpart
argument_list|)
expr_stmt|;
name|addSortOperation
argument_list|(
name|hTitleSubpart
argument_list|,
name|EnrollmentComparator
operator|.
name|SortBy
operator|.
name|TITLE
argument_list|,
name|MESSAGES
operator|.
name|colTitle
argument_list|()
argument_list|)
expr_stmt|;
name|UniTimeTableHeader
name|hStart
init|=
operator|new
name|UniTimeTableHeader
argument_list|(
literal|"<br>"
operator|+
name|MESSAGES
operator|.
name|colDate
argument_list|()
argument_list|)
decl_stmt|;
name|header
operator|.
name|add
argument_list|(
name|hStart
argument_list|)
expr_stmt|;
name|UniTimeTableHeader
name|hRoom
init|=
operator|new
name|UniTimeTableHeader
argument_list|(
name|MESSAGES
operator|.
name|colConsent
argument_list|()
operator|+
literal|"<br>"
operator|+
name|MESSAGES
operator|.
name|colRoom
argument_list|()
argument_list|)
decl_stmt|;
name|header
operator|.
name|add
argument_list|(
name|hRoom
argument_list|)
expr_stmt|;
name|addSortOperation
argument_list|(
name|hRoom
argument_list|,
name|EnrollmentComparator
operator|.
name|SortBy
operator|.
name|CONSENT
argument_list|,
name|MESSAGES
operator|.
name|colConsent
argument_list|()
argument_list|)
expr_stmt|;
name|UniTimeTableHeader
name|hLimit
init|=
operator|new
name|UniTimeTableHeader
argument_list|(
name|MESSAGES
operator|.
name|colAvailable
argument_list|()
argument_list|)
decl_stmt|;
name|header
operator|.
name|add
argument_list|(
name|hLimit
argument_list|)
expr_stmt|;
name|addSortOperation
argument_list|(
name|hLimit
argument_list|,
name|EnrollmentComparator
operator|.
name|SortBy
operator|.
name|LIMIT
argument_list|,
name|MESSAGES
operator|.
name|colAvailable
argument_list|()
argument_list|)
expr_stmt|;
name|UniTimeTableHeader
name|hProjection
init|=
operator|new
name|UniTimeTableHeader
argument_list|(
name|MESSAGES
operator|.
name|colProjection
argument_list|()
argument_list|)
decl_stmt|;
name|header
operator|.
name|add
argument_list|(
name|hProjection
argument_list|)
expr_stmt|;
name|addSortOperation
argument_list|(
name|hProjection
argument_list|,
name|EnrollmentComparator
operator|.
name|SortBy
operator|.
name|PROJECTION
argument_list|,
name|MESSAGES
operator|.
name|colProjection
argument_list|()
argument_list|)
expr_stmt|;
name|UniTimeTableHeader
name|hEnrollment
init|=
operator|new
name|UniTimeTableHeader
argument_list|(
name|MESSAGES
operator|.
name|colEnrollment
argument_list|()
argument_list|)
decl_stmt|;
name|header
operator|.
name|add
argument_list|(
name|hEnrollment
argument_list|)
expr_stmt|;
name|addSortOperation
argument_list|(
name|hEnrollment
argument_list|,
name|EnrollmentComparator
operator|.
name|SortBy
operator|.
name|ENROLLMENT
argument_list|,
name|MESSAGES
operator|.
name|colEnrollment
argument_list|()
argument_list|)
expr_stmt|;
name|UniTimeTableHeader
name|hWaitListed
init|=
operator|new
name|UniTimeTableHeader
argument_list|(
name|MESSAGES
operator|.
name|colWaitListed
argument_list|()
argument_list|)
decl_stmt|;
name|header
operator|.
name|add
argument_list|(
name|hWaitListed
argument_list|)
expr_stmt|;
name|addSortOperation
argument_list|(
name|hWaitListed
argument_list|,
name|EnrollmentComparator
operator|.
name|SortBy
operator|.
name|WAITLIST
argument_list|,
name|MESSAGES
operator|.
name|colWaitListed
argument_list|()
argument_list|)
expr_stmt|;
name|UniTimeTableHeader
name|hAlternative
init|=
operator|new
name|UniTimeTableHeader
argument_list|(
name|MESSAGES
operator|.
name|colUnassignedAlternative
argument_list|()
argument_list|)
decl_stmt|;
name|header
operator|.
name|add
argument_list|(
name|hAlternative
argument_list|)
expr_stmt|;
name|addSortOperation
argument_list|(
name|hAlternative
argument_list|,
name|EnrollmentComparator
operator|.
name|SortBy
operator|.
name|ALTERNATIVES
argument_list|,
name|MESSAGES
operator|.
name|colUnassignedAlternative
argument_list|()
operator|.
name|replace
argument_list|(
literal|"<br>"
argument_list|,
literal|" "
argument_list|)
argument_list|)
expr_stmt|;
name|UniTimeTableHeader
name|hReserved
init|=
operator|new
name|UniTimeTableHeader
argument_list|(
name|MESSAGES
operator|.
name|colReserved
argument_list|()
argument_list|)
decl_stmt|;
name|header
operator|.
name|add
argument_list|(
name|hReserved
argument_list|)
expr_stmt|;
name|addSortOperation
argument_list|(
name|hReserved
argument_list|,
name|EnrollmentComparator
operator|.
name|SortBy
operator|.
name|RESERVATION
argument_list|,
name|MESSAGES
operator|.
name|colReserved
argument_list|()
argument_list|)
expr_stmt|;
name|UniTimeTableHeader
name|hConsent
init|=
operator|new
name|UniTimeTableHeader
argument_list|(
name|MESSAGES
operator|.
name|colNeedConsent
argument_list|()
argument_list|)
decl_stmt|;
name|header
operator|.
name|add
argument_list|(
name|hConsent
argument_list|)
expr_stmt|;
name|addSortOperation
argument_list|(
name|hConsent
argument_list|,
name|EnrollmentComparator
operator|.
name|SortBy
operator|.
name|NEED_CONSENT
argument_list|,
name|MESSAGES
operator|.
name|colNeedConsent
argument_list|()
operator|.
name|replace
argument_list|(
literal|"<br>"
argument_list|,
literal|" "
argument_list|)
argument_list|)
expr_stmt|;
name|iCourseTable
operator|.
name|addRow
argument_list|(
literal|null
argument_list|,
name|header
argument_list|)
expr_stmt|;
name|boolean
name|hasReservation
init|=
literal|false
decl_stmt|;
for|for
control|(
name|EnrollmentInfo
name|e
range|:
name|result
control|)
block|{
name|iCourseTable
operator|.
name|addRow
argument_list|(
name|e
argument_list|,
name|line
argument_list|(
name|e
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|hasReservation
operator|&&
name|AvailableCell
operator|.
name|hasReservedSpace
argument_list|(
name|e
argument_list|)
condition|)
name|hasReservation
operator|=
literal|true
expr_stmt|;
name|iCourseTable
operator|.
name|getRowFormatter
argument_list|()
operator|.
name|getElement
argument_list|(
name|iCourseTable
operator|.
name|getRowCount
argument_list|()
operator|-
literal|1
argument_list|)
operator|.
name|getStyle
argument_list|()
operator|.
name|setBackgroundColor
argument_list|(
literal|"#f3f3f3"
argument_list|)
expr_stmt|;
block|}
comment|// Total line
if|if
condition|(
name|iCourseTable
operator|.
name|getRowCount
argument_list|()
operator|>=
literal|2
condition|)
block|{
for|for
control|(
name|int
name|c
init|=
literal|0
init|;
name|c
operator|<
name|iCourseTable
operator|.
name|getCellCount
argument_list|(
name|iCourseTable
operator|.
name|getRowCount
argument_list|()
operator|-
literal|1
argument_list|)
condition|;
name|c
operator|++
control|)
name|iCourseTable
operator|.
name|getCellFormatter
argument_list|()
operator|.
name|setStyleName
argument_list|(
name|iCourseTable
operator|.
name|getRowCount
argument_list|()
operator|-
literal|1
argument_list|,
name|c
argument_list|,
literal|"unitime-TotalRow"
argument_list|)
expr_stmt|;
name|iCourseTable
operator|.
name|getRowFormatter
argument_list|()
operator|.
name|getElement
argument_list|(
name|iCourseTable
operator|.
name|getRowCount
argument_list|()
operator|-
literal|1
argument_list|)
operator|.
name|getStyle
argument_list|()
operator|.
name|clearBackgroundColor
argument_list|()
expr_stmt|;
block|}
name|iCourseTableHint
operator|.
name|setVisible
argument_list|(
name|hasReservation
argument_list|)
expr_stmt|;
if|if
condition|(
name|SectioningStatusCookie
operator|.
name|getInstance
argument_list|()
operator|.
name|getSortBy
argument_list|(
name|iOnline
argument_list|,
literal|0
argument_list|)
operator|!=
literal|0
condition|)
block|{
name|boolean
name|asc
init|=
operator|(
name|SectioningStatusCookie
operator|.
name|getInstance
argument_list|()
operator|.
name|getSortBy
argument_list|(
name|iOnline
argument_list|,
literal|0
argument_list|)
operator|>
literal|0
operator|)
decl_stmt|;
name|EnrollmentComparator
operator|.
name|SortBy
name|sort
init|=
name|EnrollmentComparator
operator|.
name|SortBy
operator|.
name|values
argument_list|()
index|[
name|Math
operator|.
name|abs
argument_list|(
name|SectioningStatusCookie
operator|.
name|getInstance
argument_list|()
operator|.
name|getSortBy
argument_list|(
name|iOnline
argument_list|,
literal|0
argument_list|)
argument_list|)
operator|-
literal|1
index|]
decl_stmt|;
switch|switch
condition|(
name|sort
condition|)
block|{
case|case
name|COURSE
case|:
name|iCourseTable
operator|.
name|sort
argument_list|(
name|hCourse
argument_list|,
operator|new
name|EnrollmentComparator
argument_list|(
name|sort
argument_list|)
argument_list|,
name|asc
argument_list|)
expr_stmt|;
break|break;
case|case
name|SUBJECT
case|:
name|iCourseTable
operator|.
name|sort
argument_list|(
name|hSubject
argument_list|,
operator|new
name|EnrollmentComparator
argument_list|(
name|sort
argument_list|)
argument_list|,
name|asc
argument_list|)
expr_stmt|;
break|break;
case|case
name|TITLE
case|:
name|iCourseTable
operator|.
name|sort
argument_list|(
name|hTitleSubpart
argument_list|,
operator|new
name|EnrollmentComparator
argument_list|(
name|sort
argument_list|)
argument_list|,
name|asc
argument_list|)
expr_stmt|;
break|break;
case|case
name|CONSENT
case|:
name|iCourseTable
operator|.
name|sort
argument_list|(
name|hRoom
argument_list|,
operator|new
name|EnrollmentComparator
argument_list|(
name|sort
argument_list|)
argument_list|,
name|asc
argument_list|)
expr_stmt|;
break|break;
case|case
name|LIMIT
case|:
name|iCourseTable
operator|.
name|sort
argument_list|(
name|hLimit
argument_list|,
operator|new
name|EnrollmentComparator
argument_list|(
name|sort
argument_list|)
argument_list|,
name|asc
argument_list|)
expr_stmt|;
break|break;
case|case
name|PROJECTION
case|:
name|iCourseTable
operator|.
name|sort
argument_list|(
name|hProjection
argument_list|,
operator|new
name|EnrollmentComparator
argument_list|(
name|sort
argument_list|)
argument_list|,
name|asc
argument_list|)
expr_stmt|;
break|break;
case|case
name|ENROLLMENT
case|:
name|iCourseTable
operator|.
name|sort
argument_list|(
name|hEnrollment
argument_list|,
operator|new
name|EnrollmentComparator
argument_list|(
name|sort
argument_list|)
argument_list|,
name|asc
argument_list|)
expr_stmt|;
break|break;
case|case
name|NEED_CONSENT
case|:
name|iCourseTable
operator|.
name|sort
argument_list|(
name|hConsent
argument_list|,
operator|new
name|EnrollmentComparator
argument_list|(
name|sort
argument_list|)
argument_list|,
name|asc
argument_list|)
expr_stmt|;
break|break;
case|case
name|RESERVATION
case|:
name|iCourseTable
operator|.
name|sort
argument_list|(
name|hReserved
argument_list|,
operator|new
name|EnrollmentComparator
argument_list|(
name|sort
argument_list|)
argument_list|,
name|asc
argument_list|)
expr_stmt|;
break|break;
case|case
name|WAITLIST
case|:
name|iCourseTable
operator|.
name|sort
argument_list|(
name|hWaitListed
argument_list|,
operator|new
name|EnrollmentComparator
argument_list|(
name|sort
argument_list|)
argument_list|,
name|asc
argument_list|)
expr_stmt|;
break|break;
case|case
name|ALTERNATIVES
case|:
name|iCourseTable
operator|.
name|sort
argument_list|(
name|hAlternative
argument_list|,
operator|new
name|EnrollmentComparator
argument_list|(
name|sort
argument_list|)
argument_list|,
name|asc
argument_list|)
expr_stmt|;
break|break;
block|}
block|}
block|}
specifier|public
name|void
name|populateStudentTable
parameter_list|(
name|List
argument_list|<
name|StudentInfo
argument_list|>
name|result
parameter_list|)
block|{
name|List
argument_list|<
name|Widget
argument_list|>
name|header
init|=
operator|new
name|ArrayList
argument_list|<
name|Widget
argument_list|>
argument_list|()
decl_stmt|;
if|if
condition|(
name|iOnline
operator|&&
name|iProperties
operator|!=
literal|null
operator|&&
name|iProperties
operator|.
name|isCanSelectStudent
argument_list|()
condition|)
block|{
name|UniTimeTableHeader
name|hSelect
init|=
operator|new
name|UniTimeTableHeader
argument_list|(
literal|"&otimes;"
argument_list|,
name|HasHorizontalAlignment
operator|.
name|ALIGN_CENTER
argument_list|)
decl_stmt|;
name|header
operator|.
name|add
argument_list|(
name|hSelect
argument_list|)
expr_stmt|;
name|hSelect
operator|.
name|setWidth
argument_list|(
literal|"10px"
argument_list|)
expr_stmt|;
name|hSelect
operator|.
name|addAdditionalStyleName
argument_list|(
literal|"unitime-NoPrint"
argument_list|)
expr_stmt|;
name|hSelect
operator|.
name|addOperation
argument_list|(
operator|new
name|Operation
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|String
name|getName
parameter_list|()
block|{
return|return
name|MESSAGES
operator|.
name|selectAll
argument_list|()
return|;
block|}
annotation|@
name|Override
specifier|public
name|boolean
name|hasSeparator
parameter_list|()
block|{
return|return
literal|false
return|;
block|}
annotation|@
name|Override
specifier|public
name|boolean
name|isApplicable
parameter_list|()
block|{
return|return
name|iSelectedStudentIds
operator|.
name|size
argument_list|()
operator|!=
name|iStudentTable
operator|.
name|getRowCount
argument_list|()
operator|+
literal|2
return|;
block|}
annotation|@
name|Override
specifier|public
name|void
name|execute
parameter_list|()
block|{
name|iSelectedStudentIds
operator|.
name|clear
argument_list|()
expr_stmt|;
for|for
control|(
name|int
name|row
init|=
literal|0
init|;
name|row
operator|<
name|iStudentTable
operator|.
name|getRowCount
argument_list|()
condition|;
name|row
operator|++
control|)
block|{
name|StudentInfo
name|i
init|=
name|iStudentTable
operator|.
name|getData
argument_list|(
name|row
argument_list|)
decl_stmt|;
if|if
condition|(
name|i
operator|!=
literal|null
operator|&&
name|i
operator|.
name|getStudent
argument_list|()
operator|!=
literal|null
condition|)
block|{
operator|(
operator|(
name|CheckBox
operator|)
name|iStudentTable
operator|.
name|getWidget
argument_list|(
name|row
argument_list|,
literal|0
argument_list|)
operator|)
operator|.
name|setValue
argument_list|(
literal|true
argument_list|)
expr_stmt|;
name|iSelectedStudentIds
operator|.
name|add
argument_list|(
name|i
operator|.
name|getStudent
argument_list|()
operator|.
name|getId
argument_list|()
argument_list|)
expr_stmt|;
block|}
block|}
block|}
block|}
argument_list|)
expr_stmt|;
name|hSelect
operator|.
name|addOperation
argument_list|(
operator|new
name|Operation
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|String
name|getName
parameter_list|()
block|{
return|return
name|MESSAGES
operator|.
name|clearAll
argument_list|()
return|;
block|}
annotation|@
name|Override
specifier|public
name|boolean
name|hasSeparator
parameter_list|()
block|{
return|return
literal|false
return|;
block|}
annotation|@
name|Override
specifier|public
name|boolean
name|isApplicable
parameter_list|()
block|{
return|return
name|iSelectedStudentIds
operator|.
name|size
argument_list|()
operator|>
literal|0
return|;
block|}
annotation|@
name|Override
specifier|public
name|void
name|execute
parameter_list|()
block|{
name|iSelectedStudentIds
operator|.
name|clear
argument_list|()
expr_stmt|;
for|for
control|(
name|int
name|row
init|=
literal|0
init|;
name|row
operator|<
name|iStudentTable
operator|.
name|getRowCount
argument_list|()
condition|;
name|row
operator|++
control|)
block|{
name|StudentInfo
name|i
init|=
name|iStudentTable
operator|.
name|getData
argument_list|(
name|row
argument_list|)
decl_stmt|;
if|if
condition|(
name|i
operator|!=
literal|null
operator|&&
name|i
operator|.
name|getStudent
argument_list|()
operator|!=
literal|null
condition|)
operator|(
operator|(
name|CheckBox
operator|)
name|iStudentTable
operator|.
name|getWidget
argument_list|(
name|row
argument_list|,
literal|0
argument_list|)
operator|)
operator|.
name|setValue
argument_list|(
literal|false
argument_list|)
expr_stmt|;
block|}
block|}
block|}
argument_list|)
expr_stmt|;
name|hSelect
operator|.
name|addOperation
argument_list|(
operator|new
name|Operation
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|String
name|getName
parameter_list|()
block|{
return|return
name|MESSAGES
operator|.
name|sendStudentEmail
argument_list|()
return|;
block|}
annotation|@
name|Override
specifier|public
name|boolean
name|hasSeparator
parameter_list|()
block|{
return|return
literal|true
return|;
block|}
annotation|@
name|Override
specifier|public
name|boolean
name|isApplicable
parameter_list|()
block|{
return|return
name|iSelectedStudentIds
operator|.
name|size
argument_list|()
operator|>
literal|0
operator|&&
name|iProperties
operator|!=
literal|null
operator|&&
name|iProperties
operator|.
name|isEmail
argument_list|()
return|;
block|}
annotation|@
name|Override
specifier|public
name|void
name|execute
parameter_list|()
block|{
name|SimpleForm
name|sf
init|=
operator|new
name|SimpleForm
argument_list|()
decl_stmt|;
specifier|final
name|UniTimeHeaderPanel
name|buttons
init|=
operator|new
name|UniTimeHeaderPanel
argument_list|()
decl_stmt|;
name|sf
operator|.
name|removeStyleName
argument_list|(
literal|"unitime-NotPrintableBottomLine"
argument_list|)
expr_stmt|;
name|sf
operator|.
name|addRow
argument_list|(
name|MESSAGES
operator|.
name|emailSubject
argument_list|()
argument_list|,
name|iSubject
argument_list|)
expr_stmt|;
if|if
condition|(
name|iSubject
operator|.
name|getText
argument_list|()
operator|.
name|isEmpty
argument_list|()
operator|||
name|iSubject
operator|.
name|getText
argument_list|()
operator|.
name|equals
argument_list|(
name|MESSAGES
operator|.
name|defaulSubjectMassCancel
argument_list|()
argument_list|)
condition|)
name|iSubject
operator|.
name|setText
argument_list|(
name|MESSAGES
operator|.
name|defaulSubject
argument_list|()
argument_list|)
expr_stmt|;
name|sf
operator|.
name|addRow
argument_list|(
name|MESSAGES
operator|.
name|emailCC
argument_list|()
argument_list|,
name|iCC
argument_list|)
expr_stmt|;
name|sf
operator|.
name|addRow
argument_list|(
name|MESSAGES
operator|.
name|emailBody
argument_list|()
argument_list|,
name|iMessage
argument_list|)
expr_stmt|;
name|sf
operator|.
name|addBottomRow
argument_list|(
name|buttons
argument_list|)
expr_stmt|;
specifier|final
name|UniTimeDialogBox
name|dialog
init|=
operator|new
name|UniTimeDialogBox
argument_list|(
literal|true
argument_list|,
literal|false
argument_list|)
decl_stmt|;
name|dialog
operator|.
name|setWidget
argument_list|(
name|sf
argument_list|)
expr_stmt|;
name|dialog
operator|.
name|setText
argument_list|(
name|MESSAGES
operator|.
name|sendStudentEmail
argument_list|()
argument_list|)
expr_stmt|;
name|dialog
operator|.
name|setEscapeToHide
argument_list|(
literal|true
argument_list|)
expr_stmt|;
name|buttons
operator|.
name|addButton
argument_list|(
literal|"send"
argument_list|,
name|MESSAGES
operator|.
name|emailSend
argument_list|()
argument_list|,
operator|new
name|ClickHandler
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|void
name|onClick
parameter_list|(
name|ClickEvent
name|event
parameter_list|)
block|{
name|List
argument_list|<
name|Long
argument_list|>
name|studentIds
init|=
operator|new
name|ArrayList
argument_list|<
name|Long
argument_list|>
argument_list|()
decl_stmt|;
for|for
control|(
name|int
name|row
init|=
literal|0
init|;
name|row
operator|<
name|iStudentTable
operator|.
name|getRowCount
argument_list|()
condition|;
name|row
operator|++
control|)
block|{
name|StudentInfo
name|i
init|=
name|iStudentTable
operator|.
name|getData
argument_list|(
name|row
argument_list|)
decl_stmt|;
if|if
condition|(
name|i
operator|!=
literal|null
operator|&&
name|i
operator|.
name|getStudent
argument_list|()
operator|!=
literal|null
operator|&&
name|iSelectedStudentIds
operator|.
name|contains
argument_list|(
name|i
operator|.
name|getStudent
argument_list|()
operator|.
name|getId
argument_list|()
argument_list|)
condition|)
block|{
name|studentIds
operator|.
name|add
argument_list|(
name|i
operator|.
name|getStudent
argument_list|()
operator|.
name|getId
argument_list|()
argument_list|)
expr_stmt|;
name|iStudentTable
operator|.
name|setWidget
argument_list|(
name|row
argument_list|,
name|iStudentTable
operator|.
name|getCellCount
argument_list|(
name|row
argument_list|)
operator|-
literal|1
argument_list|,
operator|new
name|Image
argument_list|(
name|RESOURCES
operator|.
name|loading_small
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|}
name|dialog
operator|.
name|hide
argument_list|()
expr_stmt|;
name|sendEmail
argument_list|(
name|studentIds
operator|.
name|iterator
argument_list|()
argument_list|,
name|iSubject
operator|.
name|getText
argument_list|()
argument_list|,
name|iMessage
operator|.
name|getText
argument_list|()
argument_list|,
name|iCC
operator|.
name|getText
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
name|buttons
operator|.
name|addButton
argument_list|(
literal|"close"
argument_list|,
name|MESSAGES
operator|.
name|buttonClose
argument_list|()
argument_list|,
operator|new
name|ClickHandler
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|void
name|onClick
parameter_list|(
name|ClickEvent
name|event
parameter_list|)
block|{
name|dialog
operator|.
name|hide
argument_list|()
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
name|dialog
operator|.
name|center
argument_list|()
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
name|hSelect
operator|.
name|addOperation
argument_list|(
operator|new
name|Operation
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|String
name|getName
parameter_list|()
block|{
return|return
name|MESSAGES
operator|.
name|massCancel
argument_list|()
return|;
block|}
annotation|@
name|Override
specifier|public
name|boolean
name|hasSeparator
parameter_list|()
block|{
return|return
literal|false
return|;
block|}
annotation|@
name|Override
specifier|public
name|boolean
name|isApplicable
parameter_list|()
block|{
return|return
name|iSelectedStudentIds
operator|.
name|size
argument_list|()
operator|>
literal|0
operator|&&
name|iProperties
operator|!=
literal|null
operator|&&
name|iProperties
operator|.
name|isMassCancel
argument_list|()
return|;
block|}
annotation|@
name|Override
specifier|public
name|void
name|execute
parameter_list|()
block|{
name|SimpleForm
name|sf
init|=
operator|new
name|SimpleForm
argument_list|()
decl_stmt|;
specifier|final
name|UniTimeHeaderPanel
name|buttons
init|=
operator|new
name|UniTimeHeaderPanel
argument_list|()
decl_stmt|;
name|sf
operator|.
name|removeStyleName
argument_list|(
literal|"unitime-NotPrintableBottomLine"
argument_list|)
expr_stmt|;
if|if
condition|(
name|iSubject
operator|.
name|getText
argument_list|()
operator|.
name|isEmpty
argument_list|()
operator|||
name|iSubject
operator|.
name|getText
argument_list|()
operator|.
name|equals
argument_list|(
name|MESSAGES
operator|.
name|defaulSubject
argument_list|()
argument_list|)
condition|)
name|iSubject
operator|.
name|setText
argument_list|(
name|MESSAGES
operator|.
name|defaulSubjectMassCancel
argument_list|()
argument_list|)
expr_stmt|;
name|sf
operator|.
name|addRow
argument_list|(
name|MESSAGES
operator|.
name|emailSubject
argument_list|()
argument_list|,
name|iSubject
argument_list|)
expr_stmt|;
name|sf
operator|.
name|addRow
argument_list|(
name|MESSAGES
operator|.
name|emailCC
argument_list|()
argument_list|,
name|iCC
argument_list|)
expr_stmt|;
name|sf
operator|.
name|addRow
argument_list|(
name|MESSAGES
operator|.
name|emailBody
argument_list|()
argument_list|,
name|iMessage
argument_list|)
expr_stmt|;
name|sf
operator|.
name|addRow
argument_list|(
name|MESSAGES
operator|.
name|newStatus
argument_list|()
argument_list|,
name|iStatus
argument_list|)
expr_stmt|;
name|sf
operator|.
name|addBottomRow
argument_list|(
name|buttons
argument_list|)
expr_stmt|;
specifier|final
name|UniTimeDialogBox
name|dialog
init|=
operator|new
name|UniTimeDialogBox
argument_list|(
literal|true
argument_list|,
literal|false
argument_list|)
decl_stmt|;
name|dialog
operator|.
name|setWidget
argument_list|(
name|sf
argument_list|)
expr_stmt|;
name|dialog
operator|.
name|setText
argument_list|(
name|MESSAGES
operator|.
name|massCancel
argument_list|()
argument_list|)
expr_stmt|;
name|dialog
operator|.
name|setEscapeToHide
argument_list|(
literal|true
argument_list|)
expr_stmt|;
name|buttons
operator|.
name|addButton
argument_list|(
literal|"cancel"
argument_list|,
name|MESSAGES
operator|.
name|buttonMassCancel
argument_list|()
argument_list|,
operator|new
name|ClickHandler
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|void
name|onClick
parameter_list|(
name|ClickEvent
name|event
parameter_list|)
block|{
if|if
condition|(
operator|!
name|Window
operator|.
name|confirm
argument_list|(
name|MESSAGES
operator|.
name|massCancelConfirmation
argument_list|()
argument_list|)
condition|)
block|{
name|dialog
operator|.
name|hide
argument_list|()
expr_stmt|;
return|return;
block|}
specifier|final
name|List
argument_list|<
name|Long
argument_list|>
name|studentIds
init|=
operator|new
name|ArrayList
argument_list|<
name|Long
argument_list|>
argument_list|()
decl_stmt|;
for|for
control|(
name|int
name|row
init|=
literal|0
init|;
name|row
operator|<
name|iStudentTable
operator|.
name|getRowCount
argument_list|()
condition|;
name|row
operator|++
control|)
block|{
name|StudentInfo
name|i
init|=
name|iStudentTable
operator|.
name|getData
argument_list|(
name|row
argument_list|)
decl_stmt|;
if|if
condition|(
name|i
operator|!=
literal|null
operator|&&
name|i
operator|.
name|getStudent
argument_list|()
operator|!=
literal|null
operator|&&
name|iSelectedStudentIds
operator|.
name|contains
argument_list|(
name|i
operator|.
name|getStudent
argument_list|()
operator|.
name|getId
argument_list|()
argument_list|)
condition|)
block|{
name|studentIds
operator|.
name|add
argument_list|(
name|i
operator|.
name|getStudent
argument_list|()
operator|.
name|getId
argument_list|()
argument_list|)
expr_stmt|;
name|iStudentTable
operator|.
name|setWidget
argument_list|(
name|row
argument_list|,
name|iStudentTable
operator|.
name|getCellCount
argument_list|(
name|row
argument_list|)
operator|-
literal|1
argument_list|,
operator|new
name|Image
argument_list|(
name|RESOURCES
operator|.
name|loading_small
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|}
name|dialog
operator|.
name|hide
argument_list|()
expr_stmt|;
name|LoadingWidget
operator|.
name|getInstance
argument_list|()
operator|.
name|show
argument_list|(
name|MESSAGES
operator|.
name|massCanceling
argument_list|()
argument_list|)
expr_stmt|;
name|iSectioningService
operator|.
name|massCancel
argument_list|(
name|studentIds
argument_list|,
name|iStatus
operator|.
name|getWidget
argument_list|()
operator|.
name|getValue
argument_list|(
name|iStatus
operator|.
name|getWidget
argument_list|()
operator|.
name|getSelectedIndex
argument_list|()
argument_list|)
argument_list|,
name|iSubject
operator|.
name|getText
argument_list|()
argument_list|,
name|iMessage
operator|.
name|getText
argument_list|()
argument_list|,
name|iCC
operator|.
name|getText
argument_list|()
argument_list|,
operator|new
name|AsyncCallback
argument_list|<
name|Boolean
argument_list|>
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|void
name|onFailure
parameter_list|(
name|Throwable
name|caught
parameter_list|)
block|{
name|LoadingWidget
operator|.
name|getInstance
argument_list|()
operator|.
name|hide
argument_list|()
expr_stmt|;
name|UniTimeNotifications
operator|.
name|error
argument_list|(
name|caught
argument_list|)
expr_stmt|;
for|for
control|(
name|int
name|row
init|=
literal|0
init|;
name|row
operator|<
name|iStudentTable
operator|.
name|getRowCount
argument_list|()
condition|;
name|row
operator|++
control|)
block|{
name|StudentInfo
name|i
init|=
name|iStudentTable
operator|.
name|getData
argument_list|(
name|row
argument_list|)
decl_stmt|;
if|if
condition|(
name|i
operator|!=
literal|null
operator|&&
name|i
operator|.
name|getStudent
argument_list|()
operator|!=
literal|null
operator|&&
name|studentIds
operator|.
name|contains
argument_list|(
name|i
operator|.
name|getStudent
argument_list|()
operator|.
name|getId
argument_list|()
argument_list|)
condition|)
block|{
name|HTML
name|error
init|=
operator|new
name|HTML
argument_list|(
name|caught
operator|.
name|getMessage
argument_list|()
argument_list|)
decl_stmt|;
name|error
operator|.
name|setStyleName
argument_list|(
literal|"unitime-ErrorMessage"
argument_list|)
expr_stmt|;
name|iStudentTable
operator|.
name|setWidget
argument_list|(
name|row
argument_list|,
name|iStudentTable
operator|.
name|getCellCount
argument_list|(
name|row
argument_list|)
operator|-
literal|1
argument_list|,
name|error
argument_list|)
expr_stmt|;
name|i
operator|.
name|setEmailDate
argument_list|(
literal|null
argument_list|)
expr_stmt|;
block|}
block|}
block|}
annotation|@
name|Override
specifier|public
name|void
name|onSuccess
parameter_list|(
name|Boolean
name|result
parameter_list|)
block|{
name|LoadingWidget
operator|.
name|getInstance
argument_list|()
operator|.
name|hide
argument_list|()
expr_stmt|;
name|loadData
argument_list|()
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
name|buttons
operator|.
name|addButton
argument_list|(
literal|"close"
argument_list|,
name|MESSAGES
operator|.
name|buttonClose
argument_list|()
argument_list|,
operator|new
name|ClickHandler
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|void
name|onClick
parameter_list|(
name|ClickEvent
name|event
parameter_list|)
block|{
name|dialog
operator|.
name|hide
argument_list|()
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
name|dialog
operator|.
name|center
argument_list|()
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
name|hSelect
operator|.
name|addOperation
argument_list|(
operator|new
name|Operation
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|String
name|getName
parameter_list|()
block|{
return|return
name|MESSAGES
operator|.
name|requestStudentUpdate
argument_list|()
return|;
block|}
annotation|@
name|Override
specifier|public
name|boolean
name|hasSeparator
parameter_list|()
block|{
return|return
literal|true
return|;
block|}
annotation|@
name|Override
specifier|public
name|boolean
name|isApplicable
parameter_list|()
block|{
return|return
name|iSelectedStudentIds
operator|.
name|size
argument_list|()
operator|>
literal|0
operator|&&
name|iProperties
operator|!=
literal|null
operator|&&
name|iProperties
operator|.
name|isRequestUpdate
argument_list|()
return|;
block|}
annotation|@
name|Override
specifier|public
name|void
name|execute
parameter_list|()
block|{
name|List
argument_list|<
name|Long
argument_list|>
name|studentIds
init|=
operator|new
name|ArrayList
argument_list|<
name|Long
argument_list|>
argument_list|(
name|iSelectedStudentIds
argument_list|)
decl_stmt|;
name|LoadingWidget
operator|.
name|getInstance
argument_list|()
operator|.
name|show
argument_list|(
name|MESSAGES
operator|.
name|requestingStudentUpdate
argument_list|()
argument_list|)
expr_stmt|;
name|iSectioningService
operator|.
name|requestStudentUpdate
argument_list|(
name|studentIds
argument_list|,
operator|new
name|AsyncCallback
argument_list|<
name|Boolean
argument_list|>
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|void
name|onFailure
parameter_list|(
name|Throwable
name|caught
parameter_list|)
block|{
name|LoadingWidget
operator|.
name|getInstance
argument_list|()
operator|.
name|hide
argument_list|()
expr_stmt|;
name|UniTimeNotifications
operator|.
name|error
argument_list|(
name|caught
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Override
specifier|public
name|void
name|onSuccess
parameter_list|(
name|Boolean
name|result
parameter_list|)
block|{
name|LoadingWidget
operator|.
name|getInstance
argument_list|()
operator|.
name|hide
argument_list|()
expr_stmt|;
name|UniTimeNotifications
operator|.
name|info
argument_list|(
name|MESSAGES
operator|.
name|requestStudentUpdateSuccess
argument_list|()
argument_list|)
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
if|if
condition|(
name|iStates
operator|!=
literal|null
condition|)
block|{
for|for
control|(
specifier|final
name|String
name|ref
range|:
operator|new
name|TreeSet
argument_list|<
name|String
argument_list|>
argument_list|(
name|iStates
operator|.
name|keySet
argument_list|()
argument_list|)
control|)
block|{
name|hSelect
operator|.
name|addOperation
argument_list|(
operator|new
name|Operation
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|String
name|getName
parameter_list|()
block|{
return|return
name|MESSAGES
operator|.
name|changeStatusTo
argument_list|(
name|iStates
operator|.
name|get
argument_list|(
name|ref
argument_list|)
argument_list|)
return|;
block|}
annotation|@
name|Override
specifier|public
name|boolean
name|hasSeparator
parameter_list|()
block|{
return|return
literal|""
operator|.
name|equals
argument_list|(
name|ref
argument_list|)
return|;
block|}
annotation|@
name|Override
specifier|public
name|boolean
name|isApplicable
parameter_list|()
block|{
return|return
name|iSelectedStudentIds
operator|.
name|size
argument_list|()
operator|>
literal|0
operator|&&
name|iProperties
operator|!=
literal|null
operator|&&
name|iProperties
operator|.
name|isChangeStatus
argument_list|()
return|;
block|}
annotation|@
name|Override
specifier|public
name|void
name|execute
parameter_list|()
block|{
name|List
argument_list|<
name|Long
argument_list|>
name|studentIds
init|=
operator|new
name|ArrayList
argument_list|<
name|Long
argument_list|>
argument_list|(
name|iSelectedStudentIds
argument_list|)
decl_stmt|;
name|LoadingWidget
operator|.
name|getInstance
argument_list|()
operator|.
name|show
argument_list|(
name|MESSAGES
operator|.
name|changingStatusTo
argument_list|(
name|iStates
operator|.
name|get
argument_list|(
name|ref
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|iSectioningService
operator|.
name|changeStatus
argument_list|(
name|studentIds
argument_list|,
literal|null
argument_list|,
name|ref
argument_list|,
operator|new
name|AsyncCallback
argument_list|<
name|Boolean
argument_list|>
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|void
name|onFailure
parameter_list|(
name|Throwable
name|caught
parameter_list|)
block|{
name|LoadingWidget
operator|.
name|getInstance
argument_list|()
operator|.
name|hide
argument_list|()
expr_stmt|;
name|UniTimeNotifications
operator|.
name|error
argument_list|(
name|caught
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Override
specifier|public
name|void
name|onSuccess
parameter_list|(
name|Boolean
name|result
parameter_list|)
block|{
for|for
control|(
name|int
name|row
init|=
literal|0
init|;
name|row
operator|<
name|iStudentTable
operator|.
name|getRowCount
argument_list|()
condition|;
name|row
operator|++
control|)
block|{
name|StudentInfo
name|i
init|=
name|iStudentTable
operator|.
name|getData
argument_list|(
name|row
argument_list|)
decl_stmt|;
if|if
condition|(
name|i
operator|!=
literal|null
operator|&&
name|i
operator|.
name|getStudent
argument_list|()
operator|!=
literal|null
operator|&&
operator|(
operator|(
name|CheckBox
operator|)
name|iStudentTable
operator|.
name|getWidget
argument_list|(
name|row
argument_list|,
literal|0
argument_list|)
operator|)
operator|.
name|getValue
argument_list|()
condition|)
block|{
name|i
operator|.
name|setStatus
argument_list|(
name|ref
argument_list|)
expr_stmt|;
operator|(
operator|(
name|HTML
operator|)
name|iStudentTable
operator|.
name|getWidget
argument_list|(
name|row
argument_list|,
name|iStatusColumn
argument_list|)
operator|)
operator|.
name|setHTML
argument_list|(
name|ref
argument_list|)
expr_stmt|;
block|}
block|}
name|LoadingWidget
operator|.
name|getInstance
argument_list|()
operator|.
name|hide
argument_list|()
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
block|}
block|}
name|hSelect
operator|.
name|addOperation
argument_list|(
operator|new
name|Operation
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|String
name|getName
parameter_list|()
block|{
return|return
name|MESSAGES
operator|.
name|setStudentNote
argument_list|()
return|;
block|}
annotation|@
name|Override
specifier|public
name|boolean
name|hasSeparator
parameter_list|()
block|{
return|return
literal|true
return|;
block|}
annotation|@
name|Override
specifier|public
name|boolean
name|isApplicable
parameter_list|()
block|{
return|return
name|iOnline
operator|&&
name|iSelectedStudentIds
operator|.
name|size
argument_list|()
operator|>
literal|0
operator|&&
name|iProperties
operator|!=
literal|null
operator|&&
name|iProperties
operator|.
name|isChangeStatus
argument_list|()
return|;
block|}
annotation|@
name|Override
specifier|public
name|void
name|execute
parameter_list|()
block|{
name|SimpleForm
name|sf
init|=
operator|new
name|SimpleForm
argument_list|()
decl_stmt|;
specifier|final
name|UniTimeHeaderPanel
name|buttons
init|=
operator|new
name|UniTimeHeaderPanel
argument_list|()
decl_stmt|;
name|sf
operator|.
name|removeStyleName
argument_list|(
literal|"unitime-NotPrintableBottomLine"
argument_list|)
expr_stmt|;
name|sf
operator|.
name|addRow
argument_list|(
name|MESSAGES
operator|.
name|propNote
argument_list|()
argument_list|,
name|iNote
argument_list|)
expr_stmt|;
name|sf
operator|.
name|addRow
argument_list|(
name|MESSAGES
operator|.
name|newStatus
argument_list|()
argument_list|,
name|iStatus
argument_list|)
expr_stmt|;
name|sf
operator|.
name|addBottomRow
argument_list|(
name|buttons
argument_list|)
expr_stmt|;
specifier|final
name|UniTimeDialogBox
name|dialog
init|=
operator|new
name|UniTimeDialogBox
argument_list|(
literal|true
argument_list|,
literal|false
argument_list|)
decl_stmt|;
name|dialog
operator|.
name|setWidget
argument_list|(
name|sf
argument_list|)
expr_stmt|;
name|dialog
operator|.
name|setText
argument_list|(
name|MESSAGES
operator|.
name|setStudentNote
argument_list|()
argument_list|)
expr_stmt|;
name|dialog
operator|.
name|setEscapeToHide
argument_list|(
literal|true
argument_list|)
expr_stmt|;
name|buttons
operator|.
name|addButton
argument_list|(
literal|"update"
argument_list|,
name|MESSAGES
operator|.
name|buttonSetNote
argument_list|()
argument_list|,
operator|new
name|ClickHandler
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|void
name|onClick
parameter_list|(
name|ClickEvent
name|event
parameter_list|)
block|{
name|List
argument_list|<
name|Long
argument_list|>
name|studentIds
init|=
operator|new
name|ArrayList
argument_list|<
name|Long
argument_list|>
argument_list|(
name|iSelectedStudentIds
argument_list|)
decl_stmt|;
name|dialog
operator|.
name|hide
argument_list|()
expr_stmt|;
name|LoadingWidget
operator|.
name|getInstance
argument_list|()
operator|.
name|show
argument_list|(
name|MESSAGES
operator|.
name|changingStudentNote
argument_list|()
argument_list|)
expr_stmt|;
specifier|final
name|String
name|status
init|=
name|iStatus
operator|.
name|getWidget
argument_list|()
operator|.
name|getValue
argument_list|(
name|iStatus
operator|.
name|getWidget
argument_list|()
operator|.
name|getSelectedIndex
argument_list|()
argument_list|)
decl_stmt|;
specifier|final
name|String
name|note
init|=
name|iNote
operator|.
name|getText
argument_list|()
decl_stmt|;
name|iSectioningService
operator|.
name|changeStatus
argument_list|(
name|studentIds
argument_list|,
name|note
argument_list|,
name|status
argument_list|,
operator|new
name|AsyncCallback
argument_list|<
name|Boolean
argument_list|>
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|void
name|onFailure
parameter_list|(
name|Throwable
name|caught
parameter_list|)
block|{
name|LoadingWidget
operator|.
name|getInstance
argument_list|()
operator|.
name|hide
argument_list|()
expr_stmt|;
name|UniTimeNotifications
operator|.
name|error
argument_list|(
name|caught
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Override
specifier|public
name|void
name|onSuccess
parameter_list|(
name|Boolean
name|result
parameter_list|)
block|{
for|for
control|(
name|int
name|row
init|=
literal|0
init|;
name|row
operator|<
name|iStudentTable
operator|.
name|getRowCount
argument_list|()
condition|;
name|row
operator|++
control|)
block|{
name|StudentInfo
name|i
init|=
name|iStudentTable
operator|.
name|getData
argument_list|(
name|row
argument_list|)
decl_stmt|;
if|if
condition|(
name|i
operator|!=
literal|null
operator|&&
name|i
operator|.
name|getStudent
argument_list|()
operator|!=
literal|null
operator|&&
operator|(
operator|(
name|CheckBox
operator|)
name|iStudentTable
operator|.
name|getWidget
argument_list|(
name|row
argument_list|,
literal|0
argument_list|)
operator|)
operator|.
name|getValue
argument_list|()
condition|)
block|{
if|if
condition|(
operator|!
literal|"-"
operator|.
name|equals
argument_list|(
name|status
argument_list|)
condition|)
block|{
name|i
operator|.
name|setStatus
argument_list|(
name|status
argument_list|)
expr_stmt|;
operator|(
operator|(
name|HTML
operator|)
name|iStudentTable
operator|.
name|getWidget
argument_list|(
name|row
argument_list|,
name|iStatusColumn
argument_list|)
operator|)
operator|.
name|setHTML
argument_list|(
name|status
argument_list|)
expr_stmt|;
block|}
name|i
operator|.
name|setNote
argument_list|(
name|note
argument_list|)
expr_stmt|;
if|if
condition|(
name|iNoteColumn
operator|>=
literal|0
condition|)
block|{
name|HTML
name|w
init|=
operator|(
operator|(
name|HTML
operator|)
name|iStudentTable
operator|.
name|getWidget
argument_list|(
name|row
argument_list|,
name|iNoteColumn
argument_list|)
operator|)
decl_stmt|;
name|w
operator|.
name|setHTML
argument_list|(
name|note
argument_list|)
expr_stmt|;
name|w
operator|.
name|setTitle
argument_list|(
name|w
operator|.
name|getText
argument_list|()
argument_list|)
expr_stmt|;
block|}
block|}
block|}
name|LoadingWidget
operator|.
name|getInstance
argument_list|()
operator|.
name|hide
argument_list|()
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
name|buttons
operator|.
name|addButton
argument_list|(
literal|"close"
argument_list|,
name|MESSAGES
operator|.
name|buttonClose
argument_list|()
argument_list|,
operator|new
name|ClickHandler
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|void
name|onClick
parameter_list|(
name|ClickEvent
name|event
parameter_list|)
block|{
name|dialog
operator|.
name|hide
argument_list|()
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
name|dialog
operator|.
name|center
argument_list|()
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
block|}
name|boolean
name|hasExtId
init|=
literal|false
decl_stmt|;
for|for
control|(
name|ClassAssignmentInterface
operator|.
name|StudentInfo
name|e
range|:
name|result
control|)
block|{
if|if
condition|(
name|e
operator|.
name|getStudent
argument_list|()
operator|!=
literal|null
operator|&&
name|e
operator|.
name|getStudent
argument_list|()
operator|.
name|isCanShowExternalId
argument_list|()
condition|)
block|{
name|hasExtId
operator|=
literal|true
expr_stmt|;
break|break;
block|}
block|}
name|UniTimeTableHeader
name|hExtId
init|=
literal|null
decl_stmt|;
if|if
condition|(
name|hasExtId
condition|)
block|{
name|hExtId
operator|=
operator|new
name|UniTimeTableHeader
argument_list|(
name|MESSAGES
operator|.
name|colStudentExternalId
argument_list|()
argument_list|)
expr_stmt|;
name|header
operator|.
name|add
argument_list|(
name|hExtId
argument_list|)
expr_stmt|;
name|addSortOperation
argument_list|(
name|hExtId
argument_list|,
name|StudentComparator
operator|.
name|SortBy
operator|.
name|EXTERNAL_ID
argument_list|,
name|MESSAGES
operator|.
name|colStudentExternalId
argument_list|()
argument_list|)
expr_stmt|;
block|}
name|UniTimeTableHeader
name|hStudent
init|=
operator|new
name|UniTimeTableHeader
argument_list|(
name|MESSAGES
operator|.
name|colStudent
argument_list|()
argument_list|)
decl_stmt|;
name|header
operator|.
name|add
argument_list|(
name|hStudent
argument_list|)
expr_stmt|;
name|addSortOperation
argument_list|(
name|hStudent
argument_list|,
name|StudentComparator
operator|.
name|SortBy
operator|.
name|STUDENT
argument_list|,
name|MESSAGES
operator|.
name|colStudent
argument_list|()
argument_list|)
expr_stmt|;
name|UniTimeTableHeader
name|hTotal
init|=
operator|new
name|UniTimeTableHeader
argument_list|(
literal|"&nbsp;"
argument_list|)
decl_stmt|;
name|header
operator|.
name|add
argument_list|(
name|hTotal
argument_list|)
expr_stmt|;
name|boolean
name|hasEnrollment
init|=
literal|false
decl_stmt|,
name|hasWaitList
init|=
literal|false
decl_stmt|,
name|hasArea
init|=
literal|false
decl_stmt|,
name|hasMajor
init|=
literal|false
decl_stmt|,
name|hasGroup
init|=
literal|false
decl_stmt|,
name|hasAcmd
init|=
literal|false
decl_stmt|,
name|hasReservation
init|=
literal|false
decl_stmt|,
name|hasRequestedDate
init|=
literal|false
decl_stmt|,
name|hasEnrolledDate
init|=
literal|false
decl_stmt|,
name|hasConsent
init|=
literal|false
decl_stmt|,
name|hasCredit
init|=
literal|false
decl_stmt|,
name|hasDistances
init|=
literal|false
decl_stmt|,
name|hasOverlaps
init|=
literal|false
decl_stmt|,
name|hasFreeTimeOverlaps
init|=
literal|false
decl_stmt|,
name|hasPrefIMConfs
init|=
literal|false
decl_stmt|,
name|hasPrefSecConfs
init|=
literal|false
decl_stmt|,
name|hasNote
init|=
literal|false
decl_stmt|,
name|hasEmailed
init|=
literal|false
decl_stmt|;
for|for
control|(
name|ClassAssignmentInterface
operator|.
name|StudentInfo
name|e
range|:
name|result
control|)
block|{
if|if
condition|(
name|e
operator|.
name|getStudent
argument_list|()
operator|==
literal|null
condition|)
continue|continue;
comment|// if (e.getStatus() != null) hasStatus = true;
if|if
condition|(
name|e
operator|.
name|getTotalEnrollment
argument_list|()
operator|!=
literal|null
operator|&&
name|e
operator|.
name|getTotalEnrollment
argument_list|()
operator|>
literal|0
condition|)
name|hasEnrollment
operator|=
literal|true
expr_stmt|;
if|if
condition|(
name|e
operator|.
name|getTotalUnassigned
argument_list|()
operator|!=
literal|null
operator|&&
name|e
operator|.
name|getTotalUnassigned
argument_list|()
operator|>
literal|0
condition|)
name|hasWaitList
operator|=
literal|true
expr_stmt|;
if|if
condition|(
name|e
operator|.
name|getStudent
argument_list|()
operator|.
name|hasArea
argument_list|()
condition|)
name|hasArea
operator|=
literal|true
expr_stmt|;
if|if
condition|(
name|e
operator|.
name|getStudent
argument_list|()
operator|.
name|hasMajor
argument_list|()
condition|)
name|hasMajor
operator|=
literal|true
expr_stmt|;
if|if
condition|(
name|e
operator|.
name|getStudent
argument_list|()
operator|.
name|hasGroup
argument_list|()
condition|)
name|hasGroup
operator|=
literal|true
expr_stmt|;
if|if
condition|(
name|e
operator|.
name|getStudent
argument_list|()
operator|.
name|hasAccommodation
argument_list|()
condition|)
name|hasAcmd
operator|=
literal|true
expr_stmt|;
if|if
condition|(
name|e
operator|.
name|getTotalReservation
argument_list|()
operator|!=
literal|null
operator|&&
name|e
operator|.
name|getTotalReservation
argument_list|()
operator|>
literal|0
condition|)
name|hasReservation
operator|=
literal|true
expr_stmt|;
if|if
condition|(
name|e
operator|.
name|getRequestedDate
argument_list|()
operator|!=
literal|null
condition|)
name|hasRequestedDate
operator|=
literal|true
expr_stmt|;
if|if
condition|(
name|e
operator|.
name|getEnrolledDate
argument_list|()
operator|!=
literal|null
condition|)
name|hasEnrolledDate
operator|=
literal|true
expr_stmt|;
comment|// if (e.getEmailDate() != null) hasEmailDate = true;
if|if
condition|(
name|e
operator|.
name|getTotalConsentNeeded
argument_list|()
operator|!=
literal|null
operator|&&
name|e
operator|.
name|getTotalConsentNeeded
argument_list|()
operator|>
literal|0
condition|)
name|hasConsent
operator|=
literal|true
expr_stmt|;
if|if
condition|(
name|e
operator|.
name|hasTotalCredit
argument_list|()
operator|||
name|e
operator|.
name|hasTotalRequestCredit
argument_list|()
condition|)
name|hasCredit
operator|=
literal|true
expr_stmt|;
if|if
condition|(
name|e
operator|.
name|hasTotalDistanceConflicts
argument_list|()
condition|)
name|hasDistances
operator|=
literal|true
expr_stmt|;
if|if
condition|(
name|e
operator|.
name|hasOverlappingMinutes
argument_list|()
condition|)
name|hasOverlaps
operator|=
literal|true
expr_stmt|;
if|if
condition|(
name|e
operator|.
name|hasFreeTimeOverlappingMins
argument_list|()
condition|)
name|hasFreeTimeOverlaps
operator|=
literal|true
expr_stmt|;
if|if
condition|(
name|e
operator|.
name|hasTotalPrefInstrMethConflict
argument_list|()
condition|)
name|hasPrefIMConfs
operator|=
literal|true
expr_stmt|;
if|if
condition|(
name|e
operator|.
name|hasTotalPrefSectionConflict
argument_list|()
condition|)
name|hasPrefSecConfs
operator|=
literal|true
expr_stmt|;
if|if
condition|(
name|e
operator|.
name|hasNote
argument_list|()
condition|)
name|hasNote
operator|=
literal|true
expr_stmt|;
if|if
condition|(
name|e
operator|.
name|getEmailDate
argument_list|()
operator|!=
literal|null
condition|)
name|hasEmailed
operator|=
literal|true
expr_stmt|;
block|}
if|if
condition|(
name|iProperties
operator|!=
literal|null
operator|&&
name|iProperties
operator|.
name|isChangeStatus
argument_list|()
condition|)
name|hasNote
operator|=
literal|true
expr_stmt|;
name|UniTimeTableHeader
name|hArea
init|=
literal|null
decl_stmt|,
name|hClasf
init|=
literal|null
decl_stmt|;
if|if
condition|(
name|hasArea
condition|)
block|{
name|hArea
operator|=
operator|new
name|UniTimeTableHeader
argument_list|(
name|MESSAGES
operator|.
name|colArea
argument_list|()
argument_list|)
expr_stmt|;
comment|//hArea.setWidth("100px");
name|header
operator|.
name|add
argument_list|(
name|hArea
argument_list|)
expr_stmt|;
name|addSortOperation
argument_list|(
name|hArea
argument_list|,
name|StudentComparator
operator|.
name|SortBy
operator|.
name|AREA
argument_list|,
name|MESSAGES
operator|.
name|colArea
argument_list|()
argument_list|)
expr_stmt|;
name|hClasf
operator|=
operator|new
name|UniTimeTableHeader
argument_list|(
name|MESSAGES
operator|.
name|colClassification
argument_list|()
argument_list|)
expr_stmt|;
comment|//hClasf.setWidth("100px");
name|header
operator|.
name|add
argument_list|(
name|hClasf
argument_list|)
expr_stmt|;
name|addSortOperation
argument_list|(
name|hClasf
argument_list|,
name|StudentComparator
operator|.
name|SortBy
operator|.
name|CLASSIFICATION
argument_list|,
name|MESSAGES
operator|.
name|colClassification
argument_list|()
argument_list|)
expr_stmt|;
block|}
name|UniTimeTableHeader
name|hMajor
init|=
literal|null
decl_stmt|;
if|if
condition|(
name|hasMajor
condition|)
block|{
name|hMajor
operator|=
operator|new
name|UniTimeTableHeader
argument_list|(
name|MESSAGES
operator|.
name|colMajor
argument_list|()
argument_list|)
expr_stmt|;
comment|//hMajor.setWidth("100px");
name|header
operator|.
name|add
argument_list|(
name|hMajor
argument_list|)
expr_stmt|;
name|addSortOperation
argument_list|(
name|hMajor
argument_list|,
name|StudentComparator
operator|.
name|SortBy
operator|.
name|MAJOR
argument_list|,
name|MESSAGES
operator|.
name|colMajor
argument_list|()
argument_list|)
expr_stmt|;
block|}
name|UniTimeTableHeader
name|hGroup
init|=
literal|null
decl_stmt|;
if|if
condition|(
name|hasGroup
condition|)
block|{
name|hGroup
operator|=
operator|new
name|UniTimeTableHeader
argument_list|(
name|MESSAGES
operator|.
name|colGroup
argument_list|()
argument_list|)
expr_stmt|;
comment|//hGroup.setWidth("100px");
name|header
operator|.
name|add
argument_list|(
name|hGroup
argument_list|)
expr_stmt|;
name|addSortOperation
argument_list|(
name|hGroup
argument_list|,
name|StudentComparator
operator|.
name|SortBy
operator|.
name|GROUP
argument_list|,
name|MESSAGES
operator|.
name|colGroup
argument_list|()
argument_list|)
expr_stmt|;
block|}
name|UniTimeTableHeader
name|hAcmd
init|=
literal|null
decl_stmt|;
if|if
condition|(
name|hasAcmd
condition|)
block|{
name|hAcmd
operator|=
operator|new
name|UniTimeTableHeader
argument_list|(
name|MESSAGES
operator|.
name|colAccommodation
argument_list|()
argument_list|)
expr_stmt|;
comment|//hGroup.setWidth("100px");
name|header
operator|.
name|add
argument_list|(
name|hAcmd
argument_list|)
expr_stmt|;
name|addSortOperation
argument_list|(
name|hAcmd
argument_list|,
name|StudentComparator
operator|.
name|SortBy
operator|.
name|ACCOMODATION
argument_list|,
name|MESSAGES
operator|.
name|colAccommodation
argument_list|()
argument_list|)
expr_stmt|;
block|}
name|iStatusColumn
operator|=
name|header
operator|.
name|size
argument_list|()
operator|-
literal|1
expr_stmt|;
name|UniTimeTableHeader
name|hStatus
init|=
operator|new
name|UniTimeTableHeader
argument_list|(
name|MESSAGES
operator|.
name|colStatus
argument_list|()
argument_list|)
decl_stmt|;
comment|//hMajor.setWidth("100px");
name|header
operator|.
name|add
argument_list|(
name|hStatus
argument_list|)
expr_stmt|;
name|addSortOperation
argument_list|(
name|hStatus
argument_list|,
name|StudentComparator
operator|.
name|SortBy
operator|.
name|STATUS
argument_list|,
name|MESSAGES
operator|.
name|colStatus
argument_list|()
argument_list|)
expr_stmt|;
name|UniTimeTableHeader
name|hEnrollment
init|=
literal|null
decl_stmt|;
if|if
condition|(
name|hasEnrollment
condition|)
block|{
name|hEnrollment
operator|=
operator|new
name|UniTimeTableHeader
argument_list|(
name|MESSAGES
operator|.
name|colEnrollment
argument_list|()
argument_list|)
expr_stmt|;
name|header
operator|.
name|add
argument_list|(
name|hEnrollment
argument_list|)
expr_stmt|;
name|addSortOperation
argument_list|(
name|hEnrollment
argument_list|,
name|StudentComparator
operator|.
name|SortBy
operator|.
name|ENROLLMENT
argument_list|,
name|MESSAGES
operator|.
name|colEnrollment
argument_list|()
argument_list|)
expr_stmt|;
block|}
name|UniTimeTableHeader
name|hWaitlist
init|=
literal|null
decl_stmt|;
if|if
condition|(
name|hasWaitList
condition|)
block|{
name|hWaitlist
operator|=
operator|new
name|UniTimeTableHeader
argument_list|(
name|MESSAGES
operator|.
name|colWaitListed
argument_list|()
argument_list|)
expr_stmt|;
name|header
operator|.
name|add
argument_list|(
name|hWaitlist
argument_list|)
expr_stmt|;
name|addSortOperation
argument_list|(
name|hWaitlist
argument_list|,
name|StudentComparator
operator|.
name|SortBy
operator|.
name|WAITLIST
argument_list|,
name|MESSAGES
operator|.
name|colWaitListed
argument_list|()
argument_list|)
expr_stmt|;
block|}
name|UniTimeTableHeader
name|hReservation
init|=
literal|null
decl_stmt|;
if|if
condition|(
name|hasReservation
condition|)
block|{
name|hReservation
operator|=
operator|new
name|UniTimeTableHeader
argument_list|(
name|MESSAGES
operator|.
name|colReservation
argument_list|()
argument_list|)
expr_stmt|;
name|header
operator|.
name|add
argument_list|(
name|hReservation
argument_list|)
expr_stmt|;
name|addSortOperation
argument_list|(
name|hReservation
argument_list|,
name|StudentComparator
operator|.
name|SortBy
operator|.
name|RESERVATION
argument_list|,
name|MESSAGES
operator|.
name|colReservation
argument_list|()
argument_list|)
expr_stmt|;
block|}
name|UniTimeTableHeader
name|hConsent
init|=
literal|null
decl_stmt|;
if|if
condition|(
name|hasConsent
condition|)
block|{
name|hConsent
operator|=
operator|new
name|UniTimeTableHeader
argument_list|(
name|MESSAGES
operator|.
name|colConsent
argument_list|()
argument_list|)
expr_stmt|;
name|header
operator|.
name|add
argument_list|(
name|hConsent
argument_list|)
expr_stmt|;
name|addSortOperation
argument_list|(
name|hConsent
argument_list|,
name|StudentComparator
operator|.
name|SortBy
operator|.
name|CONSENT
argument_list|,
name|MESSAGES
operator|.
name|colConsent
argument_list|()
argument_list|)
expr_stmt|;
block|}
name|UniTimeTableHeader
name|hCredit
init|=
literal|null
decl_stmt|;
if|if
condition|(
name|hasCredit
condition|)
block|{
name|hCredit
operator|=
operator|new
name|UniTimeTableHeader
argument_list|(
name|MESSAGES
operator|.
name|colCredit
argument_list|()
argument_list|)
expr_stmt|;
name|header
operator|.
name|add
argument_list|(
name|hCredit
argument_list|)
expr_stmt|;
name|addSortOperation
argument_list|(
name|hCredit
argument_list|,
name|StudentComparator
operator|.
name|SortBy
operator|.
name|CREDIT
argument_list|,
name|MESSAGES
operator|.
name|colCredit
argument_list|()
argument_list|)
expr_stmt|;
block|}
name|UniTimeTableHeader
name|hDistConf
init|=
literal|null
decl_stmt|;
if|if
condition|(
name|hasDistances
condition|)
block|{
name|hDistConf
operator|=
operator|new
name|UniTimeTableHeader
argument_list|(
name|MESSAGES
operator|.
name|colDistanceConflicts
argument_list|()
argument_list|)
expr_stmt|;
name|header
operator|.
name|add
argument_list|(
name|hDistConf
argument_list|)
expr_stmt|;
name|addSortOperation
argument_list|(
name|hDistConf
argument_list|,
name|StudentComparator
operator|.
name|SortBy
operator|.
name|DIST_CONF
argument_list|,
name|MESSAGES
operator|.
name|colDistanceConflicts
argument_list|()
argument_list|)
expr_stmt|;
block|}
name|UniTimeTableHeader
name|hShare
init|=
literal|null
decl_stmt|;
if|if
condition|(
name|hasOverlaps
condition|)
block|{
name|hShare
operator|=
operator|new
name|UniTimeTableHeader
argument_list|(
name|MESSAGES
operator|.
name|colOverlapMins
argument_list|()
argument_list|)
expr_stmt|;
name|header
operator|.
name|add
argument_list|(
name|hShare
argument_list|)
expr_stmt|;
name|addSortOperation
argument_list|(
name|hShare
argument_list|,
name|StudentComparator
operator|.
name|SortBy
operator|.
name|OVERLAPS
argument_list|,
name|MESSAGES
operator|.
name|colOverlapMins
argument_list|()
argument_list|)
expr_stmt|;
block|}
name|UniTimeTableHeader
name|hFTShare
init|=
literal|null
decl_stmt|;
if|if
condition|(
name|hasFreeTimeOverlaps
condition|)
block|{
name|hFTShare
operator|=
operator|new
name|UniTimeTableHeader
argument_list|(
name|MESSAGES
operator|.
name|colFreeTimeOverlapMins
argument_list|()
argument_list|)
expr_stmt|;
name|header
operator|.
name|add
argument_list|(
name|hFTShare
argument_list|)
expr_stmt|;
name|addSortOperation
argument_list|(
name|hFTShare
argument_list|,
name|StudentComparator
operator|.
name|SortBy
operator|.
name|FT_OVERLAPS
argument_list|,
name|MESSAGES
operator|.
name|colFreeTimeOverlapMins
argument_list|()
argument_list|)
expr_stmt|;
block|}
name|UniTimeTableHeader
name|hPrefIMConfs
init|=
literal|null
decl_stmt|;
if|if
condition|(
name|hasPrefIMConfs
condition|)
block|{
name|hPrefIMConfs
operator|=
operator|new
name|UniTimeTableHeader
argument_list|(
name|MESSAGES
operator|.
name|colPrefInstrMethConfs
argument_list|()
argument_list|)
expr_stmt|;
name|header
operator|.
name|add
argument_list|(
name|hPrefIMConfs
argument_list|)
expr_stmt|;
name|addSortOperation
argument_list|(
name|hPrefIMConfs
argument_list|,
name|StudentComparator
operator|.
name|SortBy
operator|.
name|PREF_IM
argument_list|,
name|MESSAGES
operator|.
name|colPrefInstrMethConfs
argument_list|()
argument_list|)
expr_stmt|;
block|}
name|UniTimeTableHeader
name|hPrefSecConfs
init|=
literal|null
decl_stmt|;
if|if
condition|(
name|hasPrefSecConfs
condition|)
block|{
name|hPrefSecConfs
operator|=
operator|new
name|UniTimeTableHeader
argument_list|(
name|MESSAGES
operator|.
name|colPrefSectionConfs
argument_list|()
argument_list|)
expr_stmt|;
name|header
operator|.
name|add
argument_list|(
name|hPrefSecConfs
argument_list|)
expr_stmt|;
name|addSortOperation
argument_list|(
name|hPrefSecConfs
argument_list|,
name|StudentComparator
operator|.
name|SortBy
operator|.
name|PREF_SEC
argument_list|,
name|MESSAGES
operator|.
name|colPrefSectionConfs
argument_list|()
argument_list|)
expr_stmt|;
block|}
name|UniTimeTableHeader
name|hRequestTS
init|=
literal|null
decl_stmt|;
if|if
condition|(
name|hasRequestedDate
condition|)
block|{
name|hRequestTS
operator|=
operator|new
name|UniTimeTableHeader
argument_list|(
name|MESSAGES
operator|.
name|colRequestTimeStamp
argument_list|()
argument_list|)
expr_stmt|;
name|header
operator|.
name|add
argument_list|(
name|hRequestTS
argument_list|)
expr_stmt|;
name|addSortOperation
argument_list|(
name|hRequestTS
argument_list|,
name|StudentComparator
operator|.
name|SortBy
operator|.
name|REQUEST_TS
argument_list|,
name|MESSAGES
operator|.
name|colRequestTimeStamp
argument_list|()
argument_list|)
expr_stmt|;
block|}
name|UniTimeTableHeader
name|hEnrolledTS
init|=
literal|null
decl_stmt|;
if|if
condition|(
name|hasEnrolledDate
condition|)
block|{
name|hEnrolledTS
operator|=
operator|new
name|UniTimeTableHeader
argument_list|(
name|MESSAGES
operator|.
name|colEnrollmentTimeStamp
argument_list|()
argument_list|)
expr_stmt|;
name|header
operator|.
name|add
argument_list|(
name|hEnrolledTS
argument_list|)
expr_stmt|;
name|addSortOperation
argument_list|(
name|hEnrolledTS
argument_list|,
name|StudentComparator
operator|.
name|SortBy
operator|.
name|ENROLLMENT_TS
argument_list|,
name|MESSAGES
operator|.
name|colEnrollmentTimeStamp
argument_list|()
argument_list|)
expr_stmt|;
block|}
name|UniTimeTableHeader
name|hNote
init|=
literal|null
decl_stmt|;
if|if
condition|(
name|iOnline
operator|&&
name|hasNote
condition|)
block|{
name|iNoteColumn
operator|=
name|header
operator|.
name|size
argument_list|()
operator|-
literal|1
expr_stmt|;
name|hNote
operator|=
operator|new
name|UniTimeTableHeader
argument_list|(
name|MESSAGES
operator|.
name|colStudentNote
argument_list|()
argument_list|)
expr_stmt|;
name|header
operator|.
name|add
argument_list|(
name|hNote
argument_list|)
expr_stmt|;
name|addSortOperation
argument_list|(
name|hNote
argument_list|,
name|StudentComparator
operator|.
name|SortBy
operator|.
name|NOTE
argument_list|,
name|MESSAGES
operator|.
name|colStudentNote
argument_list|()
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|iNoteColumn
operator|=
operator|-
literal|1
expr_stmt|;
block|}
name|UniTimeTableHeader
name|hEmailTS
init|=
literal|null
decl_stmt|;
if|if
condition|(
name|iOnline
operator|&&
name|hasEmailed
condition|)
block|{
name|hEmailTS
operator|=
operator|new
name|UniTimeTableHeader
argument_list|(
name|MESSAGES
operator|.
name|colEmailTimeStamp
argument_list|()
argument_list|)
expr_stmt|;
name|header
operator|.
name|add
argument_list|(
name|hEmailTS
argument_list|)
expr_stmt|;
name|addSortOperation
argument_list|(
name|hEmailTS
argument_list|,
name|StudentComparator
operator|.
name|SortBy
operator|.
name|EMAIL_TS
argument_list|,
name|MESSAGES
operator|.
name|colEmailTimeStamp
argument_list|()
argument_list|)
expr_stmt|;
block|}
name|iStudentTable
operator|.
name|addRow
argument_list|(
literal|null
argument_list|,
name|header
argument_list|)
expr_stmt|;
name|Set
argument_list|<
name|Long
argument_list|>
name|newlySelected
init|=
operator|new
name|HashSet
argument_list|<
name|Long
argument_list|>
argument_list|()
decl_stmt|;
for|for
control|(
name|StudentInfo
name|info
range|:
name|result
control|)
block|{
name|List
argument_list|<
name|Widget
argument_list|>
name|line
init|=
operator|new
name|ArrayList
argument_list|<
name|Widget
argument_list|>
argument_list|()
decl_stmt|;
if|if
condition|(
name|info
operator|.
name|getStudent
argument_list|()
operator|!=
literal|null
condition|)
block|{
if|if
condition|(
name|iOnline
operator|&&
name|iProperties
operator|!=
literal|null
operator|&&
name|iProperties
operator|.
name|isCanSelectStudent
argument_list|()
condition|)
block|{
name|CheckBox
name|ch
init|=
operator|new
name|CheckBox
argument_list|()
decl_stmt|;
name|ch
operator|.
name|addClickHandler
argument_list|(
operator|new
name|ClickHandler
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|void
name|onClick
parameter_list|(
name|ClickEvent
name|event
parameter_list|)
block|{
name|event
operator|.
name|stopPropagation
argument_list|()
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
specifier|final
name|Long
name|sid
init|=
name|info
operator|.
name|getStudent
argument_list|()
operator|.
name|getId
argument_list|()
decl_stmt|;
if|if
condition|(
name|iSelectedStudentIds
operator|.
name|contains
argument_list|(
name|sid
argument_list|)
condition|)
block|{
name|ch
operator|.
name|setValue
argument_list|(
literal|true
argument_list|)
expr_stmt|;
name|newlySelected
operator|.
name|add
argument_list|(
name|sid
argument_list|)
expr_stmt|;
block|}
name|ch
operator|.
name|addClickHandler
argument_list|(
operator|new
name|ClickHandler
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|void
name|onClick
parameter_list|(
name|ClickEvent
name|event
parameter_list|)
block|{
name|event
operator|.
name|stopPropagation
argument_list|()
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
name|ch
operator|.
name|addValueChangeHandler
argument_list|(
operator|new
name|ValueChangeHandler
argument_list|<
name|Boolean
argument_list|>
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|void
name|onValueChange
parameter_list|(
name|ValueChangeEvent
argument_list|<
name|Boolean
argument_list|>
name|event
parameter_list|)
block|{
if|if
condition|(
name|event
operator|.
name|getValue
argument_list|()
condition|)
name|iSelectedStudentIds
operator|.
name|add
argument_list|(
name|sid
argument_list|)
expr_stmt|;
else|else
name|iSelectedStudentIds
operator|.
name|remove
argument_list|(
name|sid
argument_list|)
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
name|line
operator|.
name|add
argument_list|(
name|ch
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|hasExtId
condition|)
block|{
name|line
operator|.
name|add
argument_list|(
operator|new
name|Label
argument_list|(
name|info
operator|.
name|getStudent
argument_list|()
operator|.
name|isCanShowExternalId
argument_list|()
condition|?
name|info
operator|.
name|getStudent
argument_list|()
operator|.
name|getExternalId
argument_list|()
else|:
literal|""
argument_list|,
literal|false
argument_list|)
argument_list|)
expr_stmt|;
block|}
name|line
operator|.
name|add
argument_list|(
operator|new
name|TitleCell
argument_list|(
name|info
operator|.
name|getStudent
argument_list|()
operator|.
name|getName
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|hasArea
condition|)
block|{
name|line
operator|.
name|add
argument_list|(
operator|new
name|HTML
argument_list|(
name|info
operator|.
name|getStudent
argument_list|()
operator|.
name|getArea
argument_list|(
literal|"<br>"
argument_list|)
argument_list|,
literal|false
argument_list|)
argument_list|)
expr_stmt|;
name|line
operator|.
name|add
argument_list|(
operator|new
name|HTML
argument_list|(
name|info
operator|.
name|getStudent
argument_list|()
operator|.
name|getClassification
argument_list|(
literal|"<br>"
argument_list|)
argument_list|,
literal|false
argument_list|)
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|hasMajor
condition|)
name|line
operator|.
name|add
argument_list|(
operator|new
name|HTML
argument_list|(
name|info
operator|.
name|getStudent
argument_list|()
operator|.
name|getMajor
argument_list|(
literal|"<br>"
argument_list|)
argument_list|,
literal|false
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|hasGroup
condition|)
name|line
operator|.
name|add
argument_list|(
operator|new
name|HTML
argument_list|(
name|info
operator|.
name|getStudent
argument_list|()
operator|.
name|getGroup
argument_list|(
literal|"<br>"
argument_list|)
argument_list|,
literal|false
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|hasAcmd
condition|)
name|line
operator|.
name|add
argument_list|(
operator|new
name|HTML
argument_list|(
name|info
operator|.
name|getStudent
argument_list|()
operator|.
name|getAccommodation
argument_list|(
literal|"<br>"
argument_list|)
argument_list|,
literal|false
argument_list|)
argument_list|)
expr_stmt|;
name|line
operator|.
name|add
argument_list|(
operator|new
name|HTML
argument_list|(
name|info
operator|.
name|getStatus
argument_list|()
argument_list|,
literal|false
argument_list|)
argument_list|)
expr_stmt|;
block|}
else|else
block|{
if|if
condition|(
name|iOnline
operator|&&
name|iProperties
operator|!=
literal|null
operator|&&
name|iProperties
operator|.
name|isCanSelectStudent
argument_list|()
condition|)
name|line
operator|.
name|add
argument_list|(
operator|new
name|HTML
argument_list|(
literal|"&nbsp;"
argument_list|,
literal|false
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|hasExtId
condition|)
name|line
operator|.
name|add
argument_list|(
operator|new
name|TitleCell
argument_list|(
name|MESSAGES
operator|.
name|total
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
else|else
name|line
operator|.
name|add
argument_list|(
operator|new
name|Label
argument_list|(
name|MESSAGES
operator|.
name|total
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
name|line
operator|.
name|add
argument_list|(
operator|new
name|NumberCell
argument_list|(
literal|null
argument_list|,
name|result
operator|.
name|size
argument_list|()
operator|-
literal|1
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|hasArea
condition|)
block|{
name|line
operator|.
name|add
argument_list|(
operator|new
name|HTML
argument_list|(
literal|"&nbsp;"
argument_list|,
literal|false
argument_list|)
argument_list|)
expr_stmt|;
name|line
operator|.
name|add
argument_list|(
operator|new
name|HTML
argument_list|(
literal|"&nbsp;"
argument_list|,
literal|false
argument_list|)
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|hasMajor
condition|)
name|line
operator|.
name|add
argument_list|(
operator|new
name|HTML
argument_list|(
literal|"&nbsp;"
argument_list|,
literal|false
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|hasGroup
condition|)
name|line
operator|.
name|add
argument_list|(
operator|new
name|HTML
argument_list|(
literal|"&nbsp;"
argument_list|,
literal|false
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|hasAcmd
condition|)
name|line
operator|.
name|add
argument_list|(
operator|new
name|HTML
argument_list|(
literal|"&nbsp;"
argument_list|,
literal|false
argument_list|)
argument_list|)
expr_stmt|;
name|line
operator|.
name|add
argument_list|(
operator|new
name|HTML
argument_list|(
literal|"&nbsp;"
argument_list|,
literal|false
argument_list|)
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|hasEnrollment
condition|)
name|line
operator|.
name|add
argument_list|(
operator|new
name|NumberCell
argument_list|(
name|info
operator|.
name|getEnrollment
argument_list|()
argument_list|,
name|info
operator|.
name|getTotalEnrollment
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|hasWaitList
condition|)
name|line
operator|.
name|add
argument_list|(
operator|new
name|WaitListCell
argument_list|(
name|info
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|hasReservation
condition|)
name|line
operator|.
name|add
argument_list|(
operator|new
name|NumberCell
argument_list|(
name|info
operator|.
name|getReservation
argument_list|()
argument_list|,
name|info
operator|.
name|getTotalReservation
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|hasConsent
condition|)
name|line
operator|.
name|add
argument_list|(
operator|new
name|NumberCell
argument_list|(
name|info
operator|.
name|getConsentNeeded
argument_list|()
argument_list|,
name|info
operator|.
name|getTotalConsentNeeded
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|hasCredit
condition|)
block|{
if|if
condition|(
name|info
operator|.
name|hasCredit
argument_list|()
condition|)
name|line
operator|.
name|add
argument_list|(
operator|new
name|CreditCell
argument_list|(
name|info
operator|.
name|getCredit
argument_list|()
argument_list|,
name|info
operator|.
name|getTotalCredit
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
else|else
name|line
operator|.
name|add
argument_list|(
operator|new
name|RequestCreditCell
argument_list|(
name|info
operator|.
name|getRequestCreditMin
argument_list|()
argument_list|,
name|info
operator|.
name|getRequestCreditMax
argument_list|()
argument_list|,
name|info
operator|.
name|getTotalRequestCreditMin
argument_list|()
argument_list|,
name|info
operator|.
name|getTotalRequestCreditMax
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|hasDistances
condition|)
block|{
name|line
operator|.
name|add
argument_list|(
operator|new
name|DistanceCell
argument_list|(
name|info
operator|.
name|getNrDistanceConflicts
argument_list|()
argument_list|,
name|info
operator|.
name|getTotalNrDistanceConflicts
argument_list|()
argument_list|,
name|info
operator|.
name|getLongestDistanceMinutes
argument_list|()
argument_list|,
name|info
operator|.
name|getTotalLongestDistanceMinutes
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|hasOverlaps
condition|)
name|line
operator|.
name|add
argument_list|(
operator|new
name|NumberCell
argument_list|(
name|info
operator|.
name|getOverlappingMinutes
argument_list|()
argument_list|,
name|info
operator|.
name|getTotalOverlappingMinutes
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|hasFreeTimeOverlaps
condition|)
name|line
operator|.
name|add
argument_list|(
operator|new
name|NumberCell
argument_list|(
name|info
operator|.
name|getFreeTimeOverlappingMins
argument_list|()
argument_list|,
name|info
operator|.
name|getTotalFreeTimeOverlappingMins
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|hasPrefIMConfs
condition|)
name|line
operator|.
name|add
argument_list|(
operator|new
name|NumberCell
argument_list|(
name|info
operator|.
name|getPrefInstrMethConflict
argument_list|()
argument_list|,
name|info
operator|.
name|getTotalPrefInstrMethConflict
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|hasPrefSecConfs
condition|)
name|line
operator|.
name|add
argument_list|(
operator|new
name|NumberCell
argument_list|(
name|info
operator|.
name|getPrefSectionConflict
argument_list|()
argument_list|,
name|info
operator|.
name|getTotalPrefSectionConflict
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|info
operator|.
name|getStudent
argument_list|()
operator|!=
literal|null
condition|)
block|{
if|if
condition|(
name|hasRequestedDate
condition|)
name|line
operator|.
name|add
argument_list|(
operator|new
name|HTML
argument_list|(
name|info
operator|.
name|getRequestedDate
argument_list|()
operator|==
literal|null
condition|?
literal|"&nbsp;"
else|:
name|sDF
operator|.
name|format
argument_list|(
name|info
operator|.
name|getRequestedDate
argument_list|()
argument_list|)
argument_list|,
literal|false
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|hasEnrolledDate
condition|)
name|line
operator|.
name|add
argument_list|(
operator|new
name|HTML
argument_list|(
name|info
operator|.
name|getEnrolledDate
argument_list|()
operator|==
literal|null
condition|?
literal|"&nbsp;"
else|:
name|sDF
operator|.
name|format
argument_list|(
name|info
operator|.
name|getEnrolledDate
argument_list|()
argument_list|)
argument_list|,
literal|false
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|iOnline
operator|&&
name|hasNote
condition|)
block|{
name|HTML
name|note
init|=
operator|new
name|HTML
argument_list|(
name|info
operator|.
name|hasNote
argument_list|()
condition|?
name|info
operator|.
name|getNote
argument_list|()
else|:
literal|""
argument_list|)
decl_stmt|;
name|note
operator|.
name|addStyleName
argument_list|(
literal|"student-note"
argument_list|)
expr_stmt|;
if|if
condition|(
name|info
operator|.
name|hasNote
argument_list|()
condition|)
name|note
operator|.
name|setTitle
argument_list|(
name|note
operator|.
name|getText
argument_list|()
argument_list|)
expr_stmt|;
name|line
operator|.
name|add
argument_list|(
name|note
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|iOnline
operator|&&
name|hasEmailed
condition|)
name|line
operator|.
name|add
argument_list|(
operator|new
name|HTML
argument_list|(
name|info
operator|.
name|getEmailDate
argument_list|()
operator|==
literal|null
condition|?
literal|"&nbsp;"
else|:
name|sDF
operator|.
name|format
argument_list|(
name|info
operator|.
name|getEmailDate
argument_list|()
argument_list|)
argument_list|,
literal|false
argument_list|)
argument_list|)
expr_stmt|;
block|}
else|else
block|{
if|if
condition|(
name|hasRequestedDate
condition|)
name|line
operator|.
name|add
argument_list|(
operator|new
name|HTML
argument_list|(
literal|"&nbsp;"
argument_list|,
literal|false
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|hasEnrolledDate
condition|)
name|line
operator|.
name|add
argument_list|(
operator|new
name|HTML
argument_list|(
literal|"&nbsp;"
argument_list|,
literal|false
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|iOnline
operator|&&
name|hasNote
condition|)
name|line
operator|.
name|add
argument_list|(
operator|new
name|HTML
argument_list|(
literal|"&nbsp;"
argument_list|,
literal|false
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|iOnline
operator|&&
name|hasEmailed
condition|)
name|line
operator|.
name|add
argument_list|(
operator|new
name|HTML
argument_list|(
literal|"&nbsp;"
argument_list|,
literal|false
argument_list|)
argument_list|)
expr_stmt|;
block|}
name|iStudentTable
operator|.
name|addRow
argument_list|(
name|info
argument_list|,
name|line
argument_list|)
expr_stmt|;
block|}
name|iSelectedStudentIds
operator|.
name|clear
argument_list|()
expr_stmt|;
name|iSelectedStudentIds
operator|.
name|addAll
argument_list|(
name|newlySelected
argument_list|)
expr_stmt|;
if|if
condition|(
name|iStudentTable
operator|.
name|getRowCount
argument_list|()
operator|>=
literal|2
condition|)
block|{
for|for
control|(
name|int
name|c
init|=
literal|0
init|;
name|c
operator|<
name|iStudentTable
operator|.
name|getCellCount
argument_list|(
name|iStudentTable
operator|.
name|getRowCount
argument_list|()
operator|-
literal|1
argument_list|)
condition|;
name|c
operator|++
control|)
name|iStudentTable
operator|.
name|getCellFormatter
argument_list|()
operator|.
name|setStyleName
argument_list|(
name|iStudentTable
operator|.
name|getRowCount
argument_list|()
operator|-
literal|1
argument_list|,
name|c
argument_list|,
literal|"unitime-TotalRow"
argument_list|)
expr_stmt|;
block|}
name|iStudentTableHint
operator|.
name|setVisible
argument_list|(
name|hasWaitList
argument_list|)
expr_stmt|;
if|if
condition|(
name|SectioningStatusCookie
operator|.
name|getInstance
argument_list|()
operator|.
name|getSortBy
argument_list|(
name|iOnline
argument_list|,
literal|1
argument_list|)
operator|!=
literal|0
condition|)
block|{
name|boolean
name|asc
init|=
operator|(
name|SectioningStatusCookie
operator|.
name|getInstance
argument_list|()
operator|.
name|getSortBy
argument_list|(
name|iOnline
argument_list|,
literal|1
argument_list|)
operator|>
literal|0
operator|)
decl_stmt|;
name|StudentComparator
operator|.
name|SortBy
name|sort
init|=
name|StudentComparator
operator|.
name|SortBy
operator|.
name|values
argument_list|()
index|[
name|Math
operator|.
name|abs
argument_list|(
name|SectioningStatusCookie
operator|.
name|getInstance
argument_list|()
operator|.
name|getSortBy
argument_list|(
name|iOnline
argument_list|,
literal|1
argument_list|)
argument_list|)
operator|-
literal|1
index|]
decl_stmt|;
name|UniTimeTableHeader
name|h
init|=
literal|null
decl_stmt|;
switch|switch
condition|(
name|sort
condition|)
block|{
case|case
name|ACCOMODATION
case|:
name|h
operator|=
name|hAcmd
expr_stmt|;
break|break;
case|case
name|AREA
case|:
name|h
operator|=
name|hArea
expr_stmt|;
break|break;
case|case
name|CLASSIFICATION
case|:
name|h
operator|=
name|hClasf
expr_stmt|;
break|break;
case|case
name|CONSENT
case|:
name|h
operator|=
name|hConsent
expr_stmt|;
break|break;
case|case
name|CREDIT
case|:
name|h
operator|=
name|hCredit
expr_stmt|;
break|break;
case|case
name|EMAIL_TS
case|:
name|h
operator|=
name|hEmailTS
expr_stmt|;
break|break;
case|case
name|ENROLLMENT
case|:
name|h
operator|=
name|hEnrollment
expr_stmt|;
break|break;
case|case
name|ENROLLMENT_TS
case|:
name|h
operator|=
name|hEnrolledTS
expr_stmt|;
break|break;
case|case
name|EXTERNAL_ID
case|:
name|h
operator|=
name|hExtId
expr_stmt|;
break|break;
case|case
name|GROUP
case|:
name|h
operator|=
name|hGroup
expr_stmt|;
break|break;
case|case
name|MAJOR
case|:
name|h
operator|=
name|hMajor
expr_stmt|;
break|break;
case|case
name|REQUEST_TS
case|:
name|h
operator|=
name|hRequestTS
expr_stmt|;
break|break;
case|case
name|RESERVATION
case|:
name|h
operator|=
name|hReservation
expr_stmt|;
break|break;
case|case
name|STATUS
case|:
name|h
operator|=
name|hStatus
expr_stmt|;
break|break;
case|case
name|STUDENT
case|:
name|h
operator|=
name|hStudent
expr_stmt|;
break|break;
case|case
name|WAITLIST
case|:
name|h
operator|=
name|hWaitlist
expr_stmt|;
break|break;
case|case
name|NOTE
case|:
name|h
operator|=
name|hNote
expr_stmt|;
break|break;
case|case
name|DIST_CONF
case|:
name|h
operator|=
name|hDistConf
expr_stmt|;
break|break;
case|case
name|OVERLAPS
case|:
name|h
operator|=
name|hShare
expr_stmt|;
break|break;
case|case
name|FT_OVERLAPS
case|:
name|h
operator|=
name|hFTShare
expr_stmt|;
break|break;
case|case
name|PREF_IM
case|:
name|h
operator|=
name|hPrefIMConfs
expr_stmt|;
break|break;
case|case
name|PREF_SEC
case|:
name|h
operator|=
name|hPrefSecConfs
expr_stmt|;
break|break;
block|}
if|if
condition|(
name|h
operator|!=
literal|null
condition|)
name|iStudentTable
operator|.
name|sort
argument_list|(
name|h
argument_list|,
operator|new
name|StudentComparator
argument_list|(
name|sort
argument_list|)
argument_list|,
name|asc
argument_list|)
expr_stmt|;
block|}
block|}
specifier|public
name|void
name|populateChangeLog
parameter_list|(
name|List
argument_list|<
name|SectioningAction
argument_list|>
name|result
parameter_list|)
block|{
name|List
argument_list|<
name|UniTimeTableHeader
argument_list|>
name|header
init|=
operator|new
name|ArrayList
argument_list|<
name|UniTimeTableHeader
argument_list|>
argument_list|()
decl_stmt|;
name|UniTimeTableHeader
name|hStudent
init|=
operator|new
name|UniTimeTableHeader
argument_list|(
name|MESSAGES
operator|.
name|colStudent
argument_list|()
argument_list|)
decl_stmt|;
name|header
operator|.
name|add
argument_list|(
name|hStudent
argument_list|)
expr_stmt|;
name|addSortOperation
argument_list|(
name|hStudent
argument_list|,
name|ChangeLogComparator
operator|.
name|SortBy
operator|.
name|STUDENT
argument_list|,
name|MESSAGES
operator|.
name|colStudent
argument_list|()
argument_list|)
expr_stmt|;
name|UniTimeTableHeader
name|hOp
init|=
operator|new
name|UniTimeTableHeader
argument_list|(
name|MESSAGES
operator|.
name|colOperation
argument_list|()
argument_list|)
decl_stmt|;
name|header
operator|.
name|add
argument_list|(
name|hOp
argument_list|)
expr_stmt|;
name|addSortOperation
argument_list|(
name|hOp
argument_list|,
name|ChangeLogComparator
operator|.
name|SortBy
operator|.
name|OPERATION
argument_list|,
name|MESSAGES
operator|.
name|colOperation
argument_list|()
argument_list|)
expr_stmt|;
name|UniTimeTableHeader
name|hTimeStamp
init|=
operator|new
name|UniTimeTableHeader
argument_list|(
name|MESSAGES
operator|.
name|colTimeStamp
argument_list|()
argument_list|)
decl_stmt|;
name|header
operator|.
name|add
argument_list|(
name|hTimeStamp
argument_list|)
expr_stmt|;
name|addSortOperation
argument_list|(
name|hTimeStamp
argument_list|,
name|ChangeLogComparator
operator|.
name|SortBy
operator|.
name|TIME_STAMP
argument_list|,
name|MESSAGES
operator|.
name|colTimeStamp
argument_list|()
argument_list|)
expr_stmt|;
name|UniTimeTableHeader
name|hExecTime
init|=
operator|new
name|UniTimeTableHeader
argument_list|(
name|MESSAGES
operator|.
name|colExecutionTime
argument_list|()
argument_list|)
decl_stmt|;
name|header
operator|.
name|add
argument_list|(
name|hExecTime
argument_list|)
expr_stmt|;
name|addSortOperation
argument_list|(
name|hExecTime
argument_list|,
name|ChangeLogComparator
operator|.
name|SortBy
operator|.
name|EXEC_TIME
argument_list|,
name|MESSAGES
operator|.
name|colExecutionTime
argument_list|()
argument_list|)
expr_stmt|;
name|UniTimeTableHeader
name|hResult
init|=
operator|new
name|UniTimeTableHeader
argument_list|(
name|MESSAGES
operator|.
name|colResult
argument_list|()
argument_list|)
decl_stmt|;
name|header
operator|.
name|add
argument_list|(
name|hResult
argument_list|)
expr_stmt|;
name|addSortOperation
argument_list|(
name|hResult
argument_list|,
name|ChangeLogComparator
operator|.
name|SortBy
operator|.
name|RESULT
argument_list|,
name|MESSAGES
operator|.
name|colResult
argument_list|()
argument_list|)
expr_stmt|;
name|UniTimeTableHeader
name|hUser
init|=
operator|new
name|UniTimeTableHeader
argument_list|(
name|MESSAGES
operator|.
name|colUser
argument_list|()
argument_list|)
decl_stmt|;
name|header
operator|.
name|add
argument_list|(
name|hUser
argument_list|)
expr_stmt|;
name|addSortOperation
argument_list|(
name|hUser
argument_list|,
name|ChangeLogComparator
operator|.
name|SortBy
operator|.
name|USER
argument_list|,
name|MESSAGES
operator|.
name|colUser
argument_list|()
argument_list|)
expr_stmt|;
specifier|final
name|UniTimeTableHeader
name|hMessage
init|=
operator|new
name|UniTimeTableHeader
argument_list|(
name|MESSAGES
operator|.
name|colMessage
argument_list|()
argument_list|)
decl_stmt|;
name|header
operator|.
name|add
argument_list|(
name|hMessage
argument_list|)
expr_stmt|;
name|addSortOperation
argument_list|(
name|hMessage
argument_list|,
name|ChangeLogComparator
operator|.
name|SortBy
operator|.
name|MESSAGE
argument_list|,
name|MESSAGES
operator|.
name|colMessage
argument_list|()
argument_list|)
expr_stmt|;
name|iLogTable
operator|.
name|addRow
argument_list|(
literal|null
argument_list|,
name|header
argument_list|)
expr_stmt|;
for|for
control|(
name|ClassAssignmentInterface
operator|.
name|SectioningAction
name|log
range|:
name|result
control|)
block|{
name|iLogTable
operator|.
name|addRow
argument_list|(
name|log
argument_list|,
operator|new
name|TopCell
argument_list|(
name|log
operator|.
name|getStudent
argument_list|()
operator|.
name|getName
argument_list|()
argument_list|)
argument_list|,
operator|new
name|TopCell
argument_list|(
name|log
operator|.
name|getOperation
argument_list|()
argument_list|)
argument_list|,
operator|new
name|TopCell
argument_list|(
name|sTSF
operator|.
name|format
argument_list|(
name|log
operator|.
name|getTimeStamp
argument_list|()
argument_list|)
argument_list|)
argument_list|,
operator|new
name|TopCell
argument_list|(
name|log
operator|.
name|getWallTime
argument_list|()
operator|==
literal|null
condition|?
literal|""
else|:
name|sNF
operator|.
name|format
argument_list|(
literal|0.001
operator|*
name|log
operator|.
name|getWallTime
argument_list|()
argument_list|)
argument_list|)
argument_list|,
operator|new
name|TopCell
argument_list|(
name|log
operator|.
name|getResult
argument_list|()
argument_list|)
argument_list|,
operator|new
name|TopCell
argument_list|(
name|log
operator|.
name|getUser
argument_list|()
operator|==
literal|null
condition|?
literal|""
else|:
name|log
operator|.
name|getUser
argument_list|()
argument_list|)
argument_list|,
operator|new
name|HTML
argument_list|(
name|log
operator|.
name|getMessage
argument_list|()
operator|==
literal|null
condition|?
literal|""
else|:
name|log
operator|.
name|getMessage
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|SectioningStatusCookie
operator|.
name|getInstance
argument_list|()
operator|.
name|getSortBy
argument_list|(
name|iOnline
argument_list|,
literal|2
argument_list|)
operator|!=
literal|0
condition|)
block|{
name|boolean
name|asc
init|=
operator|(
name|SectioningStatusCookie
operator|.
name|getInstance
argument_list|()
operator|.
name|getSortBy
argument_list|(
name|iOnline
argument_list|,
literal|2
argument_list|)
operator|>
literal|0
operator|)
decl_stmt|;
name|ChangeLogComparator
operator|.
name|SortBy
name|sort
init|=
name|ChangeLogComparator
operator|.
name|SortBy
operator|.
name|values
argument_list|()
index|[
name|Math
operator|.
name|abs
argument_list|(
name|SectioningStatusCookie
operator|.
name|getInstance
argument_list|()
operator|.
name|getSortBy
argument_list|(
name|iOnline
argument_list|,
literal|2
argument_list|)
argument_list|)
operator|-
literal|1
index|]
decl_stmt|;
name|UniTimeTableHeader
name|h
init|=
literal|null
decl_stmt|;
switch|switch
condition|(
name|sort
condition|)
block|{
case|case
name|MESSAGE
case|:
name|h
operator|=
name|hMessage
expr_stmt|;
break|break;
case|case
name|OPERATION
case|:
name|h
operator|=
name|hOp
expr_stmt|;
break|break;
case|case
name|RESULT
case|:
name|h
operator|=
name|hResult
expr_stmt|;
break|break;
case|case
name|STUDENT
case|:
name|h
operator|=
name|hStudent
expr_stmt|;
break|break;
case|case
name|TIME_STAMP
case|:
name|h
operator|=
name|hTimeStamp
expr_stmt|;
break|break;
case|case
name|USER
case|:
name|h
operator|=
name|hUser
expr_stmt|;
break|break;
block|}
if|if
condition|(
name|h
operator|!=
literal|null
condition|)
name|iLogTable
operator|.
name|sort
argument_list|(
name|h
argument_list|,
operator|new
name|ChangeLogComparator
argument_list|(
name|sort
argument_list|)
argument_list|,
name|asc
argument_list|)
expr_stmt|;
block|}
block|}
specifier|protected
name|void
name|addSortOperation
parameter_list|(
specifier|final
name|UniTimeTableHeader
name|header
parameter_list|,
specifier|final
name|EnrollmentComparator
operator|.
name|SortBy
name|sort
parameter_list|,
specifier|final
name|String
name|column
parameter_list|)
block|{
name|header
operator|.
name|addOperation
argument_list|(
operator|new
name|Operation
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|void
name|execute
parameter_list|()
block|{
name|iCourseTable
operator|.
name|sort
argument_list|(
name|header
argument_list|,
operator|new
name|EnrollmentComparator
argument_list|(
name|sort
argument_list|)
argument_list|)
expr_stmt|;
name|SectioningStatusCookie
operator|.
name|getInstance
argument_list|()
operator|.
name|setSortBy
argument_list|(
name|iOnline
argument_list|,
literal|0
argument_list|,
name|header
operator|.
name|getOrder
argument_list|()
condition|?
literal|1
operator|+
name|sort
operator|.
name|ordinal
argument_list|()
else|:
operator|-
literal|1
operator|-
name|sort
operator|.
name|ordinal
argument_list|()
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Override
specifier|public
name|boolean
name|isApplicable
parameter_list|()
block|{
return|return
literal|true
return|;
block|}
annotation|@
name|Override
specifier|public
name|boolean
name|hasSeparator
parameter_list|()
block|{
return|return
literal|false
return|;
block|}
annotation|@
name|Override
specifier|public
name|String
name|getName
parameter_list|()
block|{
return|return
name|MESSAGES
operator|.
name|sortBy
argument_list|(
name|column
argument_list|)
return|;
block|}
block|}
argument_list|)
expr_stmt|;
block|}
specifier|protected
name|void
name|addSortOperation
parameter_list|(
specifier|final
name|UniTimeTableHeader
name|header
parameter_list|,
specifier|final
name|StudentComparator
operator|.
name|SortBy
name|sort
parameter_list|,
specifier|final
name|String
name|column
parameter_list|)
block|{
name|header
operator|.
name|addOperation
argument_list|(
operator|new
name|Operation
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|void
name|execute
parameter_list|()
block|{
name|iStudentTable
operator|.
name|sort
argument_list|(
name|header
argument_list|,
operator|new
name|StudentComparator
argument_list|(
name|sort
argument_list|)
argument_list|)
expr_stmt|;
name|SectioningStatusCookie
operator|.
name|getInstance
argument_list|()
operator|.
name|setSortBy
argument_list|(
name|iOnline
argument_list|,
literal|1
argument_list|,
name|header
operator|.
name|getOrder
argument_list|()
condition|?
literal|1
operator|+
name|sort
operator|.
name|ordinal
argument_list|()
else|:
operator|-
literal|1
operator|-
name|sort
operator|.
name|ordinal
argument_list|()
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Override
specifier|public
name|boolean
name|isApplicable
parameter_list|()
block|{
return|return
literal|true
return|;
block|}
annotation|@
name|Override
specifier|public
name|boolean
name|hasSeparator
parameter_list|()
block|{
return|return
literal|false
return|;
block|}
annotation|@
name|Override
specifier|public
name|String
name|getName
parameter_list|()
block|{
return|return
name|MESSAGES
operator|.
name|sortBy
argument_list|(
name|column
argument_list|)
return|;
block|}
block|}
argument_list|)
expr_stmt|;
block|}
specifier|public
specifier|static
class|class
name|SimpleSuggestion
implements|implements
name|Suggestion
block|{
specifier|private
name|String
name|iDisplay
decl_stmt|,
name|iReplace
decl_stmt|;
specifier|public
name|SimpleSuggestion
parameter_list|(
name|String
name|display
parameter_list|,
name|String
name|replace
parameter_list|)
block|{
name|iDisplay
operator|=
name|display
expr_stmt|;
name|iReplace
operator|=
name|replace
expr_stmt|;
block|}
specifier|public
name|SimpleSuggestion
parameter_list|(
name|String
name|replace
parameter_list|)
block|{
name|this
argument_list|(
name|replace
argument_list|,
name|replace
argument_list|)
expr_stmt|;
block|}
specifier|public
name|String
name|getDisplayString
parameter_list|()
block|{
return|return
name|iDisplay
return|;
block|}
specifier|public
name|String
name|getReplacementString
parameter_list|()
block|{
return|return
name|iReplace
return|;
block|}
block|}
specifier|protected
name|void
name|addSortOperation
parameter_list|(
specifier|final
name|UniTimeTableHeader
name|header
parameter_list|,
specifier|final
name|ChangeLogComparator
operator|.
name|SortBy
name|sort
parameter_list|,
specifier|final
name|String
name|column
parameter_list|)
block|{
name|header
operator|.
name|addOperation
argument_list|(
operator|new
name|Operation
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|void
name|execute
parameter_list|()
block|{
name|iLogTable
operator|.
name|sort
argument_list|(
name|header
argument_list|,
operator|new
name|ChangeLogComparator
argument_list|(
name|sort
argument_list|)
argument_list|)
expr_stmt|;
name|SectioningStatusCookie
operator|.
name|getInstance
argument_list|()
operator|.
name|setSortBy
argument_list|(
name|iOnline
argument_list|,
literal|2
argument_list|,
name|header
operator|.
name|getOrder
argument_list|()
condition|?
literal|1
operator|+
name|sort
operator|.
name|ordinal
argument_list|()
else|:
operator|-
literal|1
operator|-
name|sort
operator|.
name|ordinal
argument_list|()
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Override
specifier|public
name|boolean
name|isApplicable
parameter_list|()
block|{
return|return
literal|true
return|;
block|}
annotation|@
name|Override
specifier|public
name|boolean
name|hasSeparator
parameter_list|()
block|{
return|return
literal|false
return|;
block|}
annotation|@
name|Override
specifier|public
name|String
name|getName
parameter_list|()
block|{
return|return
name|MESSAGES
operator|.
name|sortBy
argument_list|(
name|column
argument_list|)
return|;
block|}
block|}
argument_list|)
expr_stmt|;
block|}
specifier|public
class|class
name|SuggestCallback
implements|implements
name|AsyncCallback
argument_list|<
name|List
argument_list|<
name|String
index|[]
argument_list|>
argument_list|>
block|{
specifier|private
name|Request
name|iRequest
decl_stmt|;
specifier|private
name|Callback
name|iCallback
decl_stmt|;
specifier|public
name|SuggestCallback
parameter_list|(
name|Request
name|request
parameter_list|,
name|Callback
name|callback
parameter_list|)
block|{
name|iRequest
operator|=
name|request
expr_stmt|;
name|iCallback
operator|=
name|callback
expr_stmt|;
block|}
specifier|public
name|void
name|onFailure
parameter_list|(
name|Throwable
name|caught
parameter_list|)
block|{
name|ArrayList
argument_list|<
name|Suggestion
argument_list|>
name|suggestions
init|=
operator|new
name|ArrayList
argument_list|<
name|Suggestion
argument_list|>
argument_list|()
decl_stmt|;
comment|// suggestions.add(new SimpleSuggestion("<font color='red'>"+caught.getMessage()+"</font>", ""));
name|iCallback
operator|.
name|onSuggestionsReady
argument_list|(
name|iRequest
argument_list|,
operator|new
name|Response
argument_list|(
name|suggestions
argument_list|)
argument_list|)
expr_stmt|;
name|ToolBox
operator|.
name|checkAccess
argument_list|(
name|caught
argument_list|)
expr_stmt|;
block|}
specifier|public
name|void
name|onSuccess
parameter_list|(
name|List
argument_list|<
name|String
index|[]
argument_list|>
name|result
parameter_list|)
block|{
name|ArrayList
argument_list|<
name|Suggestion
argument_list|>
name|suggestions
init|=
operator|new
name|ArrayList
argument_list|<
name|Suggestion
argument_list|>
argument_list|()
decl_stmt|;
for|for
control|(
name|String
index|[]
name|suggestion
range|:
name|result
control|)
block|{
name|suggestions
operator|.
name|add
argument_list|(
operator|new
name|SimpleSuggestion
argument_list|(
name|suggestion
index|[
literal|1
index|]
argument_list|,
name|suggestion
index|[
literal|0
index|]
argument_list|)
argument_list|)
expr_stmt|;
block|}
name|iCallback
operator|.
name|onSuggestionsReady
argument_list|(
name|iRequest
argument_list|,
operator|new
name|Response
argument_list|(
name|suggestions
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|}
specifier|public
specifier|static
class|class
name|NumberCell
extends|extends
name|HTML
implements|implements
name|HasCellAlignment
block|{
specifier|public
name|NumberCell
parameter_list|(
name|Integer
name|value
parameter_list|,
name|Integer
name|total
parameter_list|)
block|{
name|super
argument_list|()
expr_stmt|;
if|if
condition|(
name|value
operator|==
literal|null
condition|)
block|{
if|if
condition|(
name|total
operator|!=
literal|null
condition|)
name|setHTML
argument_list|(
name|total
operator|==
literal|0
condition|?
literal|"-"
else|:
name|total
operator|<
literal|0
condition|?
literal|"&infin;"
else|:
name|total
operator|.
name|toString
argument_list|()
argument_list|)
expr_stmt|;
block|}
else|else
block|{
if|if
condition|(
name|value
operator|.
name|equals
argument_list|(
name|total
argument_list|)
condition|)
name|setHTML
argument_list|(
name|total
operator|==
literal|0
condition|?
literal|"-"
else|:
name|total
operator|<
literal|0
condition|?
literal|"&infin;"
else|:
name|total
operator|.
name|toString
argument_list|()
argument_list|)
expr_stmt|;
else|else
name|setHTML
argument_list|(
operator|(
name|value
operator|<
literal|0
condition|?
literal|"&infin;"
else|:
name|value
operator|.
name|toString
argument_list|()
operator|)
operator|+
literal|" / "
operator|+
operator|(
name|total
operator|<
literal|0
condition|?
literal|"&infin;"
else|:
name|total
operator|.
name|toString
argument_list|()
operator|)
argument_list|)
expr_stmt|;
block|}
block|}
annotation|@
name|Override
specifier|public
name|HorizontalAlignmentConstant
name|getCellAlignment
parameter_list|()
block|{
return|return
name|HasHorizontalAlignment
operator|.
name|ALIGN_RIGHT
return|;
block|}
block|}
specifier|public
specifier|static
class|class
name|TitleCell
extends|extends
name|HTML
implements|implements
name|HasColSpan
block|{
specifier|public
name|TitleCell
parameter_list|(
name|String
name|title
parameter_list|)
block|{
name|super
argument_list|(
name|title
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Override
specifier|public
name|int
name|getColSpan
parameter_list|()
block|{
return|return
literal|2
return|;
block|}
block|}
specifier|public
specifier|static
class|class
name|AvailableCell
extends|extends
name|HTML
implements|implements
name|HasCellAlignment
block|{
specifier|public
name|AvailableCell
parameter_list|(
name|EnrollmentInfo
name|e
parameter_list|)
block|{
name|super
argument_list|()
expr_stmt|;
name|int
name|other
init|=
operator|(
name|e
operator|.
name|getOther
argument_list|()
operator|==
literal|null
condition|?
literal|0
else|:
name|e
operator|.
name|getOther
argument_list|()
operator|)
decl_stmt|;
if|if
condition|(
name|e
operator|.
name|getLimit
argument_list|()
operator|==
literal|null
condition|)
block|{
name|setHTML
argument_list|(
literal|"-"
argument_list|)
expr_stmt|;
name|setTitle
argument_list|(
name|MESSAGES
operator|.
name|availableNoLimit
argument_list|()
argument_list|)
expr_stmt|;
block|}
if|else if
condition|(
name|e
operator|.
name|getLimit
argument_list|()
operator|<
literal|0
condition|)
block|{
if|if
condition|(
name|e
operator|.
name|getAvailable
argument_list|()
operator|!=
literal|null
operator|&&
name|e
operator|.
name|getAvailable
argument_list|()
operator|==
literal|0
condition|)
block|{
name|setHTML
argument_list|(
literal|"&infin;"
operator|+
name|MESSAGES
operator|.
name|htmlReservationSign
argument_list|()
argument_list|)
expr_stmt|;
name|setTitle
argument_list|(
name|MESSAGES
operator|.
name|availableUnlimitedWithReservation
argument_list|()
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|setHTML
argument_list|(
literal|"&infin;"
argument_list|)
expr_stmt|;
name|setTitle
argument_list|(
name|MESSAGES
operator|.
name|availableUnlimited
argument_list|()
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
if|if
condition|(
name|e
operator|.
name|getAvailable
argument_list|()
operator|==
name|e
operator|.
name|getLimit
argument_list|()
operator|-
name|e
operator|.
name|getTotalEnrollment
argument_list|()
operator|-
name|other
condition|)
block|{
name|setHTML
argument_list|(
name|e
operator|.
name|getAvailable
argument_list|()
operator|+
literal|" / "
operator|+
name|e
operator|.
name|getLimit
argument_list|()
argument_list|)
expr_stmt|;
if|if
condition|(
name|e
operator|.
name|getAvailable
argument_list|()
operator|==
literal|0
condition|)
name|setTitle
argument_list|(
name|MESSAGES
operator|.
name|availableNot
argument_list|(
name|e
operator|.
name|getLimit
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
else|else
name|setTitle
argument_list|(
name|MESSAGES
operator|.
name|available
argument_list|(
name|e
operator|.
name|getAvailable
argument_list|()
argument_list|,
name|e
operator|.
name|getLimit
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
block|}
if|else if
condition|(
name|e
operator|.
name|getAvailable
argument_list|()
operator|==
literal|0
operator|&&
name|e
operator|.
name|getLimit
argument_list|()
operator|>
name|e
operator|.
name|getTotalEnrollment
argument_list|()
operator|+
name|other
condition|)
block|{
name|setHTML
argument_list|(
operator|(
name|e
operator|.
name|getLimit
argument_list|()
operator|-
name|e
operator|.
name|getTotalEnrollment
argument_list|()
operator|-
name|other
operator|)
operator|+
name|MESSAGES
operator|.
name|htmlReservationSign
argument_list|()
operator|+
literal|" / "
operator|+
name|e
operator|.
name|getLimit
argument_list|()
argument_list|)
expr_stmt|;
name|setTitle
argument_list|(
name|MESSAGES
operator|.
name|availableWithReservation
argument_list|(
name|e
operator|.
name|getLimit
argument_list|()
operator|-
name|e
operator|.
name|getTotalEnrollment
argument_list|()
operator|-
name|other
argument_list|,
name|e
operator|.
name|getLimit
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|setHTML
argument_list|(
name|e
operator|.
name|getAvailable
argument_list|()
operator|+
literal|" + "
operator|+
operator|(
name|e
operator|.
name|getLimit
argument_list|()
operator|-
name|e
operator|.
name|getTotalEnrollment
argument_list|()
operator|-
name|e
operator|.
name|getAvailable
argument_list|()
operator|-
name|other
operator|)
operator|+
name|MESSAGES
operator|.
name|htmlReservationSign
argument_list|()
operator|+
literal|" / "
operator|+
name|e
operator|.
name|getLimit
argument_list|()
argument_list|)
expr_stmt|;
name|setTitle
argument_list|(
name|MESSAGES
operator|.
name|availableSomeReservation
argument_list|(
name|e
operator|.
name|getAvailable
argument_list|()
argument_list|,
name|e
operator|.
name|getLimit
argument_list|()
argument_list|,
name|e
operator|.
name|getLimit
argument_list|()
operator|-
name|e
operator|.
name|getTotalEnrollment
argument_list|()
operator|-
name|e
operator|.
name|getAvailable
argument_list|()
operator|-
name|other
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|}
block|}
specifier|public
specifier|static
name|boolean
name|hasReservedSpace
parameter_list|(
name|EnrollmentInfo
name|e
parameter_list|)
block|{
if|if
condition|(
name|e
operator|.
name|getLimit
argument_list|()
operator|<
literal|0
condition|)
return|return
literal|false
return|;
if|if
condition|(
name|e
operator|.
name|getLimit
argument_list|()
operator|<
literal|0
condition|)
block|{
return|return
name|e
operator|.
name|getAvailable
argument_list|()
operator|==
literal|0
return|;
block|}
else|else
block|{
return|return
name|e
operator|.
name|getAvailable
argument_list|()
operator|!=
name|e
operator|.
name|getLimit
argument_list|()
operator|-
name|e
operator|.
name|getTotalEnrollment
argument_list|()
operator|-
operator|(
name|e
operator|.
name|getOther
argument_list|()
operator|==
literal|null
condition|?
literal|0
else|:
name|e
operator|.
name|getOther
argument_list|()
operator|)
return|;
block|}
block|}
annotation|@
name|Override
specifier|public
name|HorizontalAlignmentConstant
name|getCellAlignment
parameter_list|()
block|{
return|return
name|HasHorizontalAlignment
operator|.
name|ALIGN_RIGHT
return|;
block|}
block|}
specifier|public
specifier|static
class|class
name|WaitListCell
extends|extends
name|HTML
implements|implements
name|HasCellAlignment
block|{
specifier|public
name|WaitListCell
parameter_list|(
name|int
name|wait
parameter_list|,
name|int
name|tWait
parameter_list|,
name|int
name|unasg
parameter_list|,
name|int
name|tUnasg
parameter_list|,
name|Integer
name|topWaitingPriority
parameter_list|)
block|{
name|super
argument_list|()
expr_stmt|;
if|if
condition|(
name|tWait
operator|==
literal|0
operator|||
name|tWait
operator|==
name|tUnasg
condition|)
block|{
comment|// no wait-list or all wait-listed
if|if
condition|(
name|unasg
operator|==
name|tUnasg
condition|)
block|{
name|setHTML
argument_list|(
name|unasg
operator|==
literal|0
condition|?
literal|"-"
else|:
name|String
operator|.
name|valueOf
argument_list|(
name|unasg
argument_list|)
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|setHTML
argument_list|(
name|unasg
operator|+
literal|" / "
operator|+
name|tUnasg
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|tWait
operator|>
literal|0
condition|)
name|setHTML
argument_list|(
name|getHTML
argument_list|()
operator|+
name|MESSAGES
operator|.
name|htmlWaitListSign
argument_list|()
argument_list|)
expr_stmt|;
block|}
else|else
block|{
if|if
condition|(
name|wait
operator|==
name|tWait
operator|&&
name|unasg
operator|==
name|tUnasg
condition|)
block|{
name|setHTML
argument_list|(
name|wait
operator|==
literal|0
condition|?
name|String
operator|.
name|valueOf
argument_list|(
name|unasg
argument_list|)
else|:
name|wait
operator|==
name|unasg
condition|?
name|wait
operator|+
name|MESSAGES
operator|.
name|htmlWaitListSign
argument_list|()
else|:
operator|(
name|unasg
operator|-
name|wait
operator|)
operator|+
literal|" + "
operator|+
name|wait
operator|+
name|MESSAGES
operator|.
name|htmlWaitListSign
argument_list|()
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|setHTML
argument_list|(
operator|(
name|wait
operator|==
literal|0
condition|?
name|String
operator|.
name|valueOf
argument_list|(
name|unasg
argument_list|)
else|:
name|wait
operator|==
name|unasg
condition|?
name|wait
operator|+
name|MESSAGES
operator|.
name|htmlWaitListSign
argument_list|()
else|:
operator|(
name|unasg
operator|-
name|wait
operator|)
operator|+
literal|" + "
operator|+
name|wait
operator|+
name|MESSAGES
operator|.
name|htmlWaitListSign
argument_list|()
operator|)
operator|+
literal|" / "
operator|+
name|tUnasg
argument_list|)
expr_stmt|;
block|}
block|}
if|if
condition|(
name|topWaitingPriority
operator|!=
literal|null
condition|)
name|setHTML
argument_list|(
name|getHTML
argument_list|()
operator|+
literal|" "
operator|+
name|MESSAGES
operator|.
name|firstWaitListedPrioritySign
argument_list|(
name|topWaitingPriority
argument_list|)
argument_list|)
expr_stmt|;
block|}
specifier|public
name|WaitListCell
parameter_list|(
name|StudentInfo
name|e
parameter_list|)
block|{
name|this
argument_list|(
name|e
operator|.
name|hasWaitlist
argument_list|()
condition|?
name|e
operator|.
name|getWaitlist
argument_list|()
else|:
literal|0
argument_list|,
name|e
operator|.
name|hasTotalWaitlist
argument_list|()
condition|?
name|e
operator|.
name|getTotalWaitlist
argument_list|()
else|:
literal|0
argument_list|,
name|e
operator|.
name|hasUnassigned
argument_list|()
condition|?
name|e
operator|.
name|getUnassigned
argument_list|()
else|:
literal|0
argument_list|,
name|e
operator|.
name|hasTotalUnassigned
argument_list|()
condition|?
name|e
operator|.
name|getTotalUnassigned
argument_list|()
else|:
literal|0
argument_list|,
name|e
operator|.
name|getTopWaitingPriority
argument_list|()
argument_list|)
expr_stmt|;
block|}
specifier|public
name|WaitListCell
parameter_list|(
name|EnrollmentInfo
name|e
parameter_list|)
block|{
name|this
argument_list|(
name|e
operator|.
name|hasWaitlist
argument_list|()
condition|?
name|e
operator|.
name|getWaitlist
argument_list|()
else|:
literal|0
argument_list|,
name|e
operator|.
name|hasTotalWaitlist
argument_list|()
condition|?
name|e
operator|.
name|getTotalWaitlist
argument_list|()
else|:
literal|0
argument_list|,
name|e
operator|.
name|hasUnassigned
argument_list|()
condition|?
name|e
operator|.
name|getUnassignedPrimary
argument_list|()
else|:
literal|0
argument_list|,
name|e
operator|.
name|hasTotalUnassigned
argument_list|()
condition|?
name|e
operator|.
name|getTotalUnassignedPrimary
argument_list|()
else|:
literal|0
argument_list|,
literal|null
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Override
specifier|public
name|HorizontalAlignmentConstant
name|getCellAlignment
parameter_list|()
block|{
return|return
name|HasHorizontalAlignment
operator|.
name|ALIGN_RIGHT
return|;
block|}
block|}
specifier|public
specifier|static
class|class
name|EnrollmentComparator
implements|implements
name|Comparator
argument_list|<
name|EnrollmentInfo
argument_list|>
block|{
specifier|public
enum|enum
name|SortBy
block|{
name|SUBJECT
block|,
name|COURSE
block|,
name|TITLE
block|,
name|CONSENT
block|,
name|LIMIT
block|,
name|PROJECTION
block|,
name|ENROLLMENT
block|,
name|WAITLIST
block|,
name|RESERVATION
block|,
name|NEED_CONSENT
block|,
name|ALTERNATIVES
block|, 		}
specifier|private
name|SortBy
name|iSortBy
decl_stmt|;
specifier|public
name|EnrollmentComparator
parameter_list|(
name|SortBy
name|sortBy
parameter_list|)
block|{
name|iSortBy
operator|=
name|sortBy
expr_stmt|;
block|}
annotation|@
name|Override
specifier|public
name|int
name|compare
parameter_list|(
name|EnrollmentInfo
name|e1
parameter_list|,
name|EnrollmentInfo
name|e2
parameter_list|)
block|{
comment|// Totals line is always last
if|if
condition|(
name|e1
operator|.
name|getCourseId
argument_list|()
operator|==
literal|null
condition|)
return|return
literal|1
return|;
if|if
condition|(
name|e2
operator|.
name|getCourseId
argument_list|()
operator|==
literal|null
condition|)
return|return
operator|-
literal|1
return|;
if|if
condition|(
name|e1
operator|.
name|getCourseId
argument_list|()
operator|.
name|equals
argument_list|(
name|e2
operator|.
name|getCourseId
argument_list|()
argument_list|)
condition|)
block|{
comment|// Same course
comment|// Course line first
if|if
condition|(
name|e1
operator|.
name|getConfigId
argument_list|()
operator|==
literal|null
condition|)
return|return
operator|-
literal|1
return|;
if|if
condition|(
name|e2
operator|.
name|getConfigId
argument_list|()
operator|==
literal|null
condition|)
return|return
operator|-
literal|1
return|;
return|return
name|compareClasses
argument_list|(
name|e1
argument_list|,
name|e2
argument_list|)
return|;
block|}
else|else
block|{
comment|// Different course
return|return
name|compareCourses
argument_list|(
name|e1
argument_list|,
name|e2
argument_list|)
return|;
block|}
block|}
specifier|private
name|int
name|compareClasses
parameter_list|(
name|EnrollmentInfo
name|e1
parameter_list|,
name|EnrollmentInfo
name|e2
parameter_list|)
block|{
return|return
literal|0
return|;
block|}
specifier|private
name|int
name|compareCourses
parameter_list|(
name|EnrollmentInfo
name|e1
parameter_list|,
name|EnrollmentInfo
name|e2
parameter_list|)
block|{
name|int
name|cmp
decl_stmt|;
switch|switch
condition|(
name|iSortBy
condition|)
block|{
case|case
name|SUBJECT
case|:
break|break;
case|case
name|COURSE
case|:
name|cmp
operator|=
name|e1
operator|.
name|getCourseNbr
argument_list|()
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getCourseNbr
argument_list|()
argument_list|)
expr_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
name|cmp
return|;
break|break;
case|case
name|TITLE
case|:
name|cmp
operator|=
operator|(
name|e1
operator|.
name|getTitle
argument_list|()
operator|==
literal|null
condition|?
literal|""
else|:
name|e1
operator|.
name|getTitle
argument_list|()
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getTitle
argument_list|()
operator|==
literal|null
condition|?
literal|""
else|:
name|e2
operator|.
name|getTitle
argument_list|()
argument_list|)
expr_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
name|cmp
return|;
break|break;
case|case
name|CONSENT
case|:
name|cmp
operator|=
operator|(
name|e1
operator|.
name|getConsent
argument_list|()
operator|==
literal|null
condition|?
literal|""
else|:
name|e1
operator|.
name|getConsent
argument_list|()
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getConsent
argument_list|()
operator|==
literal|null
condition|?
literal|""
else|:
name|e2
operator|.
name|getConsent
argument_list|()
argument_list|)
expr_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
name|cmp
return|;
break|break;
case|case
name|LIMIT
case|:
name|cmp
operator|=
operator|(
name|e1
operator|.
name|getAvailable
argument_list|()
operator|==
literal|null
condition|?
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
else|:
name|e1
operator|.
name|getAvailable
argument_list|()
operator|<
literal|0
condition|?
operator|new
name|Integer
argument_list|(
name|Integer
operator|.
name|MAX_VALUE
argument_list|)
else|:
name|e1
operator|.
name|getAvailable
argument_list|()
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getAvailable
argument_list|()
operator|==
literal|null
condition|?
literal|0
else|:
name|e2
operator|.
name|getAvailable
argument_list|()
operator|<
literal|0
condition|?
name|Integer
operator|.
name|MAX_VALUE
else|:
name|e2
operator|.
name|getAvailable
argument_list|()
argument_list|)
expr_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
name|cmp
return|;
name|cmp
operator|=
operator|(
name|e1
operator|.
name|getLimit
argument_list|()
operator|==
literal|null
condition|?
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
else|:
name|e1
operator|.
name|getLimit
argument_list|()
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getLimit
argument_list|()
operator|==
literal|null
condition|?
literal|0
else|:
name|e2
operator|.
name|getLimit
argument_list|()
argument_list|)
expr_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
name|cmp
return|;
break|break;
case|case
name|PROJECTION
case|:
name|cmp
operator|=
operator|(
name|e1
operator|.
name|getProjection
argument_list|()
operator|==
literal|null
condition|?
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
else|:
name|e1
operator|.
name|getProjection
argument_list|()
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getProjection
argument_list|()
operator|==
literal|null
condition|?
literal|0
else|:
name|e2
operator|.
name|getProjection
argument_list|()
argument_list|)
expr_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
operator|-
name|cmp
return|;
break|break;
case|case
name|ENROLLMENT
case|:
name|cmp
operator|=
operator|(
name|e1
operator|.
name|getEnrollment
argument_list|()
operator|==
literal|null
condition|?
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
else|:
name|e1
operator|.
name|getEnrollment
argument_list|()
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getEnrollment
argument_list|()
operator|==
literal|null
condition|?
literal|0
else|:
name|e2
operator|.
name|getEnrollment
argument_list|()
argument_list|)
expr_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
operator|-
name|cmp
return|;
name|cmp
operator|=
operator|(
name|e1
operator|.
name|getTotalEnrollment
argument_list|()
operator|==
literal|null
condition|?
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
else|:
name|e1
operator|.
name|getTotalEnrollment
argument_list|()
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getTotalEnrollment
argument_list|()
operator|==
literal|null
condition|?
literal|0
else|:
name|e2
operator|.
name|getTotalEnrollment
argument_list|()
argument_list|)
expr_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
operator|-
name|cmp
return|;
break|break;
case|case
name|WAITLIST
case|:
name|cmp
operator|=
operator|(
name|e1
operator|.
name|getWaitlist
argument_list|()
operator|==
literal|null
condition|?
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
else|:
name|e1
operator|.
name|getWaitlist
argument_list|()
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getWaitlist
argument_list|()
operator|==
literal|null
condition|?
literal|0
else|:
name|e2
operator|.
name|getWaitlist
argument_list|()
argument_list|)
expr_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
operator|-
name|cmp
return|;
name|cmp
operator|=
operator|(
name|e1
operator|.
name|getUnassignedPrimary
argument_list|()
operator|==
literal|null
condition|?
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
else|:
name|e1
operator|.
name|getUnassignedPrimary
argument_list|()
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getUnassignedPrimary
argument_list|()
operator|==
literal|null
condition|?
literal|0
else|:
name|e2
operator|.
name|getUnassignedPrimary
argument_list|()
argument_list|)
expr_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
operator|-
name|cmp
return|;
name|cmp
operator|=
operator|(
name|e1
operator|.
name|getTotalWaitlist
argument_list|()
operator|==
literal|null
condition|?
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
else|:
name|e1
operator|.
name|getTotalWaitlist
argument_list|()
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getTotalWaitlist
argument_list|()
operator|==
literal|null
condition|?
literal|0
else|:
name|e2
operator|.
name|getTotalWaitlist
argument_list|()
argument_list|)
expr_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
operator|-
name|cmp
return|;
name|cmp
operator|=
operator|(
name|e1
operator|.
name|getTotalUnassignedPrimary
argument_list|()
operator|==
literal|null
condition|?
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
else|:
name|e1
operator|.
name|getTotalUnassignedPrimary
argument_list|()
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getTotalUnassignedPrimary
argument_list|()
operator|==
literal|null
condition|?
literal|0
else|:
name|e2
operator|.
name|getTotalUnassignedPrimary
argument_list|()
argument_list|)
expr_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
operator|-
name|cmp
return|;
break|break;
case|case
name|RESERVATION
case|:
name|cmp
operator|=
operator|(
name|e1
operator|.
name|getReservation
argument_list|()
operator|==
literal|null
condition|?
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
else|:
name|e1
operator|.
name|getReservation
argument_list|()
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getReservation
argument_list|()
operator|==
literal|null
condition|?
literal|0
else|:
name|e2
operator|.
name|getReservation
argument_list|()
argument_list|)
expr_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
operator|-
name|cmp
return|;
name|cmp
operator|=
operator|(
name|e1
operator|.
name|getTotalReservation
argument_list|()
operator|==
literal|null
condition|?
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
else|:
name|e1
operator|.
name|getTotalReservation
argument_list|()
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getTotalReservation
argument_list|()
operator|==
literal|null
condition|?
literal|0
else|:
name|e2
operator|.
name|getTotalReservation
argument_list|()
argument_list|)
expr_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
operator|-
name|cmp
return|;
break|break;
case|case
name|NEED_CONSENT
case|:
name|cmp
operator|=
operator|(
name|e1
operator|.
name|getConsentNeeded
argument_list|()
operator|==
literal|null
condition|?
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
else|:
operator|new
name|Integer
argument_list|(
name|e1
operator|.
name|getConsentNeeded
argument_list|()
argument_list|)
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getConsentNeeded
argument_list|()
operator|==
literal|null
condition|?
literal|0
else|:
name|e2
operator|.
name|getConsentNeeded
argument_list|()
argument_list|)
expr_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
operator|-
name|cmp
return|;
name|cmp
operator|=
operator|(
name|e1
operator|.
name|getTotalConsentNeeded
argument_list|()
operator|==
literal|null
condition|?
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
else|:
operator|new
name|Integer
argument_list|(
name|e1
operator|.
name|getTotalConsentNeeded
argument_list|()
argument_list|)
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getTotalConsentNeeded
argument_list|()
operator|==
literal|null
condition|?
literal|0
else|:
name|e2
operator|.
name|getTotalConsentNeeded
argument_list|()
argument_list|)
expr_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
operator|-
name|cmp
return|;
break|break;
case|case
name|ALTERNATIVES
case|:
name|cmp
operator|=
operator|(
name|e1
operator|.
name|getUnassignedAlternative
argument_list|()
operator|==
literal|null
condition|?
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
else|:
name|e1
operator|.
name|getUnassignedAlternative
argument_list|()
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getUnassignedAlternative
argument_list|()
operator|==
literal|null
condition|?
literal|0
else|:
name|e2
operator|.
name|getUnassignedAlternative
argument_list|()
argument_list|)
expr_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
operator|-
name|cmp
return|;
name|cmp
operator|=
operator|(
name|e1
operator|.
name|getTotalUnassignedAlternative
argument_list|()
operator|==
literal|null
condition|?
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
else|:
name|e1
operator|.
name|getTotalUnassignedAlternative
argument_list|()
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getTotalUnassignedAlternative
argument_list|()
operator|==
literal|null
condition|?
literal|0
else|:
name|e2
operator|.
name|getTotalUnassignedAlternative
argument_list|()
argument_list|)
expr_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
operator|-
name|cmp
return|;
break|break;
block|}
comment|// Default sort
name|cmp
operator|=
name|e1
operator|.
name|getSubject
argument_list|()
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getSubject
argument_list|()
argument_list|)
expr_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
name|cmp
return|;
name|cmp
operator|=
name|e1
operator|.
name|getCourseNbr
argument_list|()
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getCourseNbr
argument_list|()
argument_list|)
expr_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
name|cmp
return|;
return|return
literal|0
return|;
block|}
block|}
specifier|public
specifier|static
class|class
name|StudentComparator
implements|implements
name|Comparator
argument_list|<
name|StudentInfo
argument_list|>
block|{
specifier|public
enum|enum
name|SortBy
block|{
name|EXTERNAL_ID
block|,
name|STUDENT
block|,
name|AREA
block|,
name|CLASSIFICATION
block|,
name|MAJOR
block|,
name|GROUP
block|,
name|ACCOMODATION
block|,
name|STATUS
block|,
name|ENROLLMENT
block|,
name|WAITLIST
block|,
name|RESERVATION
block|,
name|CONSENT
block|,
name|CREDIT
block|,
name|REQUEST_TS
block|,
name|ENROLLMENT_TS
block|,
name|EMAIL_TS
block|,
name|NOTE
block|,
name|DIST_CONF
block|,
name|OVERLAPS
block|,
name|FT_OVERLAPS
block|,
name|PREF_IM
block|,
name|PREF_SEC
block|, 			; 		}
specifier|private
name|SortBy
name|iSortBy
decl_stmt|;
specifier|public
name|StudentComparator
parameter_list|(
name|SortBy
name|sortBy
parameter_list|)
block|{
name|iSortBy
operator|=
name|sortBy
expr_stmt|;
block|}
specifier|protected
name|int
name|doCompare
parameter_list|(
name|StudentInfo
name|e1
parameter_list|,
name|StudentInfo
name|e2
parameter_list|)
block|{
name|int
name|cmp
decl_stmt|;
switch|switch
condition|(
name|iSortBy
condition|)
block|{
case|case
name|EXTERNAL_ID
case|:
return|return
operator|(
name|e1
operator|.
name|getStudent
argument_list|()
operator|.
name|isCanShowExternalId
argument_list|()
condition|?
name|e1
operator|.
name|getStudent
argument_list|()
operator|.
name|getExternalId
argument_list|()
else|:
literal|""
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getStudent
argument_list|()
operator|.
name|isCanShowExternalId
argument_list|()
condition|?
name|e2
operator|.
name|getStudent
argument_list|()
operator|.
name|getExternalId
argument_list|()
else|:
literal|""
argument_list|)
return|;
case|case
name|STUDENT
case|:
return|return
name|e1
operator|.
name|getStudent
argument_list|()
operator|.
name|getName
argument_list|()
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getStudent
argument_list|()
operator|.
name|getName
argument_list|()
argument_list|)
return|;
case|case
name|AREA
case|:
name|cmp
operator|=
name|e1
operator|.
name|getStudent
argument_list|()
operator|.
name|getAreaClasf
argument_list|(
literal|"|"
argument_list|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getStudent
argument_list|()
operator|.
name|getAreaClasf
argument_list|(
literal|"|"
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
name|cmp
return|;
return|return
name|e1
operator|.
name|getStudent
argument_list|()
operator|.
name|getMajor
argument_list|(
literal|"|"
argument_list|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getStudent
argument_list|()
operator|.
name|getMajor
argument_list|(
literal|"|"
argument_list|)
argument_list|)
return|;
case|case
name|CLASSIFICATION
case|:
name|cmp
operator|=
name|e1
operator|.
name|getStudent
argument_list|()
operator|.
name|getClassification
argument_list|(
literal|"|"
argument_list|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getStudent
argument_list|()
operator|.
name|getClassification
argument_list|(
literal|"|"
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
name|cmp
return|;
name|cmp
operator|=
name|e1
operator|.
name|getStudent
argument_list|()
operator|.
name|getArea
argument_list|(
literal|"|"
argument_list|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getStudent
argument_list|()
operator|.
name|getArea
argument_list|(
literal|"|"
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
name|cmp
return|;
return|return
name|e1
operator|.
name|getStudent
argument_list|()
operator|.
name|getMajor
argument_list|(
literal|"|"
argument_list|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getStudent
argument_list|()
operator|.
name|getMajor
argument_list|(
literal|"|"
argument_list|)
argument_list|)
return|;
case|case
name|MAJOR
case|:
name|cmp
operator|=
name|e1
operator|.
name|getStudent
argument_list|()
operator|.
name|getMajor
argument_list|(
literal|"|"
argument_list|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getStudent
argument_list|()
operator|.
name|getMajor
argument_list|(
literal|"|"
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
name|cmp
return|;
return|return
name|e1
operator|.
name|getStudent
argument_list|()
operator|.
name|getAreaClasf
argument_list|(
literal|"|"
argument_list|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getStudent
argument_list|()
operator|.
name|getAreaClasf
argument_list|(
literal|"|"
argument_list|)
argument_list|)
return|;
case|case
name|GROUP
case|:
name|cmp
operator|=
name|e1
operator|.
name|getStudent
argument_list|()
operator|.
name|getGroup
argument_list|(
literal|"|"
argument_list|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getStudent
argument_list|()
operator|.
name|getGroup
argument_list|(
literal|"|"
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
name|cmp
return|;
return|return
name|e1
operator|.
name|getStudent
argument_list|()
operator|.
name|getAreaClasf
argument_list|(
literal|"|"
argument_list|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getStudent
argument_list|()
operator|.
name|getAreaClasf
argument_list|(
literal|"|"
argument_list|)
argument_list|)
return|;
case|case
name|ACCOMODATION
case|:
name|cmp
operator|=
name|e1
operator|.
name|getStudent
argument_list|()
operator|.
name|getAccommodation
argument_list|(
literal|"|"
argument_list|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getStudent
argument_list|()
operator|.
name|getAccommodation
argument_list|(
literal|"|"
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
name|cmp
return|;
return|return
name|e1
operator|.
name|getStudent
argument_list|()
operator|.
name|getAreaClasf
argument_list|(
literal|"|"
argument_list|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getStudent
argument_list|()
operator|.
name|getAreaClasf
argument_list|(
literal|"|"
argument_list|)
argument_list|)
return|;
case|case
name|STATUS
case|:
return|return
operator|(
name|e1
operator|.
name|getStatus
argument_list|()
operator|==
literal|null
condition|?
literal|""
else|:
name|e1
operator|.
name|getStatus
argument_list|()
operator|)
operator|.
name|compareToIgnoreCase
argument_list|(
name|e2
operator|.
name|getStatus
argument_list|()
operator|==
literal|null
condition|?
literal|""
else|:
name|e2
operator|.
name|getStatus
argument_list|()
argument_list|)
return|;
case|case
name|ENROLLMENT
case|:
name|cmp
operator|=
operator|(
name|e1
operator|.
name|getEnrollment
argument_list|()
operator|==
literal|null
condition|?
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
else|:
name|e1
operator|.
name|getEnrollment
argument_list|()
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getEnrollment
argument_list|()
operator|==
literal|null
condition|?
literal|0
else|:
name|e2
operator|.
name|getEnrollment
argument_list|()
argument_list|)
expr_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
operator|-
name|cmp
return|;
return|return
operator|(
name|e1
operator|.
name|getTotalEnrollment
argument_list|()
operator|==
literal|null
condition|?
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
else|:
name|e1
operator|.
name|getTotalEnrollment
argument_list|()
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getTotalEnrollment
argument_list|()
operator|==
literal|null
condition|?
literal|0
else|:
name|e2
operator|.
name|getTotalEnrollment
argument_list|()
argument_list|)
return|;
case|case
name|WAITLIST
case|:
name|cmp
operator|=
operator|(
name|e1
operator|.
name|getUnassigned
argument_list|()
operator|==
literal|null
condition|?
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
else|:
name|e1
operator|.
name|getUnassigned
argument_list|()
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getUnassigned
argument_list|()
operator|==
literal|null
condition|?
literal|0
else|:
name|e2
operator|.
name|getUnassigned
argument_list|()
argument_list|)
expr_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
operator|-
name|cmp
return|;
name|cmp
operator|=
operator|(
name|e1
operator|.
name|getWaitlist
argument_list|()
operator|==
literal|null
condition|?
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
else|:
name|e1
operator|.
name|getWaitlist
argument_list|()
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getWaitlist
argument_list|()
operator|==
literal|null
condition|?
literal|0
else|:
name|e2
operator|.
name|getWaitlist
argument_list|()
argument_list|)
expr_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
operator|-
name|cmp
return|;
name|cmp
operator|=
operator|(
name|e1
operator|.
name|getTotalUnassigned
argument_list|()
operator|==
literal|null
condition|?
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
else|:
name|e1
operator|.
name|getTotalUnassigned
argument_list|()
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getTotalUnassigned
argument_list|()
operator|==
literal|null
condition|?
literal|0
else|:
name|e2
operator|.
name|getTotalUnassigned
argument_list|()
argument_list|)
expr_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
operator|-
name|cmp
return|;
name|cmp
operator|=
operator|(
name|e1
operator|.
name|getTotalWaitlist
argument_list|()
operator|==
literal|null
condition|?
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
else|:
name|e1
operator|.
name|getTotalWaitlist
argument_list|()
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getTotalWaitlist
argument_list|()
operator|==
literal|null
condition|?
literal|0
else|:
name|e2
operator|.
name|getTotalWaitlist
argument_list|()
argument_list|)
expr_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
operator|-
name|cmp
return|;
return|return
operator|(
name|e1
operator|.
name|getTopWaitingPriority
argument_list|()
operator|==
literal|null
condition|?
operator|new
name|Integer
argument_list|(
name|Integer
operator|.
name|MAX_VALUE
argument_list|)
else|:
name|e1
operator|.
name|getTopWaitingPriority
argument_list|()
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getTopWaitingPriority
argument_list|()
operator|==
literal|null
condition|?
name|Integer
operator|.
name|MAX_VALUE
else|:
name|e2
operator|.
name|getTopWaitingPriority
argument_list|()
argument_list|)
return|;
case|case
name|RESERVATION
case|:
name|cmp
operator|=
operator|(
name|e1
operator|.
name|getReservation
argument_list|()
operator|==
literal|null
condition|?
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
else|:
name|e1
operator|.
name|getReservation
argument_list|()
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getReservation
argument_list|()
operator|==
literal|null
condition|?
literal|0
else|:
name|e2
operator|.
name|getReservation
argument_list|()
argument_list|)
expr_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
operator|-
name|cmp
return|;
return|return
operator|(
name|e1
operator|.
name|getTotalReservation
argument_list|()
operator|==
literal|null
condition|?
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
else|:
name|e1
operator|.
name|getTotalReservation
argument_list|()
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getTotalReservation
argument_list|()
operator|==
literal|null
condition|?
literal|0
else|:
name|e2
operator|.
name|getTotalReservation
argument_list|()
argument_list|)
return|;
case|case
name|CONSENT
case|:
name|cmp
operator|=
operator|(
name|e1
operator|.
name|getConsentNeeded
argument_list|()
operator|==
literal|null
condition|?
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
else|:
name|e1
operator|.
name|getConsentNeeded
argument_list|()
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getConsentNeeded
argument_list|()
operator|==
literal|null
condition|?
literal|0
else|:
name|e2
operator|.
name|getConsentNeeded
argument_list|()
argument_list|)
expr_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
operator|-
name|cmp
return|;
return|return
operator|(
name|e1
operator|.
name|getTotalConsentNeeded
argument_list|()
operator|==
literal|null
condition|?
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
else|:
name|e1
operator|.
name|getTotalConsentNeeded
argument_list|()
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getTotalConsentNeeded
argument_list|()
operator|==
literal|null
condition|?
literal|0
else|:
name|e2
operator|.
name|getTotalConsentNeeded
argument_list|()
argument_list|)
return|;
case|case
name|CREDIT
case|:
name|cmp
operator|=
operator|(
name|e1
operator|.
name|hasCredit
argument_list|()
condition|?
name|e1
operator|.
name|getCredit
argument_list|()
else|:
operator|new
name|Float
argument_list|(
literal|0f
argument_list|)
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|hasCredit
argument_list|()
condition|?
name|e2
operator|.
name|getCredit
argument_list|()
else|:
operator|new
name|Float
argument_list|(
literal|0f
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
operator|-
name|cmp
return|;
name|cmp
operator|=
operator|(
name|e1
operator|.
name|hasTotalCredit
argument_list|()
condition|?
name|e1
operator|.
name|getTotalCredit
argument_list|()
else|:
operator|new
name|Float
argument_list|(
literal|0f
argument_list|)
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|hasTotalCredit
argument_list|()
condition|?
name|e2
operator|.
name|getTotalCredit
argument_list|()
else|:
operator|new
name|Float
argument_list|(
literal|0f
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
operator|-
name|cmp
return|;
name|cmp
operator|=
operator|(
name|e1
operator|.
name|hasRequestCredit
argument_list|()
condition|?
operator|new
name|Float
argument_list|(
name|e1
operator|.
name|getRequestCreditMin
argument_list|()
argument_list|)
else|:
operator|new
name|Float
argument_list|(
literal|0f
argument_list|)
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|hasRequestCredit
argument_list|()
condition|?
name|e2
operator|.
name|getRequestCreditMin
argument_list|()
else|:
literal|0f
argument_list|)
expr_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
operator|-
name|cmp
return|;
name|cmp
operator|=
operator|(
name|e1
operator|.
name|hasRequestCredit
argument_list|()
condition|?
operator|new
name|Float
argument_list|(
name|e1
operator|.
name|getRequestCreditMax
argument_list|()
argument_list|)
else|:
operator|new
name|Float
argument_list|(
literal|0f
argument_list|)
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|hasRequestCredit
argument_list|()
condition|?
name|e2
operator|.
name|getRequestCreditMax
argument_list|()
else|:
literal|0f
argument_list|)
expr_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
operator|-
name|cmp
return|;
name|cmp
operator|=
operator|(
name|e1
operator|.
name|hasTotalRequestCredit
argument_list|()
condition|?
operator|new
name|Float
argument_list|(
name|e1
operator|.
name|getTotalRequestCreditMin
argument_list|()
argument_list|)
else|:
operator|new
name|Float
argument_list|(
literal|0f
argument_list|)
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|hasTotalRequestCredit
argument_list|()
condition|?
name|e2
operator|.
name|getTotalRequestCreditMin
argument_list|()
else|:
literal|0f
argument_list|)
expr_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
operator|-
name|cmp
return|;
return|return
operator|(
name|e1
operator|.
name|hasTotalRequestCredit
argument_list|()
condition|?
operator|new
name|Float
argument_list|(
name|e1
operator|.
name|getTotalRequestCreditMax
argument_list|()
argument_list|)
else|:
operator|new
name|Float
argument_list|(
literal|0f
argument_list|)
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|hasTotalRequestCredit
argument_list|()
condition|?
name|e2
operator|.
name|getTotalRequestCreditMax
argument_list|()
else|:
literal|0f
argument_list|)
return|;
case|case
name|REQUEST_TS
case|:
return|return
operator|(
name|e1
operator|.
name|getRequestedDate
argument_list|()
operator|==
literal|null
condition|?
operator|new
name|Date
argument_list|(
literal|0
argument_list|)
else|:
name|e1
operator|.
name|getRequestedDate
argument_list|()
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getRequestedDate
argument_list|()
operator|==
literal|null
condition|?
operator|new
name|Date
argument_list|(
literal|0
argument_list|)
else|:
name|e2
operator|.
name|getRequestedDate
argument_list|()
argument_list|)
return|;
case|case
name|ENROLLMENT_TS
case|:
return|return
operator|(
name|e1
operator|.
name|getEnrolledDate
argument_list|()
operator|==
literal|null
condition|?
operator|new
name|Date
argument_list|(
literal|0
argument_list|)
else|:
name|e1
operator|.
name|getEnrolledDate
argument_list|()
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getEnrolledDate
argument_list|()
operator|==
literal|null
condition|?
operator|new
name|Date
argument_list|(
literal|0
argument_list|)
else|:
name|e2
operator|.
name|getEnrolledDate
argument_list|()
argument_list|)
return|;
case|case
name|EMAIL_TS
case|:
return|return
operator|(
name|e1
operator|.
name|getEmailDate
argument_list|()
operator|==
literal|null
condition|?
operator|new
name|Date
argument_list|(
literal|0
argument_list|)
else|:
name|e1
operator|.
name|getEmailDate
argument_list|()
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getEmailDate
argument_list|()
operator|==
literal|null
condition|?
operator|new
name|Date
argument_list|(
literal|0
argument_list|)
else|:
name|e2
operator|.
name|getEmailDate
argument_list|()
argument_list|)
return|;
case|case
name|NOTE
case|:
return|return
operator|(
name|e1
operator|.
name|hasNote
argument_list|()
condition|?
name|e1
operator|.
name|getNote
argument_list|()
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|hasNote
argument_list|()
condition|?
name|e2
operator|.
name|getNote
argument_list|()
else|:
literal|""
argument_list|)
else|:
literal|""
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|hasNote
argument_list|()
condition|?
name|e2
operator|.
name|getNote
argument_list|()
else|:
literal|""
argument_list|)
operator|)
return|;
case|case
name|DIST_CONF
case|:
name|cmp
operator|=
operator|(
name|e1
operator|.
name|hasDistanceConflicts
argument_list|()
condition|?
name|e1
operator|.
name|getNrDistanceConflicts
argument_list|()
else|:
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|hasDistanceConflicts
argument_list|()
condition|?
name|e2
operator|.
name|getNrDistanceConflicts
argument_list|()
else|:
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
operator|-
name|cmp
return|;
name|cmp
operator|=
operator|(
name|e1
operator|.
name|hasTotalDistanceConflicts
argument_list|()
condition|?
name|e1
operator|.
name|getTotalNrDistanceConflicts
argument_list|()
else|:
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|hasTotalDistanceConflicts
argument_list|()
condition|?
name|e2
operator|.
name|getTotalNrDistanceConflicts
argument_list|()
else|:
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
operator|-
name|cmp
return|;
return|return
operator|-
operator|(
name|e1
operator|.
name|hasDistanceConflicts
argument_list|()
condition|?
name|e1
operator|.
name|getLongestDistanceMinutes
argument_list|()
else|:
name|e1
operator|.
name|hasTotalDistanceConflicts
argument_list|()
condition|?
name|e1
operator|.
name|getTotalLongestDistanceMinutes
argument_list|()
else|:
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|hasDistanceConflicts
argument_list|()
condition|?
name|e2
operator|.
name|getLongestDistanceMinutes
argument_list|()
else|:
name|e2
operator|.
name|hasTotalDistanceConflicts
argument_list|()
condition|?
name|e2
operator|.
name|getTotalLongestDistanceMinutes
argument_list|()
else|:
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
argument_list|)
return|;
case|case
name|OVERLAPS
case|:
name|cmp
operator|=
operator|(
name|e1
operator|.
name|hasOverlappingMinutes
argument_list|()
condition|?
name|e1
operator|.
name|getOverlappingMinutes
argument_list|()
else|:
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|hasOverlappingMinutes
argument_list|()
condition|?
name|e2
operator|.
name|getOverlappingMinutes
argument_list|()
else|:
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
operator|-
name|cmp
return|;
return|return
operator|(
name|e1
operator|.
name|hasTotalOverlappingMinutes
argument_list|()
condition|?
name|e1
operator|.
name|getTotalOverlappingMinutes
argument_list|()
else|:
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|hasTotalOverlappingMinutes
argument_list|()
condition|?
name|e2
operator|.
name|getTotalOverlappingMinutes
argument_list|()
else|:
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
argument_list|)
return|;
case|case
name|FT_OVERLAPS
case|:
name|cmp
operator|=
operator|(
name|e1
operator|.
name|hasFreeTimeOverlappingMins
argument_list|()
condition|?
name|e1
operator|.
name|getFreeTimeOverlappingMins
argument_list|()
else|:
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|hasFreeTimeOverlappingMins
argument_list|()
condition|?
name|e2
operator|.
name|getFreeTimeOverlappingMins
argument_list|()
else|:
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
operator|-
name|cmp
return|;
return|return
operator|(
name|e1
operator|.
name|hasTotalFreeTimeOverlappingMins
argument_list|()
condition|?
name|e1
operator|.
name|getTotalFreeTimeOverlappingMins
argument_list|()
else|:
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|hasTotalFreeTimeOverlappingMins
argument_list|()
condition|?
name|e2
operator|.
name|getTotalFreeTimeOverlappingMins
argument_list|()
else|:
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
argument_list|)
return|;
case|case
name|PREF_IM
case|:
name|cmp
operator|=
operator|(
name|e1
operator|.
name|hasTotalPrefInstrMethConflict
argument_list|()
condition|?
operator|new
name|Integer
argument_list|(
name|e1
operator|.
name|getTotalPrefInstrMethConflict
argument_list|()
operator|-
name|e1
operator|.
name|getPrefInstrMethConflict
argument_list|()
argument_list|)
else|:
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|hasTotalPrefInstrMethConflict
argument_list|()
condition|?
operator|new
name|Integer
argument_list|(
name|e2
operator|.
name|getTotalPrefInstrMethConflict
argument_list|()
operator|-
name|e2
operator|.
name|getPrefInstrMethConflict
argument_list|()
argument_list|)
else|:
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
operator|-
name|cmp
return|;
return|return
operator|-
operator|(
name|e1
operator|.
name|hasTotalPrefInstrMethConflict
argument_list|()
condition|?
name|e1
operator|.
name|getTotalPrefInstrMethConflict
argument_list|()
else|:
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|hasTotalPrefInstrMethConflict
argument_list|()
condition|?
name|e2
operator|.
name|getTotalPrefInstrMethConflict
argument_list|()
else|:
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
argument_list|)
return|;
case|case
name|PREF_SEC
case|:
name|cmp
operator|=
operator|(
name|e1
operator|.
name|hasTotalPrefSectionConflict
argument_list|()
condition|?
operator|new
name|Integer
argument_list|(
name|e1
operator|.
name|getTotalPrefSectionConflict
argument_list|()
operator|-
name|e1
operator|.
name|getPrefSectionConflict
argument_list|()
argument_list|)
else|:
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|hasTotalPrefSectionConflict
argument_list|()
condition|?
operator|new
name|Integer
argument_list|(
name|e2
operator|.
name|getTotalPrefSectionConflict
argument_list|()
operator|-
name|e2
operator|.
name|getPrefSectionConflict
argument_list|()
argument_list|)
else|:
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
operator|-
name|cmp
return|;
return|return
operator|-
operator|(
name|e1
operator|.
name|hasTotalPrefSectionConflict
argument_list|()
condition|?
name|e1
operator|.
name|getTotalPrefSectionConflict
argument_list|()
else|:
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|hasTotalPrefSectionConflict
argument_list|()
condition|?
name|e2
operator|.
name|getTotalPrefSectionConflict
argument_list|()
else|:
operator|new
name|Integer
argument_list|(
literal|0
argument_list|)
argument_list|)
return|;
default|default:
return|return
literal|0
return|;
block|}
block|}
annotation|@
name|Override
specifier|public
name|int
name|compare
parameter_list|(
name|StudentInfo
name|e1
parameter_list|,
name|StudentInfo
name|e2
parameter_list|)
block|{
if|if
condition|(
name|e1
operator|.
name|getStudent
argument_list|()
operator|==
literal|null
condition|)
return|return
literal|1
return|;
if|if
condition|(
name|e2
operator|.
name|getStudent
argument_list|()
operator|==
literal|null
condition|)
return|return
operator|-
literal|1
return|;
name|int
name|cmp
init|=
name|doCompare
argument_list|(
name|e1
argument_list|,
name|e2
argument_list|)
decl_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
name|cmp
return|;
name|cmp
operator|=
name|e1
operator|.
name|getStudent
argument_list|()
operator|.
name|getName
argument_list|()
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getStudent
argument_list|()
operator|.
name|getName
argument_list|()
argument_list|)
expr_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
name|cmp
return|;
return|return
operator|(
name|e1
operator|.
name|getStudent
argument_list|()
operator|.
name|getId
argument_list|()
operator|<
name|e2
operator|.
name|getStudent
argument_list|()
operator|.
name|getId
argument_list|()
condition|?
operator|-
literal|1
else|:
literal|1
operator|)
return|;
block|}
block|}
specifier|public
specifier|static
class|class
name|ChangeLogComparator
implements|implements
name|Comparator
argument_list|<
name|SectioningAction
argument_list|>
block|{
specifier|public
enum|enum
name|SortBy
block|{
name|STUDENT
block|,
name|OPERATION
block|,
name|TIME_STAMP
block|,
name|RESULT
block|,
name|USER
block|,
name|MESSAGE
block|,
name|EXEC_TIME
block|, 			; 		}
specifier|private
name|SortBy
name|iSortBy
decl_stmt|;
specifier|public
name|ChangeLogComparator
parameter_list|(
name|SortBy
name|sortBy
parameter_list|)
block|{
name|iSortBy
operator|=
name|sortBy
expr_stmt|;
block|}
specifier|public
name|int
name|doCompare
parameter_list|(
name|SectioningAction
name|e1
parameter_list|,
name|SectioningAction
name|e2
parameter_list|)
block|{
switch|switch
condition|(
name|iSortBy
condition|)
block|{
case|case
name|STUDENT
case|:
return|return
name|e1
operator|.
name|getStudent
argument_list|()
operator|.
name|getName
argument_list|()
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getStudent
argument_list|()
operator|.
name|getName
argument_list|()
argument_list|)
return|;
case|case
name|OPERATION
case|:
return|return
name|e1
operator|.
name|getOperation
argument_list|()
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getOperation
argument_list|()
argument_list|)
return|;
case|case
name|TIME_STAMP
case|:
return|return
operator|-
name|e1
operator|.
name|getTimeStamp
argument_list|()
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getTimeStamp
argument_list|()
argument_list|)
return|;
case|case
name|EXEC_TIME
case|:
return|return
operator|-
operator|(
name|e1
operator|.
name|getWallTime
argument_list|()
operator|==
literal|null
condition|?
operator|new
name|Long
argument_list|(
literal|0
argument_list|)
else|:
name|e1
operator|.
name|getWallTime
argument_list|()
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getWallTime
argument_list|()
operator|==
literal|null
condition|?
literal|0
else|:
name|e2
operator|.
name|getWallTime
argument_list|()
argument_list|)
return|;
case|case
name|RESULT
case|:
return|return
operator|(
name|e1
operator|.
name|getResult
argument_list|()
operator|==
literal|null
condition|?
literal|""
else|:
name|e1
operator|.
name|getResult
argument_list|()
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getResult
argument_list|()
operator|==
literal|null
condition|?
literal|""
else|:
name|e2
operator|.
name|getResult
argument_list|()
argument_list|)
return|;
case|case
name|MESSAGE
case|:
return|return
operator|(
name|e1
operator|.
name|getMessage
argument_list|()
operator|==
literal|null
condition|?
literal|""
else|:
name|e1
operator|.
name|getMessage
argument_list|()
operator|)
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getMessage
argument_list|()
operator|==
literal|null
condition|?
literal|""
else|:
name|e2
operator|.
name|getMessage
argument_list|()
argument_list|)
return|;
default|default:
return|return
literal|0
return|;
block|}
block|}
annotation|@
name|Override
specifier|public
name|int
name|compare
parameter_list|(
name|SectioningAction
name|e1
parameter_list|,
name|SectioningAction
name|e2
parameter_list|)
block|{
name|int
name|cmp
init|=
name|doCompare
argument_list|(
name|e1
argument_list|,
name|e2
argument_list|)
decl_stmt|;
if|if
condition|(
name|cmp
operator|!=
literal|0
condition|)
return|return
name|cmp
return|;
return|return
operator|-
name|e1
operator|.
name|getTimeStamp
argument_list|()
operator|.
name|compareTo
argument_list|(
name|e2
operator|.
name|getTimeStamp
argument_list|()
argument_list|)
return|;
block|}
block|}
specifier|private
name|void
name|sendEmail
parameter_list|(
specifier|final
name|Iterator
argument_list|<
name|Long
argument_list|>
name|studentIds
parameter_list|,
specifier|final
name|String
name|subject
parameter_list|,
specifier|final
name|String
name|message
parameter_list|,
specifier|final
name|String
name|cc
parameter_list|,
specifier|final
name|int
name|fails
parameter_list|)
block|{
if|if
condition|(
operator|!
name|studentIds
operator|.
name|hasNext
argument_list|()
condition|)
return|return;
specifier|final
name|Long
name|studentId
init|=
name|studentIds
operator|.
name|next
argument_list|()
decl_stmt|;
name|iSectioningService
operator|.
name|sendEmail
argument_list|(
name|studentId
argument_list|,
name|subject
argument_list|,
name|message
argument_list|,
name|cc
argument_list|,
operator|new
name|AsyncCallback
argument_list|<
name|Boolean
argument_list|>
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|void
name|onFailure
parameter_list|(
name|Throwable
name|caught
parameter_list|)
block|{
for|for
control|(
name|int
name|row
init|=
literal|0
init|;
name|row
operator|<
name|iStudentTable
operator|.
name|getRowCount
argument_list|()
condition|;
name|row
operator|++
control|)
block|{
name|StudentInfo
name|i
init|=
name|iStudentTable
operator|.
name|getData
argument_list|(
name|row
argument_list|)
decl_stmt|;
if|if
condition|(
name|i
operator|!=
literal|null
operator|&&
name|i
operator|.
name|getStudent
argument_list|()
operator|!=
literal|null
operator|&&
name|studentId
operator|.
name|equals
argument_list|(
name|i
operator|.
name|getStudent
argument_list|()
operator|.
name|getId
argument_list|()
argument_list|)
condition|)
block|{
name|HTML
name|error
init|=
operator|new
name|HTML
argument_list|(
name|caught
operator|.
name|getMessage
argument_list|()
argument_list|)
decl_stmt|;
name|error
operator|.
name|setStyleName
argument_list|(
literal|"unitime-ErrorMessage"
argument_list|)
expr_stmt|;
name|iStudentTable
operator|.
name|setWidget
argument_list|(
name|row
argument_list|,
name|iStudentTable
operator|.
name|getCellCount
argument_list|(
name|row
argument_list|)
operator|-
literal|1
argument_list|,
name|error
argument_list|)
expr_stmt|;
name|i
operator|.
name|setEmailDate
argument_list|(
literal|null
argument_list|)
expr_stmt|;
block|}
block|}
if|if
condition|(
name|fails
operator|>=
literal|4
condition|)
block|{
while|while
condition|(
name|studentIds
operator|.
name|hasNext
argument_list|()
condition|)
block|{
name|Long
name|sid
init|=
name|studentIds
operator|.
name|next
argument_list|()
decl_stmt|;
for|for
control|(
name|int
name|row
init|=
literal|0
init|;
name|row
operator|<
name|iStudentTable
operator|.
name|getRowCount
argument_list|()
condition|;
name|row
operator|++
control|)
block|{
name|StudentInfo
name|i
init|=
name|iStudentTable
operator|.
name|getData
argument_list|(
name|row
argument_list|)
decl_stmt|;
if|if
condition|(
name|i
operator|!=
literal|null
operator|&&
name|i
operator|.
name|getStudent
argument_list|()
operator|!=
literal|null
operator|&&
name|sid
operator|.
name|equals
argument_list|(
name|i
operator|.
name|getStudent
argument_list|()
operator|.
name|getId
argument_list|()
argument_list|)
condition|)
block|{
name|HTML
name|error
init|=
operator|new
name|HTML
argument_list|(
name|MESSAGES
operator|.
name|exceptionCancelled
argument_list|(
name|caught
operator|.
name|getMessage
argument_list|()
argument_list|)
argument_list|)
decl_stmt|;
name|error
operator|.
name|setStyleName
argument_list|(
literal|"unitime-ErrorMessage"
argument_list|)
expr_stmt|;
name|iStudentTable
operator|.
name|setWidget
argument_list|(
name|row
argument_list|,
name|iStudentTable
operator|.
name|getCellCount
argument_list|(
name|row
argument_list|)
operator|-
literal|1
argument_list|,
name|error
argument_list|)
expr_stmt|;
name|i
operator|.
name|setEmailDate
argument_list|(
literal|null
argument_list|)
expr_stmt|;
block|}
block|}
block|}
block|}
name|sendEmail
argument_list|(
name|studentIds
argument_list|,
name|subject
argument_list|,
name|message
argument_list|,
name|cc
argument_list|,
name|fails
operator|+
literal|1
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Override
specifier|public
name|void
name|onSuccess
parameter_list|(
name|Boolean
name|result
parameter_list|)
block|{
for|for
control|(
name|int
name|row
init|=
literal|0
init|;
name|row
operator|<
name|iStudentTable
operator|.
name|getRowCount
argument_list|()
condition|;
name|row
operator|++
control|)
block|{
name|StudentInfo
name|i
init|=
name|iStudentTable
operator|.
name|getData
argument_list|(
name|row
argument_list|)
decl_stmt|;
if|if
condition|(
name|i
operator|!=
literal|null
operator|&&
name|i
operator|.
name|getStudent
argument_list|()
operator|!=
literal|null
operator|&&
name|studentId
operator|.
name|equals
argument_list|(
name|i
operator|.
name|getStudent
argument_list|()
operator|.
name|getId
argument_list|()
argument_list|)
condition|)
block|{
if|if
condition|(
name|result
condition|)
block|{
name|i
operator|.
name|setEmailDate
argument_list|(
operator|new
name|Date
argument_list|()
argument_list|)
expr_stmt|;
name|iStudentTable
operator|.
name|setWidget
argument_list|(
name|row
argument_list|,
name|iStudentTable
operator|.
name|getCellCount
argument_list|(
name|row
argument_list|)
operator|-
literal|1
argument_list|,
operator|new
name|HTML
argument_list|(
name|sDF
operator|.
name|format
argument_list|(
name|i
operator|.
name|getEmailDate
argument_list|()
argument_list|)
argument_list|,
literal|false
argument_list|)
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|HTML
name|error
init|=
operator|new
name|HTML
argument_list|(
name|MESSAGES
operator|.
name|exceptionNoEmail
argument_list|()
argument_list|)
decl_stmt|;
name|error
operator|.
name|setStyleName
argument_list|(
literal|"unitime-ErrorMessage"
argument_list|)
expr_stmt|;
name|iStudentTable
operator|.
name|setWidget
argument_list|(
name|row
argument_list|,
name|iStudentTable
operator|.
name|getCellCount
argument_list|(
name|row
argument_list|)
operator|-
literal|1
argument_list|,
name|error
argument_list|)
expr_stmt|;
name|i
operator|.
name|setEmailDate
argument_list|(
literal|null
argument_list|)
expr_stmt|;
block|}
block|}
name|sendEmail
argument_list|(
name|studentIds
argument_list|,
name|subject
argument_list|,
name|message
argument_list|,
name|cc
argument_list|,
name|fails
argument_list|)
expr_stmt|;
block|}
block|}
block|}
argument_list|)
expr_stmt|;
block|}
specifier|public
specifier|static
class|class
name|CreditCell
extends|extends
name|HTML
implements|implements
name|HasCellAlignment
block|{
specifier|private
specifier|static
name|NumberFormat
name|df
init|=
name|NumberFormat
operator|.
name|getFormat
argument_list|(
literal|"0.#"
argument_list|)
decl_stmt|;
specifier|public
name|CreditCell
parameter_list|(
name|Float
name|value
parameter_list|,
name|Float
name|total
parameter_list|)
block|{
name|super
argument_list|()
expr_stmt|;
if|if
condition|(
name|total
operator|!=
literal|null
operator|&&
name|total
operator|>
literal|0f
condition|)
block|{
if|if
condition|(
name|total
operator|.
name|equals
argument_list|(
name|value
argument_list|)
condition|)
name|setHTML
argument_list|(
name|df
operator|.
name|format
argument_list|(
name|total
argument_list|)
argument_list|)
expr_stmt|;
else|else
name|setHTML
argument_list|(
name|df
operator|.
name|format
argument_list|(
name|value
argument_list|)
operator|+
literal|" / "
operator|+
name|df
operator|.
name|format
argument_list|(
name|total
argument_list|)
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|setHTML
argument_list|(
literal|"&nbsp;"
argument_list|)
expr_stmt|;
block|}
block|}
annotation|@
name|Override
specifier|public
name|HorizontalAlignmentConstant
name|getCellAlignment
parameter_list|()
block|{
return|return
name|HasHorizontalAlignment
operator|.
name|ALIGN_RIGHT
return|;
block|}
block|}
specifier|public
specifier|static
class|class
name|RequestCreditCell
extends|extends
name|HTML
implements|implements
name|HasCellAlignment
block|{
specifier|private
specifier|static
name|NumberFormat
name|df
init|=
name|NumberFormat
operator|.
name|getFormat
argument_list|(
literal|"0.#"
argument_list|)
decl_stmt|;
specifier|public
name|RequestCreditCell
parameter_list|(
name|float
name|min
parameter_list|,
name|float
name|max
parameter_list|,
name|float
name|totalMin
parameter_list|,
name|float
name|totalMax
parameter_list|)
block|{
name|super
argument_list|()
expr_stmt|;
name|getElement
argument_list|()
operator|.
name|getStyle
argument_list|()
operator|.
name|setFontStyle
argument_list|(
name|FontStyle
operator|.
name|ITALIC
argument_list|)
expr_stmt|;
if|if
condition|(
name|totalMax
operator|>
literal|0f
condition|)
block|{
if|if
condition|(
name|min
operator|==
name|totalMin
operator|&&
name|max
operator|==
name|totalMax
condition|)
block|{
name|setHTML
argument_list|(
name|totalMin
operator|==
name|totalMax
condition|?
name|df
operator|.
name|format
argument_list|(
name|totalMax
argument_list|)
else|:
name|df
operator|.
name|format
argument_list|(
name|totalMin
argument_list|)
operator|+
literal|" - "
operator|+
name|df
operator|.
name|format
argument_list|(
name|totalMax
argument_list|)
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|setHTML
argument_list|(
operator|(
name|min
operator|==
name|max
condition|?
name|df
operator|.
name|format
argument_list|(
name|min
argument_list|)
else|:
name|df
operator|.
name|format
argument_list|(
name|min
argument_list|)
operator|+
literal|" - "
operator|+
name|df
operator|.
name|format
argument_list|(
name|max
argument_list|)
operator|)
operator|+
literal|" / "
operator|+
operator|(
name|totalMin
operator|==
name|totalMax
condition|?
name|df
operator|.
name|format
argument_list|(
name|totalMin
argument_list|)
else|:
name|df
operator|.
name|format
argument_list|(
name|totalMin
argument_list|)
operator|+
literal|" - "
operator|+
name|df
operator|.
name|format
argument_list|(
name|totalMax
argument_list|)
operator|)
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
name|setHTML
argument_list|(
literal|"&nbsp;"
argument_list|)
expr_stmt|;
block|}
block|}
annotation|@
name|Override
specifier|public
name|HorizontalAlignmentConstant
name|getCellAlignment
parameter_list|()
block|{
return|return
name|HasHorizontalAlignment
operator|.
name|ALIGN_RIGHT
return|;
block|}
block|}
specifier|public
specifier|static
class|class
name|RoomsCell
extends|extends
name|P
block|{
specifier|public
name|RoomsCell
parameter_list|(
name|List
argument_list|<
name|IdValue
argument_list|>
name|list
parameter_list|,
name|String
name|delimiter
parameter_list|)
block|{
name|super
argument_list|(
literal|"itemize"
argument_list|)
expr_stmt|;
if|if
condition|(
name|list
operator|!=
literal|null
condition|)
for|for
control|(
name|Iterator
argument_list|<
name|IdValue
argument_list|>
name|i
init|=
name|list
operator|.
name|iterator
argument_list|()
init|;
name|i
operator|.
name|hasNext
argument_list|()
condition|;
control|)
block|{
specifier|final
name|P
name|p
init|=
operator|new
name|P
argument_list|(
name|DOM
operator|.
name|createSpan
argument_list|()
argument_list|,
literal|"item"
argument_list|)
decl_stmt|;
specifier|final
name|IdValue
name|room
init|=
name|i
operator|.
name|next
argument_list|()
decl_stmt|;
name|p
operator|.
name|setText
argument_list|(
name|room
operator|.
name|getValue
argument_list|()
operator|+
operator|(
name|i
operator|.
name|hasNext
argument_list|()
condition|?
name|delimiter
else|:
literal|""
operator|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|room
operator|.
name|getId
argument_list|()
operator|!=
literal|null
condition|)
block|{
name|p
operator|.
name|addMouseOverHandler
argument_list|(
operator|new
name|MouseOverHandler
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|void
name|onMouseOver
parameter_list|(
name|MouseOverEvent
name|event
parameter_list|)
block|{
name|RoomHint
operator|.
name|showHint
argument_list|(
name|p
operator|.
name|getElement
argument_list|()
argument_list|,
name|room
operator|.
name|getId
argument_list|()
argument_list|,
literal|null
argument_list|,
literal|null
argument_list|,
literal|true
argument_list|)
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
name|p
operator|.
name|addMouseOutHandler
argument_list|(
operator|new
name|MouseOutHandler
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|void
name|onMouseOut
parameter_list|(
name|MouseOutEvent
name|event
parameter_list|)
block|{
name|RoomHint
operator|.
name|hideHint
argument_list|()
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
block|}
name|add
argument_list|(
name|p
argument_list|)
expr_stmt|;
block|}
block|}
block|}
specifier|public
specifier|static
class|class
name|DistanceCell
extends|extends
name|HTML
implements|implements
name|HasCellAlignment
block|{
specifier|public
name|DistanceCell
parameter_list|(
name|Integer
name|nrDist
parameter_list|,
name|Integer
name|totalNrDist
parameter_list|,
name|Integer
name|distMin
parameter_list|,
name|Integer
name|totalDistMin
parameter_list|)
block|{
name|super
argument_list|()
expr_stmt|;
if|if
condition|(
name|nrDist
operator|==
literal|null
condition|)
block|{
if|if
condition|(
name|totalNrDist
operator|!=
literal|null
condition|)
name|setHTML
argument_list|(
name|totalNrDist
operator|==
literal|0
condition|?
literal|"-"
else|:
name|totalNrDist
operator|+
literal|" "
operator|+
name|MESSAGES
operator|.
name|distanceConflict
argument_list|(
name|totalDistMin
argument_list|)
argument_list|)
expr_stmt|;
block|}
else|else
block|{
if|if
condition|(
name|nrDist
operator|.
name|equals
argument_list|(
name|totalNrDist
argument_list|)
condition|)
name|setHTML
argument_list|(
name|totalNrDist
operator|==
literal|0
condition|?
literal|"-"
else|:
name|totalNrDist
operator|+
literal|" "
operator|+
name|MESSAGES
operator|.
name|distanceConflict
argument_list|(
name|totalDistMin
argument_list|)
argument_list|)
expr_stmt|;
else|else
name|setHTML
argument_list|(
name|nrDist
operator|+
literal|" / "
operator|+
name|totalNrDist
operator|+
literal|" "
operator|+
operator|(
name|nrDist
operator|==
literal|0
condition|?
name|MESSAGES
operator|.
name|distanceConflict
argument_list|(
name|totalDistMin
argument_list|)
else|:
name|MESSAGES
operator|.
name|distanceConflict
argument_list|(
name|distMin
argument_list|)
operator|)
argument_list|)
expr_stmt|;
block|}
block|}
annotation|@
name|Override
specifier|public
name|HorizontalAlignmentConstant
name|getCellAlignment
parameter_list|()
block|{
return|return
name|HasHorizontalAlignment
operator|.
name|ALIGN_CENTER
return|;
block|}
block|}
block|}
end_class

end_unit

