begin_unit|revision:1.0.0;language:Java;cregit-version:0.0.1
begin_comment
comment|/*  * Licensed to The Apereo Foundation under one or more contributor license  * agreements. See the NOTICE file distributed with this work for  * additional information regarding copyright ownership.  *  * The Apereo Foundation licenses this file to you under the Apache License,  * Version 2.0 (the "License"); you may not use this file except in  * compliance with the License. You may obtain a copy of the License at:  *  * http://www.apache.org/licenses/LICENSE-2.0  *  * Unless required by applicable law or agreed to in writing, software  * distributed under the License is distributed on an "AS IS" BASIS,  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  *  * See the License for the specific language governing permissions and  * limitations under the License.  *  */
end_comment

begin_package
package|package
name|org
operator|.
name|unitime
operator|.
name|timetable
operator|.
name|util
package|;
end_package

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|ArrayList
import|;
end_import

begin_import
import|import
name|org
operator|.
name|unitime
operator|.
name|localization
operator|.
name|impl
operator|.
name|Localization
import|;
end_import

begin_import
import|import
name|org
operator|.
name|unitime
operator|.
name|timetable
operator|.
name|ApplicationProperties
import|;
end_import

begin_import
import|import
name|org
operator|.
name|unitime
operator|.
name|timetable
operator|.
name|gwt
operator|.
name|resources
operator|.
name|GwtMessages
import|;
end_import

begin_import
import|import
name|org
operator|.
name|unitime
operator|.
name|timetable
operator|.
name|model
operator|.
name|Session
import|;
end_import

begin_class
specifier|public
class|class
name|RoomUsageAndOccupancyData
block|{
specifier|protected
specifier|static
name|GwtMessages
name|MESSAGES
init|=
name|Localization
operator|.
name|create
argument_list|(
name|GwtMessages
operator|.
name|class
argument_list|)
decl_stmt|;
specifier|private
specifier|static
name|String
name|roomUsageTable
init|=
literal|"room_usage_table"
decl_stmt|;
specifier|private
specifier|static
name|String
name|seatUsageTable
init|=
literal|"seat_usage_table"
decl_stmt|;
specifier|private
specifier|static
name|String
name|buildingDataTable
init|=
literal|"bldg_data"
decl_stmt|;
specifier|private
name|OccupancyHelper
name|occupancyHelper
decl_stmt|;
specifier|private
name|RoomUtilizationHelper
name|roomUtilizationHelper
decl_stmt|;
specifier|private
name|Boolean
name|iShowAdditionalPurdueData
decl_stmt|;
specifier|public
name|RoomUsageAndOccupancyData
parameter_list|()
block|{
name|setOccupancyHelper
argument_list|(
operator|new
name|OccupancyHelper
argument_list|()
argument_list|)
expr_stmt|;
name|setRoomUtilizationHelper
argument_list|(
operator|new
name|RoomUtilizationHelper
argument_list|()
argument_list|)
expr_stmt|;
block|}
specifier|public
name|RoomUsageAndOccupancyData
parameter_list|(
name|int
name|iMinutesInPeriod
parameter_list|,
name|int
name|iPeriodsInHour
parameter_list|,
name|int
name|iAllDayStartPeriod
parameter_list|,
name|int
name|iAllDayEndPeriod
parameter_list|,
name|int
name|iStandardDayStartPeriod
parameter_list|,
name|int
name|iStandardDayEndPeriod
parameter_list|,
name|int
name|iWeekendDayStartPeriod
parameter_list|,
name|int
name|iWeekendDayEndPeriod
parameter_list|,
name|int
name|iFirstFullHourStartPeriod
parameter_list|,
name|int
name|iLastFullHourStopPeriod
parameter_list|,
name|String
name|iSchema
parameter_list|)
block|{
name|setOccupancyHelper
argument_list|(
operator|new
name|OccupancyHelper
argument_list|(
name|iMinutesInPeriod
argument_list|,
name|iPeriodsInHour
argument_list|,
name|iAllDayStartPeriod
argument_list|,
name|iAllDayEndPeriod
argument_list|,
name|iStandardDayStartPeriod
argument_list|,
name|iStandardDayEndPeriod
argument_list|,
name|iWeekendDayStartPeriod
argument_list|,
name|iWeekendDayEndPeriod
argument_list|,
name|iFirstFullHourStartPeriod
argument_list|,
name|iLastFullHourStopPeriod
argument_list|,
name|iSchema
argument_list|)
argument_list|)
expr_stmt|;
name|setRoomUtilizationHelper
argument_list|(
operator|new
name|RoomUtilizationHelper
argument_list|(
name|iMinutesInPeriod
argument_list|,
name|iPeriodsInHour
argument_list|,
name|iAllDayStartPeriod
argument_list|,
name|iAllDayEndPeriod
argument_list|,
name|iStandardDayStartPeriod
argument_list|,
name|iStandardDayEndPeriod
argument_list|,
name|iWeekendDayStartPeriod
argument_list|,
name|iWeekendDayEndPeriod
argument_list|,
name|iFirstFullHourStartPeriod
argument_list|,
name|iLastFullHourStopPeriod
argument_list|,
name|iSchema
argument_list|)
argument_list|)
expr_stmt|;
block|}
specifier|public
name|OccupancyHelper
name|getOccupancyHelper
parameter_list|()
block|{
return|return
name|occupancyHelper
return|;
block|}
specifier|public
name|void
name|setOccupancyHelper
parameter_list|(
name|OccupancyHelper
name|occupancyHelper
parameter_list|)
block|{
name|this
operator|.
name|occupancyHelper
operator|=
name|occupancyHelper
expr_stmt|;
block|}
specifier|public
name|RoomUtilizationHelper
name|getRoomUtilizationHelper
parameter_list|()
block|{
return|return
name|roomUtilizationHelper
return|;
block|}
specifier|public
name|void
name|setRoomUtilizationHelper
parameter_list|(
name|RoomUtilizationHelper
name|roomUtilizationHelper
parameter_list|)
block|{
name|this
operator|.
name|roomUtilizationHelper
operator|=
name|roomUtilizationHelper
expr_stmt|;
block|}
specifier|public
name|Boolean
name|isShowAdditionalPurdueData
parameter_list|()
block|{
if|if
condition|(
name|iShowAdditionalPurdueData
operator|==
literal|null
condition|)
block|{
name|iShowAdditionalPurdueData
operator|=
literal|"true"
operator|.
name|equalsIgnoreCase
argument_list|(
name|ApplicationProperties
operator|.
name|getProperty
argument_list|(
literal|"purdue.room_summary_reports.show_purdue_columns"
argument_list|,
literal|"false"
argument_list|)
argument_list|)
expr_stmt|;
block|}
return|return
name|iShowAdditionalPurdueData
return|;
block|}
specifier|public
name|void
name|setShowAdditionalPurdueData
parameter_list|(
name|Boolean
name|showAdditionalPurdueData
parameter_list|)
block|{
name|this
operator|.
name|iShowAdditionalPurdueData
operator|=
name|showAdditionalPurdueData
expr_stmt|;
block|}
specifier|private
name|void
name|appendValueEqualsSql
parameter_list|(
name|StringBuffer
name|sb
parameter_list|,
name|String
name|table1
parameter_list|,
name|String
name|table2
parameter_list|,
name|String
name|fieldName
parameter_list|,
name|boolean
name|hasLeadingAnd
parameter_list|)
block|{
if|if
condition|(
name|hasLeadingAnd
condition|)
block|{
name|sb
operator|.
name|append
argument_list|(
literal|"and "
argument_list|)
expr_stmt|;
block|}
name|sb
operator|.
name|append
argument_list|(
name|table1
argument_list|)
operator|.
name|append
argument_list|(
literal|"."
argument_list|)
operator|.
name|append
argument_list|(
name|fieldName
argument_list|)
operator|.
name|append
argument_list|(
literal|" = "
argument_list|)
operator|.
name|append
argument_list|(
name|table2
argument_list|)
operator|.
name|append
argument_list|(
literal|"."
argument_list|)
operator|.
name|append
argument_list|(
name|fieldName
argument_list|)
expr_stmt|;
block|}
specifier|private
name|void
name|appendValueNotNullAndEqualsSql
parameter_list|(
name|StringBuffer
name|sb
parameter_list|,
name|String
name|table1
parameter_list|,
name|String
name|table2
parameter_list|,
name|String
name|fieldName
parameter_list|,
name|boolean
name|hasLeadingAnd
parameter_list|)
block|{
if|if
condition|(
name|hasLeadingAnd
condition|)
block|{
name|sb
operator|.
name|append
argument_list|(
literal|"and "
argument_list|)
expr_stmt|;
block|}
name|sb
operator|.
name|append
argument_list|(
name|table1
argument_list|)
operator|.
name|append
argument_list|(
literal|"."
argument_list|)
operator|.
name|append
argument_list|(
name|fieldName
argument_list|)
operator|.
name|append
argument_list|(
literal|" is not null"
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
literal|"and "
argument_list|)
operator|.
name|append
argument_list|(
name|table2
argument_list|)
operator|.
name|append
argument_list|(
literal|"."
argument_list|)
operator|.
name|append
argument_list|(
name|fieldName
argument_list|)
operator|.
name|append
argument_list|(
literal|" is not null "
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendValueEqualsSql
argument_list|(
name|sb
argument_list|,
name|table1
argument_list|,
name|table2
argument_list|,
name|fieldName
argument_list|,
name|hasLeadingAnd
argument_list|)
expr_stmt|;
block|}
specifier|private
name|void
name|appendValuesAreNull
parameter_list|(
name|StringBuffer
name|sb
parameter_list|,
name|String
name|table1
parameter_list|,
name|String
name|table2
parameter_list|,
name|String
name|fieldName
parameter_list|,
name|boolean
name|hasLeadingAnd
parameter_list|)
block|{
if|if
condition|(
name|hasLeadingAnd
condition|)
block|{
name|sb
operator|.
name|append
argument_list|(
literal|"and "
argument_list|)
expr_stmt|;
block|}
name|sb
operator|.
name|append
argument_list|(
name|table1
argument_list|)
operator|.
name|append
argument_list|(
literal|"."
argument_list|)
operator|.
name|append
argument_list|(
name|fieldName
argument_list|)
operator|.
name|append
argument_list|(
literal|" is null and "
argument_list|)
operator|.
name|append
argument_list|(
name|table2
argument_list|)
operator|.
name|append
argument_list|(
literal|"."
argument_list|)
operator|.
name|append
argument_list|(
name|fieldName
argument_list|)
operator|.
name|append
argument_list|(
literal|" is null"
argument_list|)
expr_stmt|;
block|}
specifier|private
name|void
name|fromClause
parameter_list|(
name|StringBuffer
name|sb
parameter_list|,
name|Session
name|acadSession
parameter_list|,
name|boolean
name|hasDayTime
parameter_list|,
name|boolean
name|includeSubjectArea
parameter_list|,
name|boolean
name|includeDept
parameter_list|,
name|boolean
name|isCheckNull
parameter_list|)
block|{
name|ArrayList
argument_list|<
name|Object
argument_list|>
name|headerRow1
init|=
operator|new
name|ArrayList
argument_list|<
name|Object
argument_list|>
argument_list|()
decl_stmt|;
name|ArrayList
argument_list|<
name|Object
argument_list|>
name|headerRow2
init|=
operator|new
name|ArrayList
argument_list|<
name|Object
argument_list|>
argument_list|()
decl_stmt|;
name|String
name|utilizationQuery
init|=
name|getRoomUtilizationHelper
argument_list|()
operator|.
name|getUnpivotedRoomUtilizationQuery
argument_list|(
name|getRoomUtilizationHelper
argument_list|()
operator|.
name|getAllDays
argument_list|()
argument_list|,
name|getRoomUtilizationHelper
argument_list|()
operator|.
name|getWeekDays
argument_list|()
argument_list|,
name|getRoomUtilizationHelper
argument_list|()
operator|.
name|getSaturday
argument_list|()
argument_list|,
name|acadSession
operator|.
name|getAcademicInitiative
argument_list|()
argument_list|,
name|acadSession
operator|.
name|getAcademicYear
argument_list|()
argument_list|,
name|acadSession
operator|.
name|getAcademicTerm
argument_list|()
argument_list|,
name|headerRow1
argument_list|,
name|includeSubjectArea
argument_list|,
name|includeDept
argument_list|)
decl_stmt|;
name|String
name|occupancyQuery
init|=
name|getOccupancyHelper
argument_list|()
operator|.
name|getUnpivotedRoomUtilizationQuery
argument_list|(
name|getRoomUtilizationHelper
argument_list|()
operator|.
name|getAllDays
argument_list|()
argument_list|,
name|getRoomUtilizationHelper
argument_list|()
operator|.
name|getWeekDays
argument_list|()
argument_list|,
name|getRoomUtilizationHelper
argument_list|()
operator|.
name|getSaturday
argument_list|()
argument_list|,
name|acadSession
operator|.
name|getAcademicInitiative
argument_list|()
argument_list|,
name|acadSession
operator|.
name|getAcademicYear
argument_list|()
argument_list|,
name|acadSession
operator|.
name|getAcademicTerm
argument_list|()
argument_list|,
name|headerRow2
argument_list|,
name|includeSubjectArea
argument_list|,
name|includeDept
argument_list|)
decl_stmt|;
name|sb
operator|.
name|append
argument_list|(
literal|"from"
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
literal|"("
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
name|occupancyQuery
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
literal|") "
argument_list|)
operator|.
name|append
argument_list|(
name|seatUsageTable
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
literal|"left outer join"
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
literal|"("
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
name|utilizationQuery
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
literal|") "
argument_list|)
operator|.
name|append
argument_list|(
name|roomUsageTable
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
literal|"on "
argument_list|)
expr_stmt|;
name|appendValueEqualsSql
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|seatUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlAcademicInitiative
argument_list|()
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendValueEqualsSql
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|seatUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlAcademicTerm
argument_list|()
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendValueEqualsSql
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|seatUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlAcademicYear
argument_list|()
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendValueEqualsSql
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|seatUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlBuilding
argument_list|()
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendValueEqualsSql
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|seatUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlRoomType
argument_list|()
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendValueEqualsSql
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|seatUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlRoom
argument_list|()
argument_list|,
literal|true
argument_list|)
expr_stmt|;
if|if
condition|(
name|hasDayTime
condition|)
block|{
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendValueEqualsSql
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|seatUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlDayTime
argument_list|()
argument_list|,
literal|true
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|includeDept
condition|)
block|{
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
if|if
condition|(
name|isCheckNull
condition|)
block|{
name|appendValuesAreNull
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|seatUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlDepartment
argument_list|()
argument_list|,
literal|true
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|appendValueNotNullAndEqualsSql
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|seatUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlDepartment
argument_list|()
argument_list|,
literal|true
argument_list|)
expr_stmt|;
block|}
block|}
if|if
condition|(
name|includeSubjectArea
condition|)
block|{
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
if|if
condition|(
name|isCheckNull
condition|)
block|{
name|appendValuesAreNull
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|seatUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlSubject
argument_list|()
argument_list|,
literal|true
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|appendValueNotNullAndEqualsSql
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|seatUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlSubject
argument_list|()
argument_list|,
literal|true
argument_list|)
expr_stmt|;
block|}
block|}
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendValueEqualsSql
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|seatUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlEventType
argument_list|()
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendValueEqualsSql
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|seatUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlUtilizationType
argument_list|()
argument_list|,
literal|true
argument_list|)
expr_stmt|;
block|}
specifier|private
name|void
name|appendStationOccupancyRateCalc
parameter_list|(
name|StringBuffer
name|sb
parameter_list|,
name|String
name|utilTableName
parameter_list|,
name|String
name|occTableName
parameter_list|,
name|String
name|seatUsageTotalSuffix
parameter_list|,
name|String
name|stationsUsedPrefix
parameter_list|,
name|String
name|stationOccupancyPrefix
parameter_list|,
name|boolean
name|hasTrailingComma
parameter_list|,
name|ArrayList
argument_list|<
name|String
argument_list|>
name|headerRow
parameter_list|)
block|{
name|sb
operator|.
name|append
argument_list|(
literal|"case"
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|8
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
literal|"when "
argument_list|)
operator|.
name|append
argument_list|(
name|utilTableName
argument_list|)
operator|.
name|append
argument_list|(
literal|"."
argument_list|)
operator|.
name|append
argument_list|(
name|MESSAGES
operator|.
name|utilSqlUsageSeatHours
argument_list|()
argument_list|)
operator|.
name|append
argument_list|(
name|seatUsageTotalSuffix
argument_list|)
operator|.
name|append
argument_list|(
literal|"> 0"
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|8
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
literal|"then to_char("
argument_list|)
operator|.
name|append
argument_list|(
name|occTableName
argument_list|)
operator|.
name|append
argument_list|(
literal|"."
argument_list|)
operator|.
name|append
argument_list|(
name|stationsUsedPrefix
argument_list|)
operator|.
name|append
argument_list|(
name|seatUsageTotalSuffix
argument_list|)
operator|.
name|append
argument_list|(
literal|" / "
argument_list|)
operator|.
name|append
argument_list|(
name|utilTableName
argument_list|)
operator|.
name|append
argument_list|(
literal|"."
argument_list|)
operator|.
name|append
argument_list|(
name|MESSAGES
operator|.
name|utilSqlUsageSeatHours
argument_list|()
argument_list|)
operator|.
name|append
argument_list|(
name|seatUsageTotalSuffix
argument_list|)
operator|.
name|append
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|8
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
literal|"else 'undefined'"
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
literal|"end as "
argument_list|)
operator|.
name|append
argument_list|(
name|stationOccupancyPrefix
argument_list|)
operator|.
name|append
argument_list|(
name|seatUsageTotalSuffix
argument_list|)
expr_stmt|;
if|if
condition|(
name|hasTrailingComma
condition|)
block|{
name|sb
operator|.
name|append
argument_list|(
literal|","
argument_list|)
expr_stmt|;
block|}
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
if|if
condition|(
name|headerRow
operator|!=
literal|null
condition|)
block|{
name|headerRow
operator|.
name|add
argument_list|(
name|stationOccupancyPrefix
operator|+
name|seatUsageTotalSuffix
argument_list|)
expr_stmt|;
block|}
block|}
specifier|private
name|void
name|appendSummedStationOccupancyRateCalc
parameter_list|(
name|StringBuffer
name|sb
parameter_list|,
name|String
name|utilTableName
parameter_list|,
name|String
name|occTableName
parameter_list|,
name|String
name|seatUsageTotalSuffix
parameter_list|,
name|String
name|stationsUsedPrefix
parameter_list|,
name|String
name|stationOccupancyPrefix
parameter_list|,
name|boolean
name|hasTrailingComma
parameter_list|,
name|ArrayList
argument_list|<
name|String
argument_list|>
name|headerRow
parameter_list|)
block|{
name|sb
operator|.
name|append
argument_list|(
literal|"case"
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|8
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
literal|"when sum("
argument_list|)
operator|.
name|append
argument_list|(
name|utilTableName
argument_list|)
operator|.
name|append
argument_list|(
literal|"."
argument_list|)
operator|.
name|append
argument_list|(
name|MESSAGES
operator|.
name|utilSqlUsageSeatHours
argument_list|()
argument_list|)
operator|.
name|append
argument_list|(
name|seatUsageTotalSuffix
argument_list|)
operator|.
name|append
argument_list|(
literal|")> 0"
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|8
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
literal|"then to_char(sum("
argument_list|)
operator|.
name|append
argument_list|(
name|occTableName
argument_list|)
operator|.
name|append
argument_list|(
literal|"."
argument_list|)
operator|.
name|append
argument_list|(
name|stationsUsedPrefix
argument_list|)
operator|.
name|append
argument_list|(
name|seatUsageTotalSuffix
argument_list|)
operator|.
name|append
argument_list|(
literal|") / sum("
argument_list|)
operator|.
name|append
argument_list|(
name|utilTableName
argument_list|)
operator|.
name|append
argument_list|(
literal|"."
argument_list|)
operator|.
name|append
argument_list|(
name|MESSAGES
operator|.
name|utilSqlUsageSeatHours
argument_list|()
argument_list|)
operator|.
name|append
argument_list|(
name|seatUsageTotalSuffix
argument_list|)
operator|.
name|append
argument_list|(
literal|"))"
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|8
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
literal|"else 'undefined'"
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
literal|"end as "
argument_list|)
operator|.
name|append
argument_list|(
name|stationOccupancyPrefix
argument_list|)
operator|.
name|append
argument_list|(
name|seatUsageTotalSuffix
argument_list|)
expr_stmt|;
if|if
condition|(
name|hasTrailingComma
condition|)
block|{
name|sb
operator|.
name|append
argument_list|(
literal|","
argument_list|)
expr_stmt|;
block|}
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
if|if
condition|(
name|headerRow
operator|!=
literal|null
condition|)
block|{
name|headerRow
operator|.
name|add
argument_list|(
name|stationOccupancyPrefix
operator|+
name|seatUsageTotalSuffix
argument_list|)
expr_stmt|;
block|}
block|}
specifier|private
name|void
name|appendSumZeroIfNull
parameter_list|(
name|StringBuffer
name|sb
parameter_list|,
name|String
name|tableName
parameter_list|,
name|String
name|fieldName
parameter_list|,
name|boolean
name|hasTrailingComma
parameter_list|,
name|ArrayList
argument_list|<
name|String
argument_list|>
name|headerRow
parameter_list|)
block|{
name|sb
operator|.
name|append
argument_list|(
literal|"sum(case when "
argument_list|)
operator|.
name|append
argument_list|(
name|tableName
argument_list|)
operator|.
name|append
argument_list|(
literal|'.'
argument_list|)
operator|.
name|append
argument_list|(
name|fieldName
argument_list|)
operator|.
name|append
argument_list|(
literal|" is null then 0 else "
argument_list|)
operator|.
name|append
argument_list|(
name|tableName
argument_list|)
operator|.
name|append
argument_list|(
literal|'.'
argument_list|)
operator|.
name|append
argument_list|(
name|fieldName
argument_list|)
operator|.
name|append
argument_list|(
literal|" end) as "
argument_list|)
operator|.
name|append
argument_list|(
name|fieldName
argument_list|)
expr_stmt|;
if|if
condition|(
name|hasTrailingComma
condition|)
block|{
name|sb
operator|.
name|append
argument_list|(
literal|","
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|headerRow
operator|!=
literal|null
condition|)
block|{
name|headerRow
operator|.
name|add
argument_list|(
name|fieldName
argument_list|)
expr_stmt|;
block|}
block|}
specifier|private
name|void
name|appendDataZeroIfNull
parameter_list|(
name|StringBuffer
name|sb
parameter_list|,
name|String
name|tableName
parameter_list|,
name|String
name|fieldName
parameter_list|,
name|boolean
name|hasTrailingComma
parameter_list|,
name|ArrayList
argument_list|<
name|String
argument_list|>
name|headerRow
parameter_list|)
block|{
name|sb
operator|.
name|append
argument_list|(
literal|"case when "
argument_list|)
operator|.
name|append
argument_list|(
name|tableName
argument_list|)
operator|.
name|append
argument_list|(
literal|"."
argument_list|)
operator|.
name|append
argument_list|(
name|fieldName
argument_list|)
operator|.
name|append
argument_list|(
literal|" is null then 0 else "
argument_list|)
operator|.
name|append
argument_list|(
name|tableName
argument_list|)
operator|.
name|append
argument_list|(
literal|"."
argument_list|)
operator|.
name|append
argument_list|(
name|fieldName
argument_list|)
operator|.
name|append
argument_list|(
literal|" end as "
argument_list|)
operator|.
name|append
argument_list|(
name|fieldName
argument_list|)
expr_stmt|;
if|if
condition|(
name|hasTrailingComma
condition|)
name|sb
operator|.
name|append
argument_list|(
literal|","
argument_list|)
expr_stmt|;
if|if
condition|(
name|headerRow
operator|!=
literal|null
condition|)
block|{
name|headerRow
operator|.
name|add
argument_list|(
name|fieldName
argument_list|)
expr_stmt|;
block|}
block|}
specifier|private
name|void
name|appendSelectedField
parameter_list|(
name|StringBuffer
name|sb
parameter_list|,
name|String
name|tableName
parameter_list|,
name|String
name|fieldName
parameter_list|,
name|boolean
name|hasLeadingComma
parameter_list|,
name|boolean
name|hasTrailingComma
parameter_list|,
name|ArrayList
argument_list|<
name|String
argument_list|>
name|headerRow
parameter_list|)
block|{
if|if
condition|(
name|hasLeadingComma
condition|)
block|{
name|sb
operator|.
name|append
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
block|}
name|sb
operator|.
name|append
argument_list|(
name|tableName
argument_list|)
operator|.
name|append
argument_list|(
literal|"."
argument_list|)
operator|.
name|append
argument_list|(
name|fieldName
argument_list|)
expr_stmt|;
if|if
condition|(
name|hasTrailingComma
condition|)
block|{
name|sb
operator|.
name|append
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|headerRow
operator|!=
literal|null
condition|)
block|{
name|headerRow
operator|.
name|add
argument_list|(
name|fieldName
argument_list|)
expr_stmt|;
block|}
block|}
specifier|public
name|void
name|getRoomUsageAndOccupancyQuery
parameter_list|(
name|StringBuffer
name|sb
parameter_list|,
name|Session
name|acadSession
parameter_list|,
name|boolean
name|includeSubjectArea
parameter_list|,
name|boolean
name|includeDept
parameter_list|,
name|boolean
name|isCheckNull
parameter_list|,
name|ArrayList
argument_list|<
name|String
argument_list|>
name|headerRow
parameter_list|)
block|{
name|sb
operator|.
name|append
argument_list|(
literal|"select "
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlAcademicInitiative
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlAcademicTerm
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlAcademicYear
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlRoomType
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlBuilding
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlRoom
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlRoomSize
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
if|if
condition|(
name|isShowAdditionalPurdueData
argument_list|()
condition|)
block|{
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlCampusRegion
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlLlrLalrPool
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlClassroomSubtype
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
block|}
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlRangeOfSizes
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
if|if
condition|(
name|includeDept
condition|)
block|{
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlDepartment
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|includeSubjectArea
condition|)
block|{
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlSubject
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
block|}
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlEventType
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlEventTypeDescription
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlUtilizationType
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlUsage
argument_list|()
operator|+
name|MESSAGES
operator|.
name|utilSqlTotalStandardWeekdayHoursSuffix
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlUsage
argument_list|()
operator|+
name|MESSAGES
operator|.
name|utilSqlTotalStandardHoursSuffix
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlUsage
argument_list|()
operator|+
name|MESSAGES
operator|.
name|utilSqlTotalAllHoursSuffix
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlUsageSeatHours
argument_list|()
operator|+
name|MESSAGES
operator|.
name|utilSqlTotalStandardWeekdayHoursSuffix
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlUsageSeatHours
argument_list|()
operator|+
name|MESSAGES
operator|.
name|utilSqlTotalStandardHoursSuffix
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlUsageSeatHours
argument_list|()
operator|+
name|MESSAGES
operator|.
name|utilSqlTotalAllHoursSuffix
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|seatUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlStationsUsed
argument_list|()
operator|+
name|MESSAGES
operator|.
name|utilSqlTotalStandardWeekdayHoursSuffix
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|seatUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlStationsUsed
argument_list|()
operator|+
name|MESSAGES
operator|.
name|utilSqlTotalStandardHoursSuffix
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|seatUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlStationsUsed
argument_list|()
operator|+
name|MESSAGES
operator|.
name|utilSqlTotalAllHoursSuffix
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendStationOccupancyRateCalc
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|seatUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlTotalStandardWeekdayHoursSuffix
argument_list|()
argument_list|,
name|MESSAGES
operator|.
name|utilSqlStationsUsed
argument_list|()
argument_list|,
name|MESSAGES
operator|.
name|utilSqlStationOccupancyRate
argument_list|()
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendStationOccupancyRateCalc
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|seatUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlTotalStandardHoursSuffix
argument_list|()
argument_list|,
name|MESSAGES
operator|.
name|utilSqlStationsUsed
argument_list|()
argument_list|,
name|MESSAGES
operator|.
name|utilSqlStationOccupancyRate
argument_list|()
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendStationOccupancyRateCalc
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|seatUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlTotalAllHoursSuffix
argument_list|()
argument_list|,
name|MESSAGES
operator|.
name|utilSqlStationsUsed
argument_list|()
argument_list|,
name|MESSAGES
operator|.
name|utilSqlStationOccupancyRate
argument_list|()
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|seatUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlStationsRequested
argument_list|()
operator|+
name|MESSAGES
operator|.
name|utilSqlTotalStandardWeekdayHoursSuffix
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|seatUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlStationsRequested
argument_list|()
operator|+
name|MESSAGES
operator|.
name|utilSqlTotalStandardHoursSuffix
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|seatUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlStationsRequested
argument_list|()
operator|+
name|MESSAGES
operator|.
name|utilSqlTotalAllHoursSuffix
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendStationOccupancyRateCalc
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|seatUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlTotalStandardWeekdayHoursSuffix
argument_list|()
argument_list|,
name|MESSAGES
operator|.
name|utilSqlStationsRequested
argument_list|()
argument_list|,
name|MESSAGES
operator|.
name|utilSqlRequestedStationOccupancyRate
argument_list|()
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendStationOccupancyRateCalc
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|seatUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlTotalStandardHoursSuffix
argument_list|()
argument_list|,
name|MESSAGES
operator|.
name|utilSqlStationsRequested
argument_list|()
argument_list|,
name|MESSAGES
operator|.
name|utilSqlRequestedStationOccupancyRate
argument_list|()
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendStationOccupancyRateCalc
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|seatUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlTotalAllHoursSuffix
argument_list|()
argument_list|,
name|MESSAGES
operator|.
name|utilSqlStationsRequested
argument_list|()
argument_list|,
name|MESSAGES
operator|.
name|utilSqlRequestedStationOccupancyRate
argument_list|()
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlDayTime
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendDataZeroIfNull
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlUsage
argument_list|()
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendDataZeroIfNull
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlUsageSeatHours
argument_list|()
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendDataZeroIfNull
argument_list|(
name|sb
argument_list|,
name|seatUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlStationsUsed
argument_list|()
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendDataZeroIfNull
argument_list|(
name|sb
argument_list|,
name|seatUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlStationsRequested
argument_list|()
argument_list|,
literal|false
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|fromClause
argument_list|(
name|sb
argument_list|,
name|acadSession
argument_list|,
literal|true
argument_list|,
name|includeSubjectArea
argument_list|,
name|includeDept
argument_list|,
name|isCheckNull
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
specifier|public
name|String
name|getRoomUsageAndOccupancyQuery
parameter_list|(
name|Session
name|acadSession
parameter_list|,
name|boolean
name|includeSubjectArea
parameter_list|,
name|boolean
name|includeDept
parameter_list|,
name|ArrayList
argument_list|<
name|String
argument_list|>
name|headerRow
parameter_list|)
block|{
name|StringBuffer
name|sb
init|=
operator|new
name|StringBuffer
argument_list|()
decl_stmt|;
name|getRoomUsageAndOccupancyQuery
argument_list|(
name|sb
argument_list|,
name|acadSession
argument_list|,
name|includeSubjectArea
argument_list|,
name|includeDept
argument_list|,
literal|false
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
literal|"where "
argument_list|)
operator|.
name|append
argument_list|(
name|roomUsageTable
argument_list|)
operator|.
name|append
argument_list|(
literal|"."
argument_list|)
operator|.
name|append
argument_list|(
name|MESSAGES
operator|.
name|utilSqlAcademicInitiative
argument_list|()
argument_list|)
operator|.
name|append
argument_list|(
literal|" is not null"
argument_list|)
expr_stmt|;
if|if
condition|(
name|includeDept
operator|||
name|includeSubjectArea
condition|)
block|{
name|sb
operator|.
name|append
argument_list|(
literal|" union all "
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|getRoomUsageAndOccupancyQuery
argument_list|(
name|sb
argument_list|,
name|acadSession
argument_list|,
name|includeSubjectArea
argument_list|,
name|includeDept
argument_list|,
literal|true
argument_list|,
literal|null
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
literal|"where "
argument_list|)
operator|.
name|append
argument_list|(
name|roomUsageTable
argument_list|)
operator|.
name|append
argument_list|(
literal|"."
argument_list|)
operator|.
name|append
argument_list|(
name|MESSAGES
operator|.
name|utilSqlAcademicInitiative
argument_list|()
argument_list|)
operator|.
name|append
argument_list|(
literal|" is not null"
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
name|newline
argument_list|(
name|sb
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
literal|"order by "
argument_list|)
operator|.
name|append
argument_list|(
name|MESSAGES
operator|.
name|utilSqlAcademicInitiative
argument_list|()
argument_list|)
operator|.
name|append
argument_list|(
literal|", "
argument_list|)
operator|.
name|append
argument_list|(
name|MESSAGES
operator|.
name|utilSqlAcademicTerm
argument_list|()
argument_list|)
operator|.
name|append
argument_list|(
literal|", "
argument_list|)
operator|.
name|append
argument_list|(
name|MESSAGES
operator|.
name|utilSqlAcademicYear
argument_list|()
argument_list|)
operator|.
name|append
argument_list|(
literal|" desc, "
argument_list|)
operator|.
name|append
argument_list|(
name|MESSAGES
operator|.
name|utilSqlRoomType
argument_list|()
argument_list|)
operator|.
name|append
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|10
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
name|MESSAGES
operator|.
name|utilSqlRoomSize
argument_list|()
argument_list|)
operator|.
name|append
argument_list|(
literal|" desc, "
argument_list|)
operator|.
name|append
argument_list|(
name|MESSAGES
operator|.
name|utilSqlBuilding
argument_list|()
argument_list|)
operator|.
name|append
argument_list|(
literal|", "
argument_list|)
operator|.
name|append
argument_list|(
name|MESSAGES
operator|.
name|utilSqlRoom
argument_list|()
argument_list|)
expr_stmt|;
if|if
condition|(
name|includeDept
condition|)
block|{
name|sb
operator|.
name|append
argument_list|(
literal|","
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|10
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
name|MESSAGES
operator|.
name|utilSqlDepartment
argument_list|()
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|includeSubjectArea
condition|)
block|{
name|sb
operator|.
name|append
argument_list|(
literal|","
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|10
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
name|MESSAGES
operator|.
name|utilSqlSubject
argument_list|()
argument_list|)
expr_stmt|;
block|}
name|sb
operator|.
name|append
argument_list|(
literal|","
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
name|MESSAGES
operator|.
name|utilSqlDayTime
argument_list|()
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|0
argument_list|)
expr_stmt|;
return|return
name|sb
operator|.
name|toString
argument_list|()
return|;
block|}
specifier|public
name|void
name|getBuildingUsageAndOccupancyTimeDayQuery
parameter_list|(
name|StringBuffer
name|sb
parameter_list|,
name|Session
name|acadSession
parameter_list|,
name|boolean
name|isByRoomType
parameter_list|,
name|boolean
name|includeSubjectArea
parameter_list|,
name|boolean
name|includeDept
parameter_list|,
name|boolean
name|isCheckNull
parameter_list|,
name|ArrayList
argument_list|<
name|String
argument_list|>
name|headerRow
parameter_list|)
block|{
name|sb
operator|.
name|append
argument_list|(
literal|"select "
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlAcademicInitiative
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlAcademicTerm
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlAcademicYear
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
if|if
condition|(
name|isByRoomType
condition|)
block|{
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlRoomType
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
block|}
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlBuilding
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
if|if
condition|(
name|includeDept
condition|)
block|{
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlDepartment
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|includeSubjectArea
condition|)
block|{
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlSubject
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
block|}
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlEventType
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlEventTypeDescription
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlUtilizationType
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlDayTime
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSumZeroIfNull
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlUsage
argument_list|()
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSumZeroIfNull
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlUsageSeatHours
argument_list|()
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSumZeroIfNull
argument_list|(
name|sb
argument_list|,
name|seatUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlStationsUsed
argument_list|()
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSumZeroIfNull
argument_list|(
name|sb
argument_list|,
name|seatUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlStationsRequested
argument_list|()
argument_list|,
literal|false
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|fromClause
argument_list|(
name|sb
argument_list|,
name|acadSession
argument_list|,
literal|true
argument_list|,
name|includeSubjectArea
argument_list|,
name|includeDept
argument_list|,
name|isCheckNull
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
literal|"where "
argument_list|)
operator|.
name|append
argument_list|(
name|roomUsageTable
argument_list|)
operator|.
name|append
argument_list|(
literal|"."
argument_list|)
operator|.
name|append
argument_list|(
name|MESSAGES
operator|.
name|utilSqlAcademicInitiative
argument_list|()
argument_list|)
operator|.
name|append
argument_list|(
literal|" is not null"
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
literal|"group by "
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlAcademicInitiative
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
literal|null
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlAcademicTerm
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
literal|null
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlAcademicYear
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
literal|null
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlUtilizationType
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
literal|null
argument_list|)
expr_stmt|;
if|if
condition|(
name|isByRoomType
condition|)
block|{
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlRoomType
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
literal|null
argument_list|)
expr_stmt|;
block|}
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlBuilding
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
literal|null
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlEventType
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
literal|null
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlEventTypeDescription
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
literal|null
argument_list|)
expr_stmt|;
if|if
condition|(
name|includeDept
condition|)
block|{
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlDepartment
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
literal|null
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|includeSubjectArea
condition|)
block|{
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlSubject
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
literal|null
argument_list|)
expr_stmt|;
block|}
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlDayTime
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|,
literal|null
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
specifier|public
name|String
name|getBuildingUsageAndOccupancyTimeDayQuery
parameter_list|(
name|Session
name|acadSession
parameter_list|,
name|boolean
name|isByRoomType
parameter_list|,
name|boolean
name|includeSubjectArea
parameter_list|,
name|boolean
name|includeDept
parameter_list|,
name|ArrayList
argument_list|<
name|String
argument_list|>
name|headerRow
parameter_list|)
block|{
name|StringBuffer
name|sb
init|=
operator|new
name|StringBuffer
argument_list|()
decl_stmt|;
name|getBuildingUsageAndOccupancyTimeDayQuery
argument_list|(
name|sb
argument_list|,
name|acadSession
argument_list|,
name|isByRoomType
argument_list|,
name|includeSubjectArea
argument_list|,
name|includeDept
argument_list|,
literal|false
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|0
argument_list|)
expr_stmt|;
if|if
condition|(
name|includeDept
operator|||
name|includeSubjectArea
condition|)
block|{
name|sb
operator|.
name|append
argument_list|(
literal|" union all "
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|getBuildingUsageAndOccupancyTimeDayQuery
argument_list|(
name|sb
argument_list|,
name|acadSession
argument_list|,
name|isByRoomType
argument_list|,
name|includeSubjectArea
argument_list|,
name|includeDept
argument_list|,
literal|true
argument_list|,
literal|null
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
name|newline
argument_list|(
name|sb
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
literal|"order by "
argument_list|)
operator|.
name|append
argument_list|(
name|MESSAGES
operator|.
name|utilSqlAcademicInitiative
argument_list|()
argument_list|)
operator|.
name|append
argument_list|(
literal|", "
argument_list|)
operator|.
name|append
argument_list|(
name|MESSAGES
operator|.
name|utilSqlAcademicTerm
argument_list|()
argument_list|)
operator|.
name|append
argument_list|(
literal|", "
argument_list|)
operator|.
name|append
argument_list|(
name|MESSAGES
operator|.
name|utilSqlAcademicYear
argument_list|()
argument_list|)
operator|.
name|append
argument_list|(
literal|" desc, "
argument_list|)
operator|.
name|append
argument_list|(
name|MESSAGES
operator|.
name|utilSqlBuilding
argument_list|()
argument_list|)
operator|.
name|append
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
if|if
condition|(
name|isByRoomType
condition|)
block|{
name|sb
operator|.
name|append
argument_list|(
name|MESSAGES
operator|.
name|utilSqlRoomType
argument_list|()
argument_list|)
operator|.
name|append
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
block|}
name|newline
argument_list|(
name|sb
argument_list|,
literal|10
argument_list|)
expr_stmt|;
if|if
condition|(
name|includeDept
condition|)
block|{
name|newline
argument_list|(
name|sb
argument_list|,
literal|10
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
name|MESSAGES
operator|.
name|utilSqlDepartment
argument_list|()
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
literal|","
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|includeSubjectArea
condition|)
block|{
name|newline
argument_list|(
name|sb
argument_list|,
literal|10
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
name|MESSAGES
operator|.
name|utilSqlSubject
argument_list|()
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
literal|","
argument_list|)
expr_stmt|;
block|}
name|newline
argument_list|(
name|sb
argument_list|,
literal|10
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
name|MESSAGES
operator|.
name|utilSqlEventType
argument_list|()
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
literal|","
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|10
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
name|MESSAGES
operator|.
name|utilSqlUtilizationType
argument_list|()
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
literal|","
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
name|MESSAGES
operator|.
name|utilSqlDayTime
argument_list|()
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|0
argument_list|)
expr_stmt|;
return|return
name|sb
operator|.
name|toString
argument_list|()
return|;
block|}
specifier|private
name|void
name|buildingData
parameter_list|(
name|StringBuffer
name|sb
parameter_list|,
name|Session
name|acadSession
parameter_list|,
name|boolean
name|isByRoomType
parameter_list|,
name|boolean
name|includeSubjectArea
parameter_list|,
name|boolean
name|includeDept
parameter_list|,
name|boolean
name|isCheckNull
parameter_list|,
name|ArrayList
argument_list|<
name|String
argument_list|>
name|headerRow
parameter_list|)
block|{
name|sb
operator|.
name|append
argument_list|(
literal|"("
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
literal|"select distinct "
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlAcademicInitiative
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlAcademicTerm
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlAcademicYear
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
if|if
condition|(
name|isByRoomType
condition|)
block|{
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlRoomType
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
block|}
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlBuilding
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlRoom
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlRoomSize
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
if|if
condition|(
name|isShowAdditionalPurdueData
argument_list|()
condition|)
block|{
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlCampusRegion
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlLlrLalrPool
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlClassroomSubtype
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
block|}
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlRangeOfSizes
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
if|if
condition|(
name|includeDept
condition|)
block|{
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlDepartment
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|includeSubjectArea
condition|)
block|{
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlSubject
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
block|}
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlEventType
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlEventTypeDescription
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlUtilizationType
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlUsage
argument_list|()
operator|+
name|MESSAGES
operator|.
name|utilSqlTotalStandardWeekdayHoursSuffix
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlUsage
argument_list|()
operator|+
name|MESSAGES
operator|.
name|utilSqlTotalStandardHoursSuffix
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlUsage
argument_list|()
operator|+
name|MESSAGES
operator|.
name|utilSqlTotalAllHoursSuffix
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlUsageSeatHours
argument_list|()
operator|+
name|MESSAGES
operator|.
name|utilSqlTotalStandardWeekdayHoursSuffix
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlUsageSeatHours
argument_list|()
operator|+
name|MESSAGES
operator|.
name|utilSqlTotalStandardHoursSuffix
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|roomUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlUsageSeatHours
argument_list|()
operator|+
name|MESSAGES
operator|.
name|utilSqlTotalAllHoursSuffix
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|seatUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlStationsUsed
argument_list|()
operator|+
name|MESSAGES
operator|.
name|utilSqlTotalStandardWeekdayHoursSuffix
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|seatUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlStationsUsed
argument_list|()
operator|+
name|MESSAGES
operator|.
name|utilSqlTotalStandardHoursSuffix
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|seatUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlStationsUsed
argument_list|()
operator|+
name|MESSAGES
operator|.
name|utilSqlTotalAllHoursSuffix
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|seatUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlStationsRequested
argument_list|()
operator|+
name|MESSAGES
operator|.
name|utilSqlTotalStandardWeekdayHoursSuffix
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|seatUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlStationsRequested
argument_list|()
operator|+
name|MESSAGES
operator|.
name|utilSqlTotalStandardHoursSuffix
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|seatUsageTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlStationsRequested
argument_list|()
operator|+
name|MESSAGES
operator|.
name|utilSqlTotalAllHoursSuffix
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|fromClause
argument_list|(
name|sb
argument_list|,
name|acadSession
argument_list|,
literal|false
argument_list|,
name|includeSubjectArea
argument_list|,
name|includeDept
argument_list|,
name|isCheckNull
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
literal|") "
argument_list|)
operator|.
name|append
argument_list|(
name|buildingDataTable
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
specifier|public
name|void
name|getBuildingUsageAndOccupancyQuery
parameter_list|(
name|StringBuffer
name|sb
parameter_list|,
name|Session
name|acadSession
parameter_list|,
name|boolean
name|isByRoomType
parameter_list|,
name|boolean
name|includeSubjectArea
parameter_list|,
name|boolean
name|includeDept
parameter_list|,
name|boolean
name|isCheckNull
parameter_list|,
name|ArrayList
argument_list|<
name|String
argument_list|>
name|headerRow
parameter_list|)
block|{
name|newline
argument_list|(
name|sb
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
literal|"select "
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|buildingDataTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlAcademicInitiative
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|buildingDataTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlAcademicTerm
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|buildingDataTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlAcademicYear
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
if|if
condition|(
name|isByRoomType
condition|)
block|{
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|buildingDataTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlRoomType
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
block|}
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|buildingDataTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlBuilding
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
if|if
condition|(
name|includeDept
condition|)
block|{
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|buildingDataTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlDepartment
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|includeSubjectArea
condition|)
block|{
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|buildingDataTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlSubject
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
block|}
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|buildingDataTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlEventType
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|buildingDataTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlEventTypeDescription
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|buildingDataTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlUtilizationType
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSumZeroIfNull
argument_list|(
name|sb
argument_list|,
name|buildingDataTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlUsage
argument_list|()
operator|+
name|MESSAGES
operator|.
name|utilSqlTotalStandardWeekdayHoursSuffix
argument_list|()
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSumZeroIfNull
argument_list|(
name|sb
argument_list|,
name|buildingDataTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlUsage
argument_list|()
operator|+
name|MESSAGES
operator|.
name|utilSqlTotalStandardHoursSuffix
argument_list|()
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSumZeroIfNull
argument_list|(
name|sb
argument_list|,
name|buildingDataTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlUsage
argument_list|()
operator|+
name|MESSAGES
operator|.
name|utilSqlTotalAllHoursSuffix
argument_list|()
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSumZeroIfNull
argument_list|(
name|sb
argument_list|,
name|buildingDataTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlUsageSeatHours
argument_list|()
operator|+
name|MESSAGES
operator|.
name|utilSqlTotalStandardWeekdayHoursSuffix
argument_list|()
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSumZeroIfNull
argument_list|(
name|sb
argument_list|,
name|buildingDataTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlUsageSeatHours
argument_list|()
operator|+
name|MESSAGES
operator|.
name|utilSqlTotalStandardHoursSuffix
argument_list|()
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSumZeroIfNull
argument_list|(
name|sb
argument_list|,
name|buildingDataTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlUsageSeatHours
argument_list|()
operator|+
name|MESSAGES
operator|.
name|utilSqlTotalAllHoursSuffix
argument_list|()
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSumZeroIfNull
argument_list|(
name|sb
argument_list|,
name|buildingDataTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlStationsUsed
argument_list|()
operator|+
name|MESSAGES
operator|.
name|utilSqlTotalStandardWeekdayHoursSuffix
argument_list|()
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSumZeroIfNull
argument_list|(
name|sb
argument_list|,
name|buildingDataTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlStationsUsed
argument_list|()
operator|+
name|MESSAGES
operator|.
name|utilSqlTotalStandardHoursSuffix
argument_list|()
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSumZeroIfNull
argument_list|(
name|sb
argument_list|,
name|buildingDataTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlStationsUsed
argument_list|()
operator|+
name|MESSAGES
operator|.
name|utilSqlTotalAllHoursSuffix
argument_list|()
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSummedStationOccupancyRateCalc
argument_list|(
name|sb
argument_list|,
name|buildingDataTable
argument_list|,
name|buildingDataTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlTotalStandardWeekdayHoursSuffix
argument_list|()
argument_list|,
name|MESSAGES
operator|.
name|utilSqlStationsUsed
argument_list|()
argument_list|,
name|MESSAGES
operator|.
name|utilSqlStationOccupancyRate
argument_list|()
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSummedStationOccupancyRateCalc
argument_list|(
name|sb
argument_list|,
name|buildingDataTable
argument_list|,
name|buildingDataTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlTotalStandardHoursSuffix
argument_list|()
argument_list|,
name|MESSAGES
operator|.
name|utilSqlStationsUsed
argument_list|()
argument_list|,
name|MESSAGES
operator|.
name|utilSqlStationOccupancyRate
argument_list|()
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSummedStationOccupancyRateCalc
argument_list|(
name|sb
argument_list|,
name|buildingDataTable
argument_list|,
name|buildingDataTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlTotalAllHoursSuffix
argument_list|()
argument_list|,
name|MESSAGES
operator|.
name|utilSqlStationsUsed
argument_list|()
argument_list|,
name|MESSAGES
operator|.
name|utilSqlStationOccupancyRate
argument_list|()
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSumZeroIfNull
argument_list|(
name|sb
argument_list|,
name|buildingDataTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlStationsRequested
argument_list|()
operator|+
name|MESSAGES
operator|.
name|utilSqlTotalStandardWeekdayHoursSuffix
argument_list|()
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSumZeroIfNull
argument_list|(
name|sb
argument_list|,
name|buildingDataTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlStationsRequested
argument_list|()
operator|+
name|MESSAGES
operator|.
name|utilSqlTotalStandardHoursSuffix
argument_list|()
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSumZeroIfNull
argument_list|(
name|sb
argument_list|,
name|buildingDataTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlStationsRequested
argument_list|()
operator|+
name|MESSAGES
operator|.
name|utilSqlTotalAllHoursSuffix
argument_list|()
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSummedStationOccupancyRateCalc
argument_list|(
name|sb
argument_list|,
name|buildingDataTable
argument_list|,
name|buildingDataTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlTotalStandardWeekdayHoursSuffix
argument_list|()
argument_list|,
name|MESSAGES
operator|.
name|utilSqlStationsRequested
argument_list|()
argument_list|,
name|MESSAGES
operator|.
name|utilSqlRequestedStationOccupancyRate
argument_list|()
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSummedStationOccupancyRateCalc
argument_list|(
name|sb
argument_list|,
name|buildingDataTable
argument_list|,
name|buildingDataTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlTotalStandardHoursSuffix
argument_list|()
argument_list|,
name|MESSAGES
operator|.
name|utilSqlStationsRequested
argument_list|()
argument_list|,
name|MESSAGES
operator|.
name|utilSqlRequestedStationOccupancyRate
argument_list|()
argument_list|,
literal|true
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSummedStationOccupancyRateCalc
argument_list|(
name|sb
argument_list|,
name|buildingDataTable
argument_list|,
name|buildingDataTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlTotalAllHoursSuffix
argument_list|()
argument_list|,
name|MESSAGES
operator|.
name|utilSqlStationsRequested
argument_list|()
argument_list|,
name|MESSAGES
operator|.
name|utilSqlRequestedStationOccupancyRate
argument_list|()
argument_list|,
literal|false
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
literal|"from"
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|buildingData
argument_list|(
name|sb
argument_list|,
name|acadSession
argument_list|,
name|isByRoomType
argument_list|,
name|includeSubjectArea
argument_list|,
name|includeDept
argument_list|,
name|isCheckNull
argument_list|,
literal|null
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
literal|"where "
argument_list|)
operator|.
name|append
argument_list|(
name|buildingDataTable
argument_list|)
operator|.
name|append
argument_list|(
literal|"."
argument_list|)
operator|.
name|append
argument_list|(
name|MESSAGES
operator|.
name|utilSqlAcademicInitiative
argument_list|()
argument_list|)
operator|.
name|append
argument_list|(
literal|" is not null"
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
literal|"group by "
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|buildingDataTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlAcademicInitiative
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
literal|null
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|buildingDataTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlAcademicTerm
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
literal|null
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|buildingDataTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlAcademicYear
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
literal|null
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|buildingDataTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlUtilizationType
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
literal|null
argument_list|)
expr_stmt|;
if|if
condition|(
name|isByRoomType
condition|)
block|{
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|buildingDataTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlRoomType
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
literal|null
argument_list|)
expr_stmt|;
block|}
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|buildingDataTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlBuilding
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
literal|null
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|buildingDataTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlEventType
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
literal|null
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|buildingDataTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlEventTypeDescription
argument_list|()
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|,
literal|null
argument_list|)
expr_stmt|;
if|if
condition|(
name|includeDept
condition|)
block|{
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|buildingDataTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlDepartment
argument_list|()
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|,
literal|null
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|includeSubjectArea
condition|)
block|{
name|newline
argument_list|(
name|sb
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|appendSelectedField
argument_list|(
name|sb
argument_list|,
name|buildingDataTable
argument_list|,
name|MESSAGES
operator|.
name|utilSqlSubject
argument_list|()
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|,
literal|null
argument_list|)
expr_stmt|;
block|}
name|newline
argument_list|(
name|sb
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
specifier|public
name|String
name|getBuildingUsageAndOccupancyQuery
parameter_list|(
name|Session
name|acadSession
parameter_list|,
name|boolean
name|isByRoomType
parameter_list|,
name|boolean
name|includeSubjectArea
parameter_list|,
name|boolean
name|includeDept
parameter_list|,
name|ArrayList
argument_list|<
name|String
argument_list|>
name|headerRow
parameter_list|)
block|{
name|StringBuffer
name|sb
init|=
operator|new
name|StringBuffer
argument_list|()
decl_stmt|;
name|getBuildingUsageAndOccupancyQuery
argument_list|(
name|sb
argument_list|,
name|acadSession
argument_list|,
name|isByRoomType
argument_list|,
name|includeSubjectArea
argument_list|,
name|includeDept
argument_list|,
literal|false
argument_list|,
name|headerRow
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|0
argument_list|)
expr_stmt|;
if|if
condition|(
name|includeDept
operator|||
name|includeSubjectArea
condition|)
block|{
name|newline
argument_list|(
name|sb
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
literal|" union all "
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|getBuildingUsageAndOccupancyQuery
argument_list|(
name|sb
argument_list|,
name|acadSession
argument_list|,
name|isByRoomType
argument_list|,
name|includeSubjectArea
argument_list|,
name|includeDept
argument_list|,
literal|true
argument_list|,
literal|null
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
name|newline
argument_list|(
name|sb
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
literal|"order by "
argument_list|)
operator|.
name|append
argument_list|(
name|MESSAGES
operator|.
name|utilSqlAcademicInitiative
argument_list|()
argument_list|)
operator|.
name|append
argument_list|(
literal|", "
argument_list|)
operator|.
name|append
argument_list|(
name|MESSAGES
operator|.
name|utilSqlAcademicTerm
argument_list|()
argument_list|)
operator|.
name|append
argument_list|(
literal|", "
argument_list|)
operator|.
name|append
argument_list|(
name|MESSAGES
operator|.
name|utilSqlAcademicYear
argument_list|()
argument_list|)
operator|.
name|append
argument_list|(
literal|" desc, "
argument_list|)
operator|.
name|append
argument_list|(
name|MESSAGES
operator|.
name|utilSqlBuilding
argument_list|()
argument_list|)
operator|.
name|append
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
if|if
condition|(
name|isByRoomType
condition|)
block|{
name|sb
operator|.
name|append
argument_list|(
name|MESSAGES
operator|.
name|utilSqlRoomType
argument_list|()
argument_list|)
operator|.
name|append
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
block|}
name|newline
argument_list|(
name|sb
argument_list|,
literal|10
argument_list|)
expr_stmt|;
if|if
condition|(
name|includeDept
condition|)
block|{
name|newline
argument_list|(
name|sb
argument_list|,
literal|10
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
name|MESSAGES
operator|.
name|utilSqlDepartment
argument_list|()
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
literal|","
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|includeSubjectArea
condition|)
block|{
name|newline
argument_list|(
name|sb
argument_list|,
literal|10
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
name|MESSAGES
operator|.
name|utilSqlSubject
argument_list|()
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
literal|","
argument_list|)
expr_stmt|;
block|}
name|newline
argument_list|(
name|sb
argument_list|,
literal|10
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
name|MESSAGES
operator|.
name|utilSqlEventType
argument_list|()
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
literal|","
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|10
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
name|MESSAGES
operator|.
name|utilSqlUtilizationType
argument_list|()
argument_list|)
expr_stmt|;
name|newline
argument_list|(
name|sb
argument_list|,
literal|0
argument_list|)
expr_stmt|;
return|return
name|sb
operator|.
name|toString
argument_list|()
return|;
block|}
specifier|public
name|String
name|getBuildingUsageAndOccupancyByRoomTypeQuery
parameter_list|(
name|Session
name|acadSession
parameter_list|,
name|boolean
name|includeSubjectArea
parameter_list|,
name|boolean
name|includeDept
parameter_list|,
name|ArrayList
argument_list|<
name|String
argument_list|>
name|headerRow
parameter_list|)
block|{
return|return
name|getBuildingUsageAndOccupancyQuery
argument_list|(
name|acadSession
argument_list|,
literal|true
argument_list|,
name|includeSubjectArea
argument_list|,
name|includeDept
argument_list|,
name|headerRow
argument_list|)
return|;
block|}
specifier|public
name|String
name|getBuildingUsageAndOccupancyWholeBuildingQuery
parameter_list|(
name|Session
name|acadSession
parameter_list|,
name|boolean
name|includeSubjectArea
parameter_list|,
name|boolean
name|includeDept
parameter_list|,
name|ArrayList
argument_list|<
name|String
argument_list|>
name|headerRow
parameter_list|)
block|{
return|return
name|getBuildingUsageAndOccupancyQuery
argument_list|(
name|acadSession
argument_list|,
literal|false
argument_list|,
name|includeSubjectArea
argument_list|,
name|includeDept
argument_list|,
name|headerRow
argument_list|)
return|;
block|}
specifier|protected
name|void
name|indent
parameter_list|(
name|StringBuffer
name|stringBuffer
parameter_list|,
name|int
name|indentSizeInChars
parameter_list|)
block|{
for|for
control|(
name|int
name|i
init|=
literal|0
init|;
name|i
operator|<
name|indentSizeInChars
condition|;
name|i
operator|++
control|)
block|{
name|stringBuffer
operator|.
name|append
argument_list|(
literal|" "
argument_list|)
expr_stmt|;
block|}
block|}
specifier|protected
name|void
name|newline
parameter_list|(
name|StringBuffer
name|stringBuffer
parameter_list|,
name|int
name|indentSizeInChars
parameter_list|)
block|{
name|stringBuffer
operator|.
name|append
argument_list|(
literal|"\n"
argument_list|)
expr_stmt|;
name|indent
argument_list|(
name|stringBuffer
argument_list|,
name|indentSizeInChars
argument_list|)
expr_stmt|;
block|}
block|}
end_class

end_unit

